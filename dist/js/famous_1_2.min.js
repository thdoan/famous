// Copyright (c) 2013 Famo.us, Inc.
//
// Non-sublicensable permission is hereby granted, free of charge,
// to any person obtaining a copy of this software and associated
// documentation files directly from codepen.io (the "Software"), solely to
// internally make and internally use copies of the Software to test,
// explore, and evaluate the Software solely in such personâ€™s non-commercial,
// non-production environments, provided that the above copyright
// notice and this permission notice shall be included in all copies or
// substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
// IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
// CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
// TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
// SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

/*!
 * almond 0.2.6 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */

!function(t,i){if("function"==typeof define&&define.amd)define(i);else if("object"==typeof window){var e;window.addEventListener("load",function(){t.Famous=i(),e&&t.Famous(e)}),t.Famous=function(t){e=t}}else t.Famous=i()}(this,function(){var requirejs,require,define;!function(t){function i(t,i){return g.call(t,i)}function e(t,i){var e,s,o,n,r,a,h,u,p,c,f=i&&i.split("/"),l=m.map,d=l&&l["*"]||{};if(t&&"."===t.charAt(0))if(i){for(f=f.slice(0,f.length-1),t=f.concat(t.split("/")),u=0;u<t.length;u+=1)if(c=t[u],"."===c)t.splice(u,1),u-=1;else if(".."===c){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||d)&&l){for(e=t.split("/"),u=e.length;u>0;u-=1){if(s=e.slice(0,u).join("/"),f)for(p=f.length;p>0;p-=1)if(o=l[f.slice(0,p).join("/")],o&&(o=o[s])){n=o,r=u;break}if(n)break;!a&&d&&d[s]&&(a=d[s],h=u)}!n&&a&&(n=a,r=h),n&&(e.splice(0,r,n),t=e.join("/"))}return t}function s(i,e){return function(){return p.apply(t,y.call(arguments,0).concat([i,e]))}}function o(t){return function(i){return e(i,t)}}function n(t){return function(i){l[t]=i}}function r(e){if(i(d,e)){var s=d[e];delete d[e],v[e]=!0,u.apply(t,s)}if(!i(l,e)&&!i(v,e))throw new Error("No "+e);return l[e]}function a(t){var i,e=t?t.indexOf("!"):-1;return e>-1&&(i=t.substring(0,e),t=t.substring(e+1,t.length)),[i,t]}function h(t){return function(){return m&&m.config&&m.config[t]||{}}}var u,p,c,f,l={},d={},m={},v={},g=Object.prototype.hasOwnProperty,y=[].slice;c=function(t,i){var s,n=a(t),h=n[0];return t=n[1],h&&(h=e(h,i),s=r(h)),h?t=s&&s.normalize?s.normalize(t,o(i)):e(t,i):(t=e(t,i),n=a(t),h=n[0],t=n[1],h&&(s=r(h))),{f:h?h+"!"+t:t,n:t,pr:h,p:s}},f={require:function(t){return s(t)},exports:function(t){var i=l[t];return"undefined"!=typeof i?i:l[t]={}},module:function(t){return{id:t,uri:"",exports:l[t],config:h(t)}}},u=function(e,o,a,h){var u,p,m,g,y,x,S=[];if(h=h||e,"function"==typeof a){for(o=!o.length&&a.length?["require","exports","module"]:o,y=0;y<o.length;y+=1)if(g=c(o[y],h),p=g.f,"require"===p)S[y]=f.require(e);else if("exports"===p)S[y]=f.exports(e),x=!0;else if("module"===p)u=S[y]=f.module(e);else if(i(l,p)||i(d,p)||i(v,p))S[y]=r(p);else{if(!g.p)throw new Error(e+" missing "+p);g.p.load(g.n,s(h,!0),n(p),{}),S[y]=l[p]}m=a.apply(l[e],S),e&&(u&&u.exports!==t&&u.exports!==l[e]?l[e]=u.exports:m===t&&x||(l[e]=m))}else e&&(l[e]=a)},requirejs=require=p=function(i,e,s,o,n){return"string"==typeof i?f[i]?f[i](e):r(c(i,e).f):(i.splice||(m=i,e.splice?(i=e,e=s,s=null):i=t),e=e||function(){},"function"==typeof s&&(s=o,o=n),o?u(t,i,e,s):setTimeout(function(){u(t,i,e,s)},4),p)},p.config=function(t){return m=t,m.deps&&p(m.deps,m.callback),p},requirejs._defined=l,define=function(t,e,s){e.splice||(s=e,e=[]),i(l,t)||i(d,t)||(d[t]=[t,e,s])},define.amd={jQuery:!0}}(),
define("famous/CanvasSurface",["require","exports","module","./Surface"],function(t,i,e){function s(t,i){i||(i=t),this.canvasSize=i,o.call(this,t),this.backBuffer=document.createElement("canvas"),this.backBuffer.width=i[0],this.backBuffer.height=i[1],this._contextId=void 0}var o=t("./Surface");s.prototype=Object.create(o.prototype),s.prototype.elementType="canvas",s.prototype.elementClass="surface",s.prototype.setContent=function(){},s.prototype.deploy=function(t){t.width=this.canvasSize[0],t.height=this.canvasSize[1],"2d"==this._contextId&&(t.getContext(this._contextId).drawImage(this.backBuffer,0,0),this.backBuffer.width=0,this.backBuffer.height=0)},s.prototype.recall=function(t){this.getSize(),this.backBuffer.width=t.width,this.backBuffer.height=t.height,"2d"==this._contextId&&(this.backBuffer.getContext(this._contextId).drawImage(t,0,0),t.width=0,t.height=0)},s.prototype.getContext=function(t){return this._contextId=t,this._currTarget?this._currTarget.getContext(t):this.backBuffer.getContext(t)},s.prototype.setSize=function(t,i){o.prototype.setSize.apply(this,arguments),i&&(this.canvasSize=i.slice(0)),this._currTarget&&(this._currTarget.width=this.canvasSize[0],this._currTarget.height=this.canvasSize[1])},e.exports=s}),
define("famous/Combiner",["require","exports","module","./RenderNode"],function(t,i,e){function s(){this.nodes=[]}var o=t("./RenderNode");s.prototype.includeFrom=function(t){var i=new o(t);return this.nodes.push(i),i},s.prototype.reset=function(){this.nodes=[]},s.prototype.render=function(){for(var t=[],i=0;i<this.nodes.length;i++)t[i]=this.nodes[i].execute();return t},e.exports=s}),
define("famous/ContainerSurface",["require","exports","module","./SurfaceManager","./Surface","./RenderNode","./SpecParser"],function(t,i,e){function s(){n.apply(this,arguments),this.container=document.createElement("div"),this.container.classList.add("container-surface"),this.elementCache=document.createElement("div"),this.elementCache.appendChild(this.container),this.surfaceManager=new o(this.container,{size:this.size}),this.dirty=!0,this.contentSrcNode=void 0}var o=t("./SurfaceManager"),n=t("./Surface"),r=t("./RenderNode"),a=t("./SpecParser");s.prototype=Object.create(n.prototype),s.prototype.deploy=function(t){if(this.currDeployment){if(this.currDeployment==t)return;this.recall()}t.innerHTML="",this.currDeployment=t,this.currDeployment.appendChild(this.elementCache.removeChild(this.elementCache.firstChild))},s.prototype.recall=function(){this.elementCache.appendChild(this.currDeployment.removeChild(this.currDeployment.firstChild)),this.currDeployment=void 0},s.prototype.update=function(t){var i=a.parse({size:this.getSize(),target:t});this.surfaceManager.update(i)},s.prototype.render=function(t){return!t&&this.contentSrcNode&&(t=this.contentSrcNode.execute()),this.update(t),n.prototype.render.call(this)},s.prototype.contentFrom=function(t){return this.contentSrcNode=new r(t),this.contentSrcNode},s.prototype.setOrigin=function(t){this.surfaceManager.setOrigin(t)},s.prototype.setSize=function(t){n.prototype.setSize.apply(this,arguments),this.surfaceManager&&this.surfaceManager.setSize(t)},e.exports=s}),
define("famous/Context",["require","exports","module","./RenderNode","./EventHandler","./SpecParser","./Matrix"],function(t,i,e){function s(t){this.surfaceManager=t,this.srcNode=void 0,this.parsedCache=void 0,this.eventHandler=new n,this._size=[window.innerWidth,window.innerHeight]}var o=t("./RenderNode"),n=t("./EventHandler"),r=t("./SpecParser"),a=t("./Matrix");s.prototype.contentFrom=function(t){return this.srcNode=new o(t),this.srcNode},s.prototype.setSize=function(t){this._size=t},s.prototype.update=function(){if(this.srcNode){var t={size:this._size,target:this.srcNode.execute()};r.parse(t,function(t){this.parsedCache=t}.bind(this)),this.parsedCache&&this.surfaceManager.update(this.parsedCache)}},s.prototype.getOutputTransform=function(t){var i=this.parsedCache;if(i){var e=t.id,s={transform:i.transforms[e],opacity:i.opacities[e]};if(i.origins[e]&&(s.origin=i.origins[e]),i.groups[e]){var o=i.groups[e];s.transform=a.multiply(s.transform,i.groupTransforms[o]),i.groupOpacities[o]&&(s.opacity*=i.groupOpacities[o])}return s}},s.prototype.getPerspective=function(){return this.surfaceManager.getPerspective()},s.prototype.setPerspective=function(t,i,e){return this.surfaceManager.setPerspective(t,i,e)},s.prototype.emit=function(t,i){return this.eventHandler.emit(t,i)},s.prototype.on=function(t,i){return this.eventHandler.on(t,i)},s.prototype.unbind=function(t,i){return this.eventHandler.unbind(t,i)},s.prototype.pipeEvents=function(t){return this.eventHandler.pipe(t)},s.prototype.unpipeEvents=function(t){return this.eventHandler.unpipe(t)},e.exports=s}),
define("famous/ElementAllocator",["require","exports","module"],function(t,i,e){function s(t){this.container=t,this.detachedNodes={},this.nodeCount=0}s.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var i,e=this.detachedNodes[t];return e.length>0?i=e.pop():(i=document.createElement(t),this.container.appendChild(i)),this.nodeCount++,i},s.prototype.deallocate=function(t){var i=t.nodeName.toLowerCase(),e=this.detachedNodes[i];e.push(t),this.nodeCount--},s.prototype.getNodeCount=function(){return this.nodeCount},e.exports=s}),
define("famous/Engine",["require","exports","module","./Context","./EventHandler","./SurfaceManager"],function(t,i,e){function s(){var t=Date.now();if(T&&T>t-w)return requestAnimationFrame(s),void 0;b=t-w,w=t,M.emit("prerender");for(var i=0;i<x.length;i++)x[i].call(this);for(x=[];S.length&&Date.now()-t<z;)S.shift().call(this);for(var i=0;i<y.length;i++)y[i].update();M.emit("postrender"),requestAnimationFrame(s)}function o(t){return document.activeElement&&"INPUT"==document.activeElement.nodeName?(document.activeElement.addEventListener("blur",function i(){this.removeEventListener("blur",i),o(t)}),void 0):(window.scrollTo(0,0),l(function(){for(var t=window.innerWidth,i=window.innerHeight,e=0;e<y.length;e++)y[e].emit("resize"),y[e].setSize([t,i])}),M.emit("resize"),void 0)}function n(t){return M.pipe(t)}function r(t){return M.unpipe(t)}function a(t,i){M.on(t,i)}function h(t,i){M.emit(t,i)}function u(t,i){M.unbind(t,i)}function p(){return 1e3/b}function c(t){T=Math.floor(1e3/t)}function f(t){void 0===t?(t=document.createElement("div"),t.classList.add("container"),document.body.appendChild(t)):t instanceof Element||(t=document.createElement("div"),console.warn("Tried to create context on non-existent element"));var i=t.surfaceManager?t.surfaceManager:new g(t);t.surfaceManager=i;var e=new m(i);return y.push(e),e}function l(t){x.push(t)}function d(t){S.push(t)}var m=t("./Context"),v=t("./EventHandler"),g=t("./SurfaceManager"),y=[],x=[],S=[],w=Date.now(),b=void 0,T=void 0,M=new v,z=10;requestAnimationFrame(s),window.addEventListener("resize",o,!1),o()/*,window.addEventListener("touchmove",function(t){t.preventDefault()},!1)*/;for(var C=["touchstart","touchmove","touchend","touchcancel","click","keydown","keyup","keypress","mouseup","mousedown","mousemove","mouseover","mouseout","resize"],_=0;_<C.length;_++)!function(t){document.body.addEventListener(t,function(i){M.emit(t,i,!1)},!1)}.call(this,C[_]);e.exports={on:a,defer:d,emit:h,unbind:u,pipeEvents:n,unpipeEvents:r,createContext:f,getFPS:p,setFPSCap:c,nextTick:l}}),
define("famous/EventArbiter",["require","exports","module","./EventHandler"],function(t,i,e){function s(t){this.dispatchers={},this.currMode=void 0,this.setMode(t)}var o=t("./EventHandler");s.prototype.setMode=function(t){if(t!=this.currMode){var i=this.currMode;this.emit("modeout",{from:i,to:t}),this.dispatchers[this.currMode]&&this.dispatchers[this.currMode].emit("unpipe"),this.currMode=t,this.dispatchers[t]&&this.dispatchers[t].emit("pipe"),this.emit("modein",{from:i,to:t})}},s.prototype.forMode=function(t){return this.dispatchers[t]||(this.dispatchers[t]=new o),this.dispatchers[t]},s.prototype.emit=function(t,i){if(void 0==this.currMode)return!1;i||(i={});var e=this.dispatchers[this.currMode];return e?e.emit(t,i):void 0},e.exports=s}),
define("famous/EventHandler",["require","exports","module"],function(t,i,e){function s(){this.listeners={},this.downstream=[],this.downstreamFn=[]}function o(t,i){for(var e=!1,s=0;s<this.downstream.length;s++)this.downstream[s].emit(t,i)&&(e=!0);for(var s=0;s<this.downstreamFn.length;s++)this.downstreamFn[s](t,i)&&(e=!0);return e}s.prototype.emit=function(t,i){i||(i={});var e=this.listeners[t],s=!1;if(e)for(var n=0;n<e.length;n++)e[n].call(this,i)&&(s=!0);return o.call(this,t,i)||s},s.prototype.on=function(t,i){this.listeners[t]||(this.listeners[t]=[]);var e=this.listeners[t].indexOf(i);return 0>e&&this.listeners[t].push(i),this},s.prototype.unbind=function(t,i){var e=this.listeners[t].indexOf(i);e>=0&&this.listeners[t].splice(e,1)},s.prototype.pipe=function(t){var i=t instanceof Function?this.downstreamFn:this.downstream,e=i.indexOf(t);return 0>e&&i.push(t),t instanceof Function?t("pipe"):t.emit("pipe"),t},s.prototype.unpipe=function(t){var i=t instanceof Function?this.downstreamFn:this.downstream,e=i.indexOf(t);return e>=0?(i.splice(e,1),t instanceof Function?t("unpipe"):t.emit("unpipe"),t):!1},s.setInputHandler=function(t,i){t.emit=i.emit.bind(i)},s.setOutputHandler=function(t,i,e){e?(t.pipeEvents=i.pipe.bind(i),t.unpipeEvents=i.unpipe.bind(i)):(t.pipe=i.pipe.bind(i),t.unpipe=i.pipe.bind(i)),t.on=i.on.bind(i),t.unbind=i.unbind.bind(i)},e.exports=s}),
define("famous/ImageSurface",["require","exports","module","./Surface"],function(t,i,e){function s(t,i){o.apply(this,arguments),this.imageUrl=void 0,this.setContent(i)}var o=t("./Surface");s.prototype=Object.create(o.prototype),s.prototype.elementType="img",s.prototype.elementClass="surface",s.prototype.setContent=function(t){this.imageUrl=t,this.contentDirty=!0},s.prototype.deploy=function(t){t.src=this.imageUrl,t.style.display=""},s.prototype.recall=function(t){t.src="",t.style.display="none"},e.exports=s}),
define("famous/Matrix",["require","exports","module"],function(t,i,e){var s={};s.precision=1e-6,s.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s.multiply4x4=function o(t,i){var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return e[0]=t[0]*i[0]+t[1]*i[4]+t[2]*i[8]+t[3]*i[12],e[1]=t[0]*i[1]+t[1]*i[5]+t[2]*i[9]+t[3]*i[13],e[2]=t[0]*i[2]+t[1]*i[6]+t[2]*i[10]+t[3]*i[14],e[3]=t[0]*i[3]+t[1]*i[7]+t[2]*i[11]+t[3]*i[15],e[4]=t[4]*i[0]+t[5]*i[4]+t[6]*i[8]+t[7]*i[12],e[5]=t[4]*i[1]+t[5]*i[5]+t[6]*i[9]+t[7]*i[13],e[6]=t[4]*i[2]+t[5]*i[6]+t[6]*i[10]+t[7]*i[14],e[7]=t[4]*i[3]+t[5]*i[7]+t[6]*i[11]+t[7]*i[15],e[8]=t[8]*i[0]+t[9]*i[4]+t[10]*i[8]+t[11]*i[12],e[9]=t[8]*i[1]+t[9]*i[5]+t[10]*i[9]+t[11]*i[13],e[10]=t[8]*i[2]+t[9]*i[6]+t[10]*i[10]+t[11]*i[14],e[11]=t[8]*i[3]+t[9]*i[7]+t[10]*i[11]+t[11]*i[15],e[12]=t[12]*i[0]+t[13]*i[4]+t[14]*i[8]+t[15]*i[12],e[13]=t[12]*i[1]+t[13]*i[5]+t[14]*i[9]+t[15]*i[13],e[14]=t[12]*i[2]+t[13]*i[6]+t[14]*i[10]+t[15]*i[14],e[15]=t[12]*i[3]+t[13]*i[7]+t[14]*i[11]+t[15]*i[15],arguments.length<=2?e:o.apply(null,[e].concat(Array.prototype.slice.call(arguments,2)))},s.multiply=function n(t,i){if(!t||!i)return t||i;var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];return e[0]=t[0]*i[0]+t[1]*i[4]+t[2]*i[8],e[1]=t[0]*i[1]+t[1]*i[5]+t[2]*i[9],e[2]=t[0]*i[2]+t[1]*i[6]+t[2]*i[10],e[4]=t[4]*i[0]+t[5]*i[4]+t[6]*i[8],e[5]=t[4]*i[1]+t[5]*i[5]+t[6]*i[9],e[6]=t[4]*i[2]+t[5]*i[6]+t[6]*i[10],e[8]=t[8]*i[0]+t[9]*i[4]+t[10]*i[8],e[9]=t[8]*i[1]+t[9]*i[5]+t[10]*i[9],e[10]=t[8]*i[2]+t[9]*i[6]+t[10]*i[10],e[12]=t[12]*i[0]+t[13]*i[4]+t[14]*i[8]+i[12],e[13]=t[12]*i[1]+t[13]*i[5]+t[14]*i[9]+i[13],e[14]=t[12]*i[2]+t[13]*i[6]+t[14]*i[10]+i[14],arguments.length<=2?e:n.apply(null,[e].concat(Array.prototype.slice.call(arguments,2)))},s.move=function(t,i){return i[2]||(i[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+i[0],t[13]+i[1],t[14]+i[2],1]},s.moveThen=function(t,i){t[2]||(t[2]=0);var e=t[0]*i[0]+t[1]*i[4]+t[2]*i[8],o=t[0]*i[1]+t[1]*i[5]+t[2]*i[9],n=t[0]*i[2]+t[1]*i[6]+t[2]*i[10];return s.move(i,[e,o,n])},s.translate=function(t,i,e){return void 0===e&&(e=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,i,e,1]},s.scale=function(t,i,e){return void 0===e&&(e=1),[t,0,0,0,0,i,0,0,0,0,e,0,0,0,0,1]},s.rotateX=function(t){var i=Math.cos(t),e=Math.sin(t);return[1,0,0,0,0,i,e,0,0,-e,i,0,0,0,0,1]},s.rotateY=function(t){var i=Math.cos(t),e=Math.sin(t);return[i,0,-e,0,0,1,0,0,e,0,i,0,0,0,0,1]},s.rotateZ=function(t){var i=Math.cos(t),e=Math.sin(t);return[i,e,0,0,-e,i,0,0,0,0,1,0,0,0,0,1]},s.rotate=function(t,i,e){var s=Math.cos(t),o=Math.sin(t),n=Math.cos(i),r=Math.sin(i),a=Math.cos(e),h=Math.sin(e),u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];return u[0]=n*a,u[1]=s*h+o*r*a,u[2]=o*h-s*r*a,u[4]=-n*h,u[5]=s*a-o*r*h,u[6]=o*a+s*r*h,u[8]=r,u[9]=-o*n,u[10]=s*n,u},s.rotateAxis=function(t,i){var e=Math.sin(i),s=Math.cos(i),o=1-s,n=t[0]*t[0]*o,r=t[0]*t[1]*o,a=t[0]*t[2]*o,h=t[1]*t[1]*o,u=t[1]*t[2]*o,p=t[2]*t[2]*o,c=t[0]*e,f=t[1]*e,l=t[2]*e,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];return d[0]=n+s,d[1]=r+l,d[2]=a-f,d[4]=r-l,d[5]=h+s,d[6]=u+c,d[8]=a+f,d[9]=u-c,d[10]=p+s,d},s.aboutOrigin=function(t,i){var e=t[0]-(t[0]*i[0]+t[1]*i[4]+t[2]*i[8]),o=t[1]-(t[0]*i[1]+t[1]*i[5]+t[2]*i[9]),n=t[2]-(t[0]*i[2]+t[1]*i[6]+t[2]*i[10]);return s.move(i,[e,o,n])},s.formatCSS=function(t){for(var i=t.slice(0),e=0;e<i.length;e++)Math.abs(i[e])<s.precision&&(i[e]=0);return"matrix3d("+i.join()+")"},s.skew=function(t,i,e){return[1,0,0,0,Math.tan(e),1,0,0,Math.tan(i),Math.tan(t),1,0,0,0,0,1]},s.getTranslate=function(t){return[t[12],t[13],t[14]]},s.inverse=function(t){var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],e=t[5]*t[10]-t[6]*t[9],s=t[4]*t[10]-t[6]*t[8],o=t[4]*t[9]-t[5]*t[8],n=t[1]*t[10]-t[2]*t[9],r=t[0]*t[10]-t[2]*t[8],a=t[0]*t[9]-t[1]*t[8],h=t[1]*t[6]-t[2]*t[5],u=t[0]*t[6]-t[2]*t[4],p=t[0]*t[5]-t[1]*t[4],c=t[0]*e-t[1]*s+t[2]*o,f=1/c;return i[0]=f*e,i[1]=-f*n,i[2]=f*h,i[4]=-f*s,i[5]=f*r,i[6]=-f*u,i[8]=f*o,i[9]=-f*a,i[10]=f*p,i[12]=-t[12]*i[0]-t[13]*i[4]-t[14]*i[8],i[13]=-t[12]*i[1]-t[13]*i[5]-t[14]*i[9],i[14]=-t[12]*i[2]-t[13]*i[6]-t[14]*i[10],i},s.interpret=function(t){function i(t){return 2==t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function e(t){return Math.sqrt(i(t))}function o(t){return 0>t?-1:1}var n=[t[0],t[1],t[2]],r=o(n[0]),a=e(n),h=[n[0]+r*a,n[1],n[2]],u=2/i(h),p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];p[0]=1-u*h[0]*h[0],p[5]=1-u*h[1]*h[1],p[10]=1-u*h[2]*h[2],p[1]=-u*h[0]*h[1],p[2]=-u*h[0]*h[2],p[6]=-u*h[1]*h[2],p[4]=p[1],p[8]=p[2],p[9]=p[6];var c=s.multiply(t,p),f=[c[5],c[6]],l=o(f[0]),d=e(f),m=[f[0]+l*d,f[1]],v=2/i(m),g=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];g[5]=1-v*m[0]*m[0],g[10]=1-v*m[1]*m[1],g[6]=-v*m[0]*m[1],g[9]=g[6];var y=s.multiply(p,g),x=s.multiply(t,y),S=s.scale(x[0]<0?-1:1,x[5]<0?-1:1,x[10]<0?-1:1);x=s.multiply(S,x),y=s.multiply(y,S);var w={};return w.translate=s.getTranslate(t),w.rotate=[Math.atan2(-y[6],y[10]),Math.asin(y[2]),Math.atan2(-y[1],y[0])],w.rotate[0]||(w.rotate[0]=0,w.rotate[2]=Math.atan2(y[4],y[5])),w.scale=[x[0],x[5],x[10]],w.skew=[Math.atan(x[9]/w.scale[2]),Math.atan(x[8]/w.scale[2]),Math.atan(x[4]/w.scale[0])],Math.abs(w.rotate[0])+Math.abs(w.rotate[2])>1.5*Math.PI&&(w.rotate[1]=Math.PI-w.rotate[1],w.rotate[1]>Math.PI&&(w.rotate[1]-=2*Math.PI),w.rotate[1]<-Math.PI&&(w.rotate[1]+=2*Math.PI),w.rotate[0]<0?w.rotate[0]+=Math.PI:w.rotate[0]-=Math.PI,w.rotate[2]<0?w.rotate[2]+=Math.PI:w.rotate[2]-=Math.PI),w},s.build=function(t){var i=s.scale(t.scale[0],t.scale[1],t.scale[2]),e=s.skew(t.skew[0],t.skew[1],t.skew[2]),o=s.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return s.move(s.multiply(i,e,o),t.translate)},s.equals=function(t,i){if(t===i)return!0;if(!t||!i)return!1;for(var e=0;e<t.length;e++)if(t[e]!=i[e])return!1;return!0},s.normalizeRotation=function(t){var i=t.slice(0);for((i[0]==Math.PI/2||i[0]==-Math.PI/2)&&(i[0]=-i[0],i[1]=Math.PI-i[1],i[2]-=Math.PI),i[0]>Math.PI/2&&(i[0]=i[0]-Math.PI,i[1]=Math.PI-i[1],i[2]-=Math.PI),i[0]<-Math.PI/2&&(i[0]=i[0]+Math.PI,i[1]=-Math.PI-i[1],i[2]-=Math.PI);i[1]<-Math.PI;)i[1]+=2*Math.PI;for(;i[1]>=Math.PI;)i[1]-=2*Math.PI;for(;i[2]<-Math.PI;)i[2]+=2*Math.PI;for(;i[2]>=Math.PI;)i[2]-=2*Math.PI;return i},s.vecMultiply=function(t,i){return[t[0]*i[0]+t[1]*i[4]+t[2]*i[8]+i[12],t[0]*i[1]+t[1]*i[5]+t[2]*i[9]+i[13],t[0]*i[2]+t[1]*i[6]+t[2]*i[10]+i[14]]},s.applyPerspective=function(t,i){var e=i/(i-t[2]);return[e*t[0],e*t[1]]},e.exports=s}),
define("famous/RenderNode",["require","exports","module"],function(t,i,e){function s(t,i){this.obj=t,this.next=void 0,this.leafMode=i}s.prototype.get=function(){return this.obj},s.prototype.from=function(t){var i=new s(t);return this.setNext(i),i},s.prototype.getNext=function(){return this.next},s.prototype.setNext=function(t){this.next=t},s.prototype.execute=function(){return this.render(void 0,!0)},s.prototype.render=function(t,i){var e=this.get();if(i||this.leafMode){var s=this.getNext();t=s?s.execute():void 0}if(e){if(e.render)return e.render(t);if(e instanceof Function)return e(t);for(var o=[],n=0;n<e.length;n++)o[n]=e[n].render();return o}return t},e.exports=s}),
define("famous/Scene",["require","exports","module","./Combiner","./RenderNode","./Transform","./SceneCompiler"],function(t,i,e){function s(t){this.id={},this.transforms=[],t instanceof Function||(t=a.compile(t)),this.object=t(o,r,n,this.id,this.transforms),this.def=t}var o=t("./Combiner"),n=t("./RenderNode"),r=t("./Transform"),a=t("./SceneCompiler");s.prototype.clone=function(){return new s(this.def)},s.prototype.getTransforms=function(){return this.transforms},s.prototype.render=function(){return this.object.render()},e.exports=s}),
define("famous/SceneCompiler",["require","exports","module","./Matrix"],function(t,i,e){function s(t){var i={varCounter:0},e=[],s=h.call(i,t,e);return e.push("return "+s+";"),new Function(["Combiner","FT","RenderNode","id","transforms"],e.join("\n"))}function o(t,i){return"var "+t+" = "+i+";"}function n(t,i){return"id."+t+" = "+i+";"}function r(t){return"transforms.push("+t+");"}function a(){return"_"+this.varCounter++}function h(t,i){var e;if(t instanceof Array)e=u.call(this,t,i);else if(e=a.call(this),t.target){var s=h.call(this,t.target,i),c=p.call(this,t,i);i.push(o(e,"new RenderNode("+c+", true)")),i.push(e+".from("+s+");"),t.id&&i.push(n(t.id,c)),i.push(r(c))}else t.id&&(i.push(o(e,"new RenderNode(undefined, true)")),i.push(n(t.id,e)));return e}function u(t,i){var e=a.call(this);i.push(o(e,"new Combiner()"));for(var s=0;s<t.length;s++){var n=h.call(this,t[s],i);n&&i.push(e+".includeFrom("+n+");")}return e}function p(t,i){var e=t.transform,s=t.opacity,n=t.origin,r=t.size;t.target;var h=f.identity;if(e instanceof Array)for(var u=0;u<e.length;u++)h=f.multiply(h,c(e[u]));else e instanceof Object&&(h=c(e));var p=a.call(this),l="["+h.join(",")+"]",d=n?"["+n.join(",")+"]":void 0,m=r?"["+r.join(",")+"]":void 0;return i.push(o(p,"new FT("+l+","+s+","+d+","+m+")")),p}function c(t){for(var i in l)if(i in t){var e=t[i];return e instanceof Array||(e=[e]),l[i].apply(this,e)}}var f=t("./Matrix"),l={translate:f.translate,rotate:f.rotate,rotateX:f.rotateX,rotateY:f.rotateY,rotateZ:f.rotateZ,rotateAxis:f.rotateAxis,scale:f.scale,skew:f.skew,matrix3d:function(){return arguments}};e.exports={compile:s}}),
define("famous/SpecParser",["require","exports","module","./Matrix"],function(t,i,e){function s(){this.reset()}function o(t,i){return[t[0]*i[0]+t[1]*i[4]+t[2]*i[8],t[0]*i[1]+t[1]*i[5]+t[2]*i[9],t[0]*i[2]+t[1]*i[6]+t[2]*i[10]]}var n=t("./Matrix");s.parse=function(t,i){var e=new s,o=e.parse(t);return i?(i(o),void 0):o},s.prototype.parse=function(t){return this.reset(),this._parseSpec(t,void 0,n.identity,1,[0,0],void 0,n.identity),{transforms:this.transforms,groups:this.groups,groupTransforms:this.groupTransforms,opacities:this.opacities,groupOpacities:this.groupOpacities,origins:this.origins,groupOrigins:this.groupOrigins}},s.prototype.reset=function(){this.opacities={},this.transforms={},this.origins={},this.groups={},this.groupTransforms={},this.groupOpacities={},this.groupOrigins={},this.groupCounter=0},s.prototype._parseSpec=function(t,i,e,s,r,a,h){if("number"==typeof t){var u=t,p=a?[r[0]*a[0],r[1]*a[1],0]:[0,0,0];e||(e=n.identity),this.transforms[u]=n.move(e,o(p,h)),this.opacities[u]=s,r&&(this.origins[u]=r),i&&(this.groups[u]=i)}else if(t){if(t instanceof Array)for(var c=0;c<t.length;c++)this._parseSpec(t[c],i,e,s,r,a,h);else if(void 0!==t.target){var f=t.target,l=e,d=s,m=t.group,v=r,g=a;if(void 0!==t.opacity&&(d=s*t.opacity),d?t.transform&&(l=n.multiply(t.transform,e)):l=void 0,t.origin&&(v=t.origin),t.size&&(g=t.size,a||(a=g),v||(v=[0,0]),l||(l=n.identity),l=n.move(l,o([v[0]*a[0],v[1]*a[1],0],h)),l=n.moveThen([-v[0]*g[0],-v[1]*g[1],0],l),h=e?e:n.identity,v=[0,0]),m){this.groupCounter++;var y=this.groupCounter,x=i?n.multiply(l,this.groupTransforms[i]):l;x&&(x=n.aboutOrigin([v[0]*a[0],v[1]*a[1],0],x)),this.groupTransforms[y]=x,this.groupOpacities[y]=i?this.groupOpacities[i]*d:d,v&&(this.groupOrigins[y]=v),this._parseSpec(f,y,n.identity,d?1:0,v,g,h)}else this._parseSpec(f,i,l,d,v,g,h)}}else;},e.exports=s}),
define("famous/Surface",["require","exports","module","./EventHandler","./Matrix"],function(t,i,e){function s(t,i,e){this.id=s.currId++,this.properties={},this.content="",this.classList=[],this.classesDirty=!0,this.stylesDirty=!0,this.sizeDirty=!0,this.contentDirty=!0,this._dirtyClasses=[],this._matrix=void 0,this._opacity=1,this._origin=void 0,this.eventForwarder=function(t){this.emit(t.type,t)}.bind(this),this.eventHandler=new f,this.size=void 0,t&&this.setSize(t),void 0!==i&&this.setContent(i),void 0!==e&&this.setClasses(e),s.instances[this.id]=this,this._currTarget=void 0,this._currTargetSize=void 0}function o(t){for(var i=s.surfaceEvents,e=0;e<i.length;e++)t.addEventListener(i[e],this.eventForwarder)}function r(t){for(var i=s.surfaceEvents,e=0;e<i.length;e++)t.removeEventListener(i[e],this.eventForwarder)}function a(t){for(var i=0;i<this._dirtyClasses.length;i++)t.classList.remove(this._dirtyClasses[i]);this._dirtyClasses=[]}function h(t){for(var i in this.properties)t.style[i]=this.properties[i]}function u(t){for(var i in this.properties)t.style[i]=""}function p(t,i){return t||i?t&&i?t[0]==i[0]&&t[1]==i[1]:!1:!0}function c(t){return(100*t[0]).toFixed(6)+"% "+(100*t[1]).toFixed(6)+"%"}var f=t("./EventHandler"),l=t("./Matrix"),d=void 0!==document.body.style.webkitTransform;s.currId=0,s.instances=[],s.get=function(t){return s.instances[t]},s.surfaceEvents=["touchstart","touchmove","touchend","touchcancel","click","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"],s.prototype.elementType="div",s.prototype.elementClass="surface",s.prototype.on=function(t,i){this.eventHandler.on(t,i)},s.prototype.unbind=function(t,i){this.eventHandler.unbind(t,i)},s.prototype.emit=function(t,i){i&&!i.origin&&(i.origin=this);var e=this.eventHandler.emit(t,i);return e&&i.stopPropagation&&i.stopPropagation(),e},s.prototype.pipeEvents=function(t){return this.eventHandler.pipe(t)},s.prototype.unpipeEvents=function(t){return this.eventHandler.unpipe(t)},s.prototype.render=function(){return this.id},s.prototype.setProperties=function(t){for(n in t)this.properties[n]=t[n];this.stylesDirty=!0},s.prototype.getProperties=function(){return this.properties},s.prototype.addClass=function(t){this.classList.indexOf(t)<0&&(this.classList.push(t),this.classesDirty=!0)},s.prototype.removeClass=function(t){var i=this.classList.indexOf(t);i>=0&&(this._dirtyClasses.push(this.classList.splice(i,1)[0]),this.classesDirty=!0)},s.prototype.setClasses=function(t){for(var i=[],e=0;e<this.classList.length;e++)t.indexOf(this.classList[e])<0&&i.push(this.classList[e]);for(var e=0;e<i.length;e++)this.removeClass(i[e]);for(var e=0;e<t.length;e++)this.addClass(t[e])},s.prototype.getClassList=function(){return this.classList},s.prototype.setContent=function(t){this.content!=t&&(this.content=t,this.contentDirty=!0)},s.prototype.getContent=function(){return this.content};var m,v,g;m=d?function(t,i){t.style.webkitTransform=l.formatCSS(i)}:function(t,i){t.style.transform=l.formatCSS(i)},v=d?function(t,i){t.style.webkitTransformOrigin=c(i)}:function(t,i){t.style.transformOrigin=c(i)},g=d?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)",t.style.opacity=0},s.prototype.setup=function(t){var i=t.allocate(this.elementType);this.elementClass&&i.classList.add(this.elementClass),o.call(this,i),v(i,[0,0]),this._currTarget=i,this.stylesDirty=!0,this.classesDirty=!0,this.sizeDirty=!0,this.contentDirty=!0,this._matrix=void 0,this._opacity=void 0,this._origin=void 0},s.prototype.commit=function(t,i,e){var s=this._currTarget;if(!t&&this._matrix)return this._matrix=void 0,this._opacity=0,g(s),void 0;if(this._opacity!=i&&(this._opacity=i,s.style.opacity=Math.min(i,.999999),!i))return this._matrix=void 0,g(s),void 0;if(!p(this._origin,e)||!l.equals(this._matrix,t)){t||(t=l.identity),e||(e=[0,0]),this._origin=e.slice(0),this._matrix=t;var o=t;if(e){var n=this.getSize();o=l.moveThen([-n[0]*e[0],-n[1]*e[1]],t)}m(s,o)}if(this.classesDirty||this.stylesDirty||this.sizeDirty||this.contentDirty){if(this.classesDirty){a.call(this,s);for(var r=this.getClassList(),u=0;u<r.length;u++)s.classList.add(r[u]);this.classesDirty=!1}this.stylesDirty&&(h.call(this,s),this.stylesDirty=!1),this.sizeDirty&&(this.size?(s.style.width=void 0!==this.size[0]?this.size[0]+"px":"",s.style.height=void 0!==this.size[1]?this.size[1]+"px":""):this._currTargetSize=void 0,this.sizeDirty=!1),this.contentDirty&&(this.deploy(s),this.contentDirty=!1)}},s.prototype.cleanup=function(t){var i=this._currTarget;this.recall(i),i.style.width="",i.style.height="",u.call(this,i);var e=this.getClassList();a.call(this,i);for(var s=0;s<e.length;s++)i.classList.remove(e[s]);r.call(this,i),this._currTarget=void 0,this._currTargetSize=void 0,t.deallocate(i),g(i)},s.prototype.deploy=function(t){var i=this.getContent();"string"==typeof i?t.innerHTML=i:t.appendChild(i),this._currTargetSize=void 0},s.prototype.recall=function(t){for(var i=document.createDocumentFragment();t.hasChildNodes();)i.appendChild(t.firstChild);this.setContent(i)},s.prototype.getSize=function(){if(this.size&&void 0!=this.size[0]&&void 0!=this.size[1])return this.size;if(this._currTarget){if(this._currTargetSize)return this._currTargetSize.slice(0);var t=this._currTarget.offsetWidth,i=this._currTarget.offsetHeight;return t&&i&&(this._currTargetSize=[t,i]),[t,i]}return[0,0]},s.prototype.setSize=function(t){this.size&&this.size[0]==t[0]&&this.size[1]==t[1]||(this.size=t.slice(0,2),this.sizeDirty=!0)},e.exports=s}),
define("famous/SurfaceManager",["require","exports","module","./Surface","./Matrix","./SpecParser","./ElementAllocator","./Util","./TransitionHelper"],function(t,i,e){function s(t,i){this.container=t,this.nodeContexts={},this.nodeGroups={},this.nodeAllocators={},this.groups={};var e=new l(this.container);this.defaultNodeContext={container:this.container,detachedNodes:[],nodeCount:0,allocator:e},this.opts=i,this.opts||(this.opts={}),this.opts.surfaceClass||(this.opts.surfaceClass="surface"),this.opts.groupClass||(this.opts.groupClass="group"),this.opts.maxGroupSize||(this.opts.maxGroupSize=30),this._perspective=0,this.perspectiveState=new m(0)}function o(t,i){return t||i?t&&i?t[0]==i[0]&&t[1]==i[1]:!1:!0}function n(t){return(100*t[0]).toFixed(6)+"% "+(100*t[1]).toFixed(6)+"%"}function r(t){var i={},e=[];for(var s in t){var o=this.nodeGroups[s];o&&(i.hasOwnProperty(o)&&i[o]!=t[s]?e.push(o):i[o]=t[s])}for(var s=0;s<e.length;s++)i.hasOwnProperty(e[s])&&delete i[e[s]];return i}function a(t){for(var i in this.nodeGroups)this.nodeGroups[i]=t[this.nodeGroups[i]];var e={};for(var i in this.groups)if(t.hasOwnProperty(i)){e.hasOwnProperty(t[i])||(e[t[i]]=[]);for(var s=0;s<this.groups[i].length;s++)this.groups[i][s].gid=t[i],e[t[i]].push(this.groups[i][s])}else{for(var s=0;s<this.groups[i].length;s++)delete this.groups[i][s].gid;this.destroyGroup(i)}this.groups=e}var h=t("./Surface"),u=t("./Matrix");t("./SpecParser");var p,c,f,l=t("./ElementAllocator"),d=t("./Util"),m=t("./TransitionHelper"),v=void 0!==document.body.style.webkitTransform;p=v?function(t,i){t.style.webkitTransform=u.formatCSS(i)}:function(t,i){t.style.transform=u.formatCSS(i)},c=v?function(t,i){t.style.webkitTransformOrigin=n(i)}:function(t,i){t.style.transformOrigin=n(i)},f=v?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)"}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)"},s.prototype.update=function(t){var i=t.transforms,e=t.groups,s=t.opacities,o=t.origins,n=t.groupTransforms,h=t.groupOpacities,u=t.groupOrigins,p=r.call(this,e);a.call(this,p);for(var c in this.nodeAllocators)i.hasOwnProperty(c)||this.detach(c);for(var c in i)this.updateNode(c,i[c],e[c],s[c],o[c]);for(var c in n)this.updateGroup(c,n[c],h[c],u[c]);var f=this.perspectiveState.get();this._perspective!=f&&(this._perspective=f,v?this.container.style.webkitPerspective=f:this.container.style.perspective=f?f+"px":"")},s.prototype.updateGroup=function(t,i,e,s){var n=this.groups[t];if(n)for(var r=0;r<n.length;r++)n[r].opacity!=e&&(n[r].opacity=e,n[r].container.style.opacity=e>.999999?.999999:e),u.equals(n[r].matrix,i)||(n[r].matrix=i,i?(p(n[r].container,i),o(n[r].origin,s)||(n[r].origin=[s[0],s[1]],c(n[r].container,s||this.opts.origin))):f(n[r].container))},s.prototype.destroyGroup=function(t){if(this.groups.hasOwnProperty(t)){for(var i=this.groups[t],e=0;e<i.length;e++)i[e].container.parentNode.removeChild(i[e].container);delete this.groups[t]}},s.prototype.obtainGroupContext=function(t){function i(t){return t.allocator.getNodeCount()<o}this.groups.hasOwnProperty(t)||(this.groups[t]=[]);for(var e=this.groups[t],s=0,o=this.opts.maxGroupSize;s<e.length&&!i(e[s]);)s++;if(s>=e.length){var n=document.createElement("div");n.classList.add(this.opts.groupClass),this.container.appendChild(n);var r=new l(n),a={gid:t,container:n,allocator:r};e.push(a)}return e[s]},s.prototype.updateNode=function(t,i,e,s,o){var n=h.get(t);this.nodeGroups[t]!=e&&(this.nodeContexts[t]=void 0);var r=this.nodeContexts[t];if(r||(r=e?this.obtainGroupContext(e):this.defaultNodeContext,this.nodeContexts[t]=r),this.nodeGroups[t]=e,!this.nodeAllocators[t]){var a=r.allocator;this.nodeAllocators[t]=a,n.setup(a)}"string"==typeof o&&(o=d.origins[o]),s||(i=void 0),n.commit(i,s,o)},s.prototype.detach=function(t){var i=this.nodeAllocators[t];i&&(h.get(t).cleanup(i),delete this.nodeAllocators[t])},s.prototype.getPerspective=function(){return this.perspectiveState.get()},s.prototype.setPerspective=function(t,i,e){this.perspectiveState.set(t,i,e)},e.exports=s}),
define("famous/Transform",["require","exports","module","./Matrix","./TransitionHelper","./Util"],function(t,i,e){function s(t,i,e,s){t||(t=r.identity),"number"!=typeof i&&(i=1),this.transformState=new a([0,0,0,0,0,0,0,0,0,1,1,1]),this.opacityState=new a(i),this.originState=new a([0,0]),this.sizeState=new a([0,0]),this._originEnabled=!1,this._sizeEnabled=!1,this.setTransform(t),this.setOpacity(i),this.setOrigin(e),this.setSize(s)}function o(t){return[].concat(t.translate,t.rotate,t.skew,t.scale)}function n(t){return{translate:[t[0],t[1],t[2]],rotate:[t[3],t[4],t[5]],skew:[t[6],t[7],t[8]],scale:[t[9],t[10],t[11]]}}var r=t("./Matrix"),a=t("./TransitionHelper"),h=t("./Util");s.prototype.getTransform=function(){return this.transformState.isActive()?r.build(n(this.transformState.get())):this.getFinalTransform()},s.prototype.getFinalTransform=function(){return this.finalTransform},s.prototype.setTransform=function(t,i,e){i?(this._transformDirty&&(this.transformState.set(o(r.interpret(this.getFinalTransform()))),this._transformDirty=!1),this.transformState.set(o(r.interpret(t)),i,e)):(this.transformState.halt(),this._transformDirty=!0),this.finalTransform=t},s.prototype.getOpacity=function(){return this.opacityState.get()},s.prototype.setOpacity=function(t,i,e){this.opacityState.set(t,i,e)},s.prototype.getOrigin=function(){return this._originEnabled?this.originState.get():void 0},s.prototype.setOrigin=function(t,i,e){this._originEnabled=!!t,t||(t=[0,0]),t instanceof Array||(t=h.origins[t]),this.originState.set(t,i,e)},s.prototype.getSize=function(){return this._sizeEnabled?this.sizeState.get():void 0},s.prototype.setSize=function(t,i,e){this._sizeEnabled=!!t,t||(t=[0,0]),this.sizeState.set(t,i,e)},s.prototype.setDefaultTransition=function(t){this.transformState.setDefault(t),this.opacityState.setDefault(t),this.originState.setDefault(t),this.sizeState.setDefault(t)},s.prototype.halt=function(){this.transformState.halt(),this.opacityState.halt(),this.originState.halt()},s.prototype.isMoving=function(){return this.transformState.isActive()},s.prototype.render=function(t){return{transform:this.getTransform(),opacity:this.getOpacity(),origin:this.getOrigin(),size:this.getSize(),target:t}},e.exports=s}),
define("famous/TransitionHelper",["require","exports","module"],function(t,i,e){function s(t){this.currAction=null,this.actionQueue=[],this.callbackQueue=[],this.lastUpdate=0,this.setDefault({duration:500,curve:function(t){return t}}),this.set(t)}function o(){return this.actionQueue.length<=0?(this.set(this.state),void 0):(this.currAction=this.actionQueue.shift(),this.startTime=(new Date).getTime(),this.startState=r(this.state),void 0)}function n(t,i,e){return(1-e)*t+e*i}function r(t){if("object"==typeof t){if(t.slice)return t.slice(0);var i={};for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}return t}function a(t,i){var e={curve:i.curve};return i.duration&&(e.duration=i.duration),i.speed&&(e.speed=i.speed),"object"==typeof t&&("number"==typeof t.duration&&(e.duration=t.duration),t.curve&&(e.curve=t.curve),t.speed&&(e.speed=t.speed)),"string"==typeof e.curve&&(e.curve=s.getCurve(e.curve)),e}var h={};s.register=function(t,i){return h[t]?!1:(h[t]=i,!0)},s.unregister=function(t){return h[t]?(delete h[t],!0):!1},s.getCurve=function(t){return h[t]},s.prototype.setDefault=function(t){this.defaultTransition={};for(var i in t)this.defaultTransition[i]=t[i]},s.prototype.set=function(t,i,e){if(i){if(i=a(i,this.defaultTransition),i.speed){var s=this.get(),n=0;if("object"==typeof s)for(var h in s)n+=Math.pow(t[h]-s[h],2);else n=Math.pow(t-s,2);i.duration=Math.sqrt(n)/i.speed}var u=[t,i.duration,i.curve];this.actionQueue.push(u),this.callbackQueue.push(e),this.currAction||o.call(this)}else this.startTime=0,this.state=r(t),this.startState=this.state,this.currAction=null,this.actionQueue=[],this.callbackQueue=[],e&&e()},s.prototype.delay=function(t,i){this.set(this.state,{duration:t,curve:function(){return 0}},i)},s.prototype.get=function(t){return this.update(t),this.state},s.prototype.update=function(t){if(this.currAction&&(t||(t=(new Date).getTime()),this.lastUpdate!=t)){this.lastUpdate=t;var i=this.startState,e=this.currAction[0],s=this.currAction[1],r=this.currAction[2],a=s?(t-this.startTime)/s:1,h=Math.min(Math.max(a,0),1);if("object"==typeof this.state)for(var u in this.state)this.state[u]=n(i[u],e[u],r(h));else this.state=n(i,e,r(h));if(a>=1){var p=this.callbackQueue.shift();o.call(this),p&&p()}}},s.prototype.isActive=function(){return!!this.currAction},s.prototype.halt=function(){this.set(this.get())},e.exports=s}),
define("famous/Util",["require","exports","module","./TransitionHelper"],function(t,i,e){function s(t,i){var e=t;return function(){e--,0===e&&i.apply(this,arguments)}}function o(t,i){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&i&&i(this.responseText)},e.open("GET",t),e.send()}var n=t("./TransitionHelper"),r={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}};n.register("linear",r.linear),n.register("easeIn",r.easeIn),n.register("easeOut",r.easeOut),n.register("easeInOut",r.easeInOut),n.register("easeOutBounce",r.easeOutBounce),n.register("spring",r.spring);var a={tl:[0,0],t:[.5,0],tr:[1,0],l:[0,.5],c:[.5,.5],r:[1,.5],bl:[0,1],b:[.5,1],br:[1,1]},h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1],u={render:function(t){return{transform:h,target:t}}},p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-1,1],c={render:function(t){return{transform:p,target:t}}};e.exports={after:s,curves:r,loadURL:o,origins:a,transformInFront:u,transformBehind:c}}),
define("famous/WebGLSurface",["require","exports","module","./Surface"],function(t,i,e){function s(t){this._canvas=document.createElement("canvas"),o.call(this,t),this.setContent(this._canvas)}var o=t("./Surface");s.prototype=Object.create(o.prototype),s.prototype.getContext=function(){return this._canvas.getContext("experimental-webgl")},s.prototype.setSize=function(t){o.prototype.setSize.apply(this,arguments),this._canvas.width=t[0],this._canvas.height=t[1]},e.exports=s});var define,console,transition,unitCurve,renderSpec,updateSpec,surfaceOutputTransform,opacity,origin,matrixSpec,renderableComponent,emitterObject,surfaceManagerConfig,groupContext;return define("famous/externs",function(){}),
define("famous-animation/Animation",["require","exports","module","famous/Surface","famous/Matrix","famous-utils/Utils","./Easing"],function(t,i,e){function s(t){return this.name=t.name||"base",this.dead=!1,this.engine=t.engine||void 0,this.duration=t.duration||500,this.delay=t.delay||0,this.nextAnimations=[],void 0!=t.next&&(t.next instanceof Array?this.nextAnimations.concat(t.next):this.nextAnimations.push(t.next)),this.callback=t.callback||void 0,this.startTime=0,this.endTime=0,this.currentTime=0,this.normalizedTime=0,this.timePassed=0,this.halted=!1,this.playing=!1,this.activated=!1,this.activateCallback=t.activateCallback||void 0,this.deactivateCallback=t.deactivateCallback||void 0,this.loop=t.loop||!1,this.reverse=t.reverse||!1,this.reverseUponLoop=t.reverseUponLoop||!1,this}t("famous/Surface"),t("famous/Matrix");var o=t("famous-utils/Utils");t("./Easing"),s.prototype.setDead=function(t){return this.dead=t,this},s.prototype.isDead=function(){return this.dead},s.prototype.setup=function(){},s.prototype.update=function(){},s.prototype.render=function(){},s.prototype.isPlaying=function(){return this.playing},s.prototype.setDuration=function(t){return this.duration=t,this},s.prototype.setDelay=function(t){return this.delay=t,this},s.prototype.setCallback=function(t){return this.callback=t||void 0,this},s.prototype.setReverse=function(t){return this.reverse=t,this},s.prototype.toggleReverse=function(){return this.reverse=!this.reverse,this},s.prototype.setLoop=function(t){return this.loop=t,this},s.prototype.setReverseUponLoop=function(t){return this.reverseUponLoop=t,this},s.prototype.isHalted=function(){return this.halted},s.prototype.halt=function(){this.halted=!0,this.timePassed=this.engine.getTime()-this.startTime},s.prototype.continueAnimation=function(){this.halted=!1,this.startTime=this.engine.getTime()-this.timePassed,this.timePassed=0},s.prototype.activate=function(){},s.prototype.deactivate=function(){},s.prototype.start=function(){this.engine.addAnimation(this),this.setDead(!1),this.halted=!1,this.playing=!0,this.startTime=this.engine.getTime()+this.delay-this.timePassed,this.endTime=this.startTime+this.duration,this.normalizedTime=0},s.prototype.tick=function(){if(this.playing&&!this.halted){if(this.currentTime=this.engine.getTime()-this.startTime,this.normalizedTime=this.currentTime/this.duration,this.normalizedTime>1)return this.normalizedTime=o.clamp(this.normalizedTime,0,1),this.reverse&&(this.normalizedTime=1-this.normalizedTime),this.update(),this.end(),void 0;this.normalizedTime>1e-6&&(this.activated||(this.activate(),void 0!=this.activateCallback&&this.activateCallback(),this.activated=!0),this.reverse&&(this.normalizedTime=1-this.normalizedTime),this.update())}},s.prototype.getTime=function(){return this.normalizedTime},s.prototype.end=function(){if(this.activated=!1,this.playing=!1,this.deactivate(),void 0!=this.deactivateCallback&&this.deactivateCallback(),this.engine.removeAnimation(this),this.reverseUponLoop&&this.toggleReverse(),this.loop)this.start();else for(var t=0;t<this.nextAnimations.length;t++)this.nextAnimations[t].start();void 0!=this.callback&&this.callback()},s.prototype.setNext=function(t){t instanceof Array?this.nextAnimations=this.nextAnimations.concat(this.nextAnimations,t):this.nextAnimations.push(t)},s.prototype.setName=function(t){this.name=t},s.prototype.getName=function(){return this.name},s.prototype.setActivateCallback=function(t){this.activateCallback=t},s.prototype.setDeactivateCallback=function(t){this.deactivateCallback=t},e.exports=s}),
define("famous-animation/AnimationEngine",["require","exports","module","famous/Engine","./Timer","./Animation"],function(t,i,e){function s(){this.animations=[],this.timer=new n,o.on("prerender",this.update.bind(this))}var o=t("famous/Engine"),n=t("./Timer");t("./Animation"),s.prototype.update=function(){for(var t=0;t<this.animations.length;t++)this.animations[t].tick()},s.prototype.render=function(){for(var t=[],i=0;i<this.animations.length;i++)this.animations[i].normalizedTime>0&&t.push(this.animations[i].render()),this.animations[i].isDead()&&this.animations.splice(this.animations.indexOf(this.animations[i]),1);return t},s.prototype.emit=function(t){"prerender"==t&&(this.update(),this.render())},s.prototype.addAnimation=function(t){-1==this.animations.indexOf(t)&&this.animations.push(t)},s.prototype.removeAnimation=function(t){t.setDead(!0)},s.prototype.getTime=function(){return this.timer.getTime()},e.exports=s}),
define("famous-animation/Easing",["require","exports","module"],function(t,i,e){var s={linear:function(t,i,e,s){return t*(e/s)+i},linearNorm:function(t){return t},inQuad:function(t,i,e,s){return e*(t/=s)*t+i},inQuadNorm:function(t){return t*t},outQuad:function(t,i,e,s){return-e*(t/=s)*(t-2)+i},outQuadNorm:function(t){return-(t-=1)*t+1},inOutQuad:function(t,i,e,s){return(t/=s/2)<1?e/2*t*t+i:-e/2*(--t*(t-2)-1)+i},inOutQuadNorm:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t,i,e,s){return e*(t/=s)*t*t+i},inCubicNorm:function(t){return t*t*t},outCubic:function(t,i,e,s){return e*((t=t/s-1)*t*t+1)+i},outCubicNorm:function(t){return--t*t*t+1},inOutCubic:function(t,i,e,s){return(t/=s/2)<1?e/2*t*t*t+i:e/2*((t-=2)*t*t+2)+i},inOutCubicNorm:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t,i,e,s){return e*(t/=s)*t*t*t+i},inQuartNorm:function(t){return t*t*t*t},outQuart:function(t,i,e,s){return-e*((t=t/s-1)*t*t*t-1)+i},outQuartNorm:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t,i,e,s){return(t/=s/2)<1?e/2*t*t*t*t+i:-e/2*((t-=2)*t*t*t-2)+i},inOutQuartNorm:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t,i,e,s){return e*(t/=s)*t*t*t*t+i},inQuintNorm:function(t){return t*t*t*t*t},outQuint:function(t,i,e,s){return e*((t=t/s-1)*t*t*t*t+1)+i},outQuintNorm:function(t){return--t*t*t*t*t+1},inOutQuint:function(t,i,e,s){return(t/=s/2)<1?e/2*t*t*t*t*t+i:e/2*((t-=2)*t*t*t*t+2)+i},inOutQuintNorm:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t,i,e,s){return-e*Math.cos(t/s*(Math.PI/2))+e+i},inSineNorm:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t,i,e,s){return e*Math.sin(t/s*(Math.PI/2))+i},outSineNorm:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t,i,e,s){return-e/2*(Math.cos(Math.PI*t/s)-1)+i},inOutSineNorm:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t,i,e,s){return 0==t?i:e*Math.pow(2,10*(t/s-1))+i},inExpoNorm:function(t){return 0==t?0:Math.pow(2,10*(t-1))},outExpo:function(t,i,e,s){return t==s?i+e:e*(-Math.pow(2,-10*t/s)+1)+i},outExpoNorm:function(t){return 1==t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t,i,e,s){return 0==t?i:t==s?i+e:(t/=s/2)<1?e/2*Math.pow(2,10*(t-1))+i:e/2*(-Math.pow(2,-10*--t)+2)+i},inOutExpoNorm:function(t){return 0==t?0:1==t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t,i,e,s){return-e*(Math.sqrt(1-(t/=s)*t)-1)+i},inCircNorm:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t,i,e,s){return e*Math.sqrt(1-(t=t/s-1)*t)+i},outCircNorm:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t,i,e,s){return(t/=s/2)<1?-e/2*(Math.sqrt(1-t*t)-1)+i:e/2*(Math.sqrt(1-(t-=2)*t)+1)+i},inOutCircNorm:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t,i,e,s){var o=1.70158,n=0,r=e;if(0==t)return i;if(1==(t/=s))return i+e;if(n||(n=.3*s),r<Math.abs(e)){r=e;var o=n/4}else var o=n/(2*Math.PI)*Math.asin(e/r);return-(r*Math.pow(2,10*(t-=1))*Math.sin((t*s-o)*2*Math.PI/n))+i},inElasticNorm:function(t){var i=1.70158,e=0,s=1;return 0==t?0:1==t?1:(e||(e=.3),i=e/(2*Math.PI)*Math.asin(1/s),-(s*Math.pow(2,10*(t-=1))*Math.sin((t-i)*2*Math.PI/e)))},outElastic:function(t,i,e,s){var o=1.70158,n=0,r=e;if(0==t)return i;if(1==(t/=s))return i+e;if(n||(n=.3*s),r<Math.abs(e)){r=e;var o=n/4}else var o=n/(2*Math.PI)*Math.asin(e/r);return r*Math.pow(2,-10*t)*Math.sin((t*s-o)*2*Math.PI/n)+e+i},outElasticNorm:function(t){var i=1.70158,e=0,s=1;return 0==t?0:1==t?1:(e||(e=.3),i=e/(2*Math.PI)*Math.asin(1/s),s*Math.pow(2,-10*t)*Math.sin((t-i)*2*Math.PI/e)+1)},inOutElastic:function(t,i,e,s){var o=1.70158,n=0,r=e;if(0==t)return i;if(2==(t/=s/2))return i+e;if(n||(n=s*.3*1.5),r<Math.abs(e)){r=e;var o=n/4}else var o=n/(2*Math.PI)*Math.asin(e/r);return 1>t?-.5*r*Math.pow(2,10*(t-=1))*Math.sin((t*s-o)*2*Math.PI/n)+i:.5*r*Math.pow(2,-10*(t-=1))*Math.sin((t*s-o)*2*Math.PI/n)+e+i},inOutElasticNorm:function(t){var i=1.70158,e=0,s=1;return 0==t?0:2==(t/=.5)?1:(e||(e=.3*1.5),i=e/(2*Math.PI)*Math.asin(1/s),1>t?-.5*s*Math.pow(2,10*(t-=1))*Math.sin((t-i)*2*Math.PI/e):.5*s*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*2*Math.PI/e)+1)},inBack:function(t,i,e,s,o){return void 0==o&&(o=1.70158),e*(t/=s)*t*((o+1)*t-o)+i},inBackNorm:function(t,i){return void 0==i&&(i=1.70158),t*t*((i+1)*t-i)},outBack:function(t,i,e,s,o){return void 0==o&&(o=1.70158),e*((t=t/s-1)*t*((o+1)*t+o)+1)+i},outBackNorm:function(t,i){return void 0==i&&(i=1.70158),--t*t*((i+1)*t+i)+1},inOutBack:function(t,i,e,s,o){return void 0==o&&(o=1.70158),(t/=s/2)<1?e/2*t*t*(((o*=1.525)+1)*t-o)+i:e/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+i},inOutBackNorm:function(t,i){return void 0==i&&(i=1.70158),(t/=.5)<1?.5*t*t*(((i*=1.525)+1)*t-i):.5*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)},inBounce:function(t,i,e,o){return e-s.outBounce(o-t,0,e,o)+i},inBounceNorm:function(t){return 1-s.outBounceNorm(1-t)},outBounce:function(t,i,e,s){return(t/=s)<1/2.75?e*7.5625*t*t+i:2/2.75>t?e*(7.5625*(t-=1.5/2.75)*t+.75)+i:2.5/2.75>t?e*(7.5625*(t-=2.25/2.75)*t+.9375)+i:e*(7.5625*(t-=2.625/2.75)*t+.984375)+i},outBounceNorm:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t,i,e,o){return o/2>t?.5*s.inBounce(2*t,0,e,o)+i:.5*s.outBounce(2*t-o,0,e,o)+.5*e+i},inOutBounceNorm:function(t){return.5>t?.5*s.inBounceNorm(2*t):.5*s.outBounceNorm(2*t-1)+.5}};e.exports=s}),
define("famous-animation/GenericAnimation",["require","exports","module","famous/Surface","famous/Matrix","famous-math/Vector","famous-math/Quaternion","./Animation","./AnimationEngine","./Easing","famous-utils/Utils","famous-color/Color"],function(t,i,e){function s(t){a.call(this,t),this.surface=t.surface,this.renderSurface=t.renderSurface||!1,this.easing=t.easing||h.inOutCubicNorm,this.animateColor=!1,this.startColor=t.startColor||new p(255,255,255,1),this.endColor=t.endColor||new p(255,255,255,1),this.startColorHSL=new n,this.endColorHSL=new n,this.deltaColorHSL=new n,this.currentColorHSL=new n,this.animateOpacity=!1,this.startOpacity=t.startOpacity||0,this.endOpacity=t.endOpacity||0,this.deltaOpacity=0,this.animatePosition=!1,this.startPosition=t.startPosition||new n(0,0,0).fromArray(o.getTranslate(this.surface.mtx)),this.endPosition=t.endPosition||new n(0,0,0).fromArray(o.getTranslate(this.surface.mtx)),this.currentPosition=new n(0,0,0),this.deltaPosition=new n(0,0,0),this.animateOrientation=!1,this.startOrientation=t.startOrientation||new r,this.endOrientation=t.endOrientation||new r,this.currentOrientation=t.currentOrientation||new r,this.animateRadius=!1,this.startRadius=t.startRadius||0,this.endRadius=t.endRadius||0,this.deltaRadius=0,this.currentRadius=0}t("famous/Surface");var o=t("famous/Matrix"),n=t("famous-math/Vector"),r=t("famous-math/Quaternion"),a=t("./Animation");t("./AnimationEngine");var h=t("./Easing"),u=t("famous-utils/Utils"),p=t("famous-color/Color");s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.activate=function(){var t=this.startColor.getHSL(),i=this.endColor.getHSL();this.startColorHSL.setXYZ(t[0],t[1],t[2]),this.endColorHSL.setXYZ(i[0],i[1],i[2]),this.endColorHSL.sub(this.startColorHSL,this.deltaColorHSL),this.currentColorHSL.set(this.startColorHSL),this.animateColor=this.startColor.r==this.endColor.r&&this.startColor.g==this.endColor.g&&this.startColor.b==this.endColor.b&&this.startColor.a==this.endColor.a?!1:!0,this.deltaOpacity=this.endOpacity-this.startOpacity,this.animateOpacity=Math.abs(this.deltaOpacity)>0?!0:!1,this.endPosition.sub(this.startPosition,this.deltaPosition),this.currentPosition.set(this.startPosition),this.animatePosition=this.deltaPosition.isZero()?!1:!0,this.animateOrientation=this.startOrientation.isEqual(this.endOrientation)?!1:!0,this.deltaRadius=this.endRadius-this.startRadius,this.currentRadius=this.startRadius,this.animateRadius=0==this.deltaRadius?!1:!0},s.prototype.tick=function(){if(this.playing&&!this.halted){if(this.currentTime=this.engine.getTime()-this.startTime,this.normalizedTime=this.currentTime/this.duration,this.normalizedTime>1)return this.normalizedTime=u.clamp(this.normalizedTime,0,1),this._update(),this.update(),this.end(),void 0;this.normalizedTime>1e-6&&(this.activated||(this.activate(),void 0!=this.activateCallback&&this.activateCallback(),this.activated=!0),this.reverse&&(this.normalizedTime=1-this.normalizedTime),this._update(),this.update())}},s.prototype._update=function(){var t=this.easing(this.normalizedTime);this.animateColor&&(this.deltaColorHSL.mult(t,this.currentColorHSL),this.currentColorHSL.add(this.startColorHSL,this.currentColorHSL),this.surface.setProperties(u.backgroundColorHSL(this.currentColorHSL.x,this.currentColorHSL.y,this.currentColorHSL.z,1))),this.animateOpacity&&(this.surface.opacity=this.startOpacity+this.deltaOpacity*t),(this.animatePosition||this.animateOrientation)&&(this.deltaPosition.mult(t,this.currentPosition),this.currentPosition.add(this.startPosition,this.currentPosition),this.startOrientation.slerp(this.endOrientation,t,this.currentOrientation),this.surface.mtx=o.move(this.currentOrientation.getMatrix(),this.currentPosition.toArray())),this.animateRadius&&(this.currentRadius=this.startRadius+this.deltaRadius*t,this.surface.setProperties(u.borderRadius(this.currentRadius)))},s.prototype.render=function(){return this.renderSurface&&!this.dead&&this.normalizedTime>0?{transform:this.surface.mtx,opacity:this.surface.opacity,target:this.surface.render()}:void 0},s.prototype.setStartColor=function(t){this.startColor=t},s.prototype.setEndColor=function(t){this.endColor=t},s.prototype.getStartColor=function(){return this.startColor},s.prototype.getEndColor=function(){return this.endColor},s.prototype.setStartPosition=function(t){this.startPosition=t},s.prototype.setStartPositionX=function(t){this.startPosition.x=t},s.prototype.setStartPositionY=function(t){this.startPosition.y=t},s.prototype.setStartPositionZ=function(t){this.startPosition.z=t},s.prototype.setEndPosition=function(t){this.endPosition=t},s.prototype.setEndPositionX=function(t){this.endPosition.setX(t)},s.prototype.setEndPositionY=function(t){this.endPosition.setY(t)},s.prototype.setEndPositionZ=function(t){this.endPosition.setZ(t)},s.prototype.getEndPosition=function(){return this.endPosition},s.prototype.getStartPosition=function(){return this.startPosition},s.prototype.getCurrentPosition=function(){return this.currentPosition},s.prototype.setStartOpacity=function(t){this.startOpacity=t},s.prototype.setEndOpacity=function(t){this.endOpacity=t},s.prototype.getStartOpacity=function(){return this.startOpacity},s.prototype.getEndOpacity=function(){return this.endOpacity},s.prototype.setStartRadius=function(t){this.startRadius=t},s.prototype.setEndRadius=function(t){this.endRadius=t},s.prototype.getCurrentRadius=function(){return this.currentRadius},s.prototype.getStartRadius=function(){return this.startRadius},s.prototype.getEndRadius=function(){return this.endRadius},s.prototype.setStartOrientation=function(t){this.startOrientation=t},s.prototype.setEndOrientation=function(t){this.endOrientation=t},s.prototype.getEndOrientation=function(){return this.endOrientation},s.prototype.getStartOrientation=function(){return this.startOrientation},s.prototype.setEasing=function(t){this.easing=t},s.prototype.setSurface=function(t){this.surface=t},s.prototype.setEndValuesToStartValues=function(){this.startColor=this.endColor.clone(),this.startOpacity=this.endOpacity,this.startPosition.set(this.endPosition),this.startOrientation.set(this.endOrientation),this.startRadius=this.endRadius},e.exports=s}),
define("famous-animation/Timer",["require","exports","module"],function(t,i,e){function s(){window.performance?window.performance.now?this.getTime=function(){return window.performance.now()}:window.performance.webkitNow&&(this.getTime=function(){return window.performance.webkitNow()}):this.getTime=function(){return Date.now()}}e.exports=s}),
define("famous-color/Color",["require","exports","module","famous-utils/Utils"],function(t,i,e){function s(t,i,e,s){this.r="undefined"==typeof t?255:t,this.g="undefined"==typeof i?255:i,this.b="undefined"==typeof e?255:e,this.a="undefined"==typeof s?1:s,this.hex=this.getHex()}var o=t("famous-utils/Utils");s.prototype.getHue=function(){var t=this.r/255,i=this.g/255,e=this.b/255,s=Math.max(t,i,e),o=Math.min(t,i,e),n=0,r=s-o;switch(s){case t:n=(i-e)/r+(e>i?6:0);break;case i:n=(e-t)/r+2;break;case e:n=(t-i)/r+4}return n*=60,isNaN(n)&&(n=0),n},s.prototype.getSaturation=function(){var t,i=this.r/255,e=this.g/255,s=this.b/255,o=Math.max(i,e,s),n=Math.min(i,e,s),r=(o+n)/2;if(o==n)h=t=0;else{var a=o-n;switch(t=r>.5?a/(2-o-n):a/(o+n),o){case i:h=(e-s)/a+(s>e?6:0);break;case e:h=(s-i)/a+2;break;case s:h=(i-e)/a+4}h*=60}return 100*t},s.prototype.getBrightness=function(){var t=this.r/255,i=this.g/255,e=this.b/255;return 100*Math.max(t,i,e)},s.prototype.getLightness=function(){var t=this.r/255,i=this.g/255,e=this.b/255;return 100*((Math.max(t,i,e)+Math.min(t,i,e))/2)},s.prototype.getHex=function(){function t(t){var i=t.toString(16);return 1===i.length?"0"+i:i}return"#"+t(this.r)+t(this.g)+t(this.b)},s.prototype.getHSL=function(){var t,i,e=this.r/255,s=this.g/255,o=this.b/255,n=Math.max(e,s,o),r=Math.min(e,s,o),a=(n+r)/2;if(n==r)t=i=0;else{var h=n-r;switch(i=a>.5?h/(2-n-r):h/(n+r),n){case e:t=(s-o)/h+(o>s?6:0);break;case s:t=(o-e)/h+2;break;case o:t=(e-s)/h+4}t*=60}return[t,100*i,100*a]},s.prototype.setFromHSL=function(t,i,e){function s(t,i,e){return 0>e&&(e+=1),e>1&&(e-=1),1/6>e?t+6*(i-t)*e:.5>e?i:2/3>e?t+6*(i-t)*(2/3-e):t}t/=360,i/=100,e/=100;var o,n,r;if(0==i)o=n=r=e;else{var a=.5>e?e*(1+i):e+i-e*i,h=2*e-a;o=s(h,a,t+1/3),n=s(h,a,t),r=s(h,a,t-1/3)}return this.r=Math.round(255*o),this.g=Math.round(255*n),this.b=Math.round(255*r),this.hex=this.getHex(),this},s.prototype.setFromHex=function(t){return t="#"===t.charAt(0)?t.substring(1,t.length):t,3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),this.hex="#"+t,this.r=parseInt(t.substring(0,2),16),this.g=parseInt(t.substring(2,4),16),this.b=parseInt(t.substring(4,6),16),this},s.prototype.setFromRGBA=function(t,i,e,s){return this.r=t,this.g=i,this.b=e,s&&(this.a=s),this.hex=this.getHex(),this},s.prototype.setHue=function(t){var i=this.getHSL();return this.setFromHSL(t,i[1],i[2])},s.prototype.setSaturation=function(t){var i=this.getHSL();return this.setFromHSL(i[0],t,i[2])},s.prototype.setLightness=function(t){var i=this.getHSL();return this.setFromHSL(i[0],i[1],t)},s.prototype.getCSSBackgroundColor=function(){return o.backgroundColor(this.r,this.b,this.g,this.a)},s.prototype.getCSSColor=function(){return o.color(this.r,this.g,this.b,this.a)},s.prototype.clone=function(){return new s(this.r,this.g,this.b,this.a)},e.exports=s}),
define("famous-color/ColorPalette",["require","exports","module","./Color"],function(t,i,e){function s(t){this.colors=t}t("./Color"),s.prototype.getColor=function(t){return this.colors[t%this.colors.length]},s.prototype.getLighestColor=function(){},s.prototype.getDarkestColor=function(){},s.prototype.getCount=function(){return this.colors.length},e.exports=s}),
define("famous-color/ColorPalettes",["require","exports","module","./Color","./ColorPalette"],function(t,i,e){function s(){}function o(t){return new r(t[0],t[1],t[2],t[3])}function n(t){for(var i=[],e=0,s=t.length;s>e;e++)i.push(o(t[e]));return new a(i)}var r=t("./Color"),a=t("./ColorPalette"),h=[[[53,92,125,1],[108,91,123,1],[192,108,132,1],[246,114,128,1],[248,177,149,1]],[[27,21,33,1],[181,172,1,1],[212,30,69,1],[232,110,28,1],[236,186,9,1]],[[63,54,42,1],[231,69,13,1],[250,157,4,1],[251,222,3,1],[254,245,150,1]],[[10,103,137,1],[10,153,111,1],[207,6,56,1],[250,102,50,1],[254,205,35,1]],[[157,85,105,1],[192,227,217,1],[202,55,99,1],[227,237,195,1],[235,113,84,1]],[[110,110,110,1],[145,217,255,1],[237,255,135,1],[255,133,167,1],[255,255,255,1]],[[0,0,0,1],[25,26,36,1],[51,44,44,1],[250,101,87,1],[255,255,255,1]],[[27,103,107,1],[81,149,72,1],[136,196,37,1],[190,242,2,1],[234,253,230,1]],[[31,11,12,1],[48,5,17,1],[179,84,79,1],[214,195,150,1],[231,252,207,1]],[[172,248,248,1],[223,235,24,1],[230,95,95,1],[235,54,24,1],[235,207,24,1]],[[196,182,109,1],[213,39,5,1],[240,211,119,1],[243,232,228,1],[247,109,60,1]],[[11,72,107,1],[59,134,134,1],[121,189,154,1],[168,219,168,1],[207,240,158,1]],[[0,188,209,1],[118,211,222,1],[174,232,251,1],[176,248,255,1],[254,249,240,1]],[[85,73,57,1],[112,108,77,1],[241,230,143,1],[255,100,100,1],[255,151,111,1]],[[36,244,161,1],[178,42,58,1],[199,244,36,1],[244,36,182,1],[249,246,49,1]],[[108,144,134,1],[169,204,24,1],[207,73,108,1],[235,234,188,1],[252,84,99,1]],[[78,79,75,1],[130,35,57,1],[247,62,62,1],[255,119,61,1],[255,213,115,1]],[[121,28,49,1],[145,213,152,1],[191,178,64,1],[202,51,68,1],[237,126,80,1]],[[104,73,83,1],[127,191,151,1],[182,219,145,1],[250,107,41,1],[253,158,41,1]],[[0,203,231,1],[0,218,60,1],[223,21,26,1],[244,243,40,1],[253,134,3,1]],[[56,222,231,1],[232,255,0,1],[254,62,71,1],[255,130,0,1]],[[27,32,38,1],[75,89,107,1],[153,228,255,1],[247,79,79,1],[255,59,59,1]],[[0,0,0,1],[0,173,239,1],[236,0,140,1],[255,242,0,1]],[[47,43,173,1],[173,43,173,1],[228,38,146,1],[247,21,104,1],[247,219,21,1]],[[101,150,158,1],[171,20,44,1],[189,219,222,1],[205,212,108,1],[219,217,210,1]],[[97,24,36,1],[193,47,42,1],[247,255,238,1],[254,222,123,1],[255,101,64,1]],[[118,85,66,1],[124,231,163,1],[220,93,110,1],[255,174,60,1],[255,229,156,1]],[[63,184,175,1],[127,199,175,1],[218,216,167,1],[255,61,127,1],[255,158,157,1]],[[217,251,223,1],[219,255,210,1],[231,254,235,1],[234,255,210,1],[243,255,210,1]],[[0,23,42,1],[27,139,163,1],[94,202,214,1],[178,222,249,1],[206,254,255,1]],[[225,245,196,1],[237,229,116,1],[249,212,35,1],[252,145,58,1],[255,78,80,1]],[[7,9,61,1],[11,16,140,1],[12,15,102,1],[14,78,173,1],[16,127,201,1]],[[5,177,240,1],[5,232,240,1],[94,87,230,1],[230,87,149,1],[255,5,113,1]],[[48,0,24,1],[90,61,49,1],[131,123,71,1],[173,184,95,1],[229,237,184,1]],[[111,191,162,1],[191,184,174,1],[242,199,119,1],[242,230,194,1],[255,255,255,1]],[[22,147,165,1],[69,181,196,1],[126,206,202,1],[160,222,214,1],[199,237,232,1]],[[8,26,48,1],[50,64,90,1],[59,100,128,1],[155,153,130,1],[255,134,17,1]],[[74,186,176,1],[152,33,0,1],[255,211,0,1],[255,245,158,1]],[[42,135,50,1],[49,48,66,1],[107,85,48,1],[255,109,36,1],[255,235,107,1]],[[0,0,0,1],[25,134,219,1],[105,172,224,1],[149,199,24,1],[184,212,40,1]],[[64,0,20,1],[127,0,40,1],[191,0,59,1],[229,0,71,1],[255,0,79,1]],[[56,69,59,1],[78,133,136,1],[255,70,84,1],[255,213,106,1],[255,254,211,1]],[[29,44,143,1],[57,179,162,1],[209,146,191,1],[222,75,107,1],[252,180,121,1]],[[14,36,48,1],[232,213,183,1],[232,213,185,1],[245,179,73,1],[252,58,81,1]],[[0,210,255,1],[222,255,0,1],[255,0,168,1],[255,66,0,1]],[[21,99,105,1],[51,53,84,1],[169,186,181,1],[216,69,148,1],[236,196,89,1]],[[105,210,231,1],[167,219,216,1],[224,228,204,1],[243,134,48,1],[250,105,0,1]],[[122,106,83,1],[148,140,117,1],[153,178,183,1],[213,222,217,1],[217,206,178,1]],[[34,104,136,1],[57,142,182,1],[255,162,0,1],[255,214,0,1],[255,245,0,1]],[[2,100,117,1],[194,163,79,1],[251,184,41,1],[254,251,175,1],[255,229,69,1]],[[214,37,77,1],[246,215,107,1],[253,235,169,1],[255,84,117,1],[255,144,54,1]],[[0,0,0,1],[124,180,144,1],[211,25,0,1],[255,102,0,1],[255,242,175,1]],[[35,116,222,1],[38,38,38,1],[87,54,255,1],[231,255,54,1],[255,54,111,1]],[[64,18,44,1],[89,186,169,1],[101,98,115,1],[216,241,113,1],[252,255,217,1]],[[126,148,158,1],[174,194,171,1],[235,206,160,1],[252,119,101,1],[255,51,95,1]],[[75,73,11,1],[117,116,73,1],[226,223,154,1],[235,229,77,1],[255,0,81,1]],[[159,112,69,1],[183,98,5,1],[208,167,124,1],[253,169,43,1],[254,238,171,1]],[[38,37,28,1],[160,232,183,1],[235,10,68,1],[242,100,61,1],[242,167,61,1]],[[0,0,0,1],[67,110,217,1],[120,0,0,1],[216,216,216,1],[240,24,0,1]],[[51,51,51,1],[131,163,0,1],[158,12,57,1],[226,27,90,1],[251,255,227,1]],[[79,156,52,1],[108,186,85,1],[125,210,89,1],[158,228,70,1],[187,255,133,1]],[[0,44,43,1],[7,100,97,1],[10,131,127,1],[255,61,0,1],[255,188,17,1]],[[149,207,183,1],[240,65,85,1],[242,242,111,1],[255,130,58,1],[255,247,189,1]],[[89,168,15,1],[158,213,76,1],[196,237,104,1],[226,255,158,1],[240,242,221,1]],[[54,42,44,1],[189,223,38,1],[237,38,105,1],[238,189,97,1],[252,84,99,1]],[[11,246,147,1],[38,137,233,1],[233,26,157,1],[246,182,11,1],[246,242,11,1]],[[8,0,9,1],[65,242,221,1],[207,242,65,1],[249,44,130,1],[252,241,30,1]],[[198,164,154,1],[198,229,217,1],[214,129,137,1],[233,78,119,1],[244,234,213,1]],[[6,71,128,1],[8,84,199,1],[160,194,222,1],[205,239,255,1],[237,237,244,1]],[[93,66,63,1],[124,87,83,1],[238,128,117,1],[255,177,169,1],[255,233,231,1]],[[59,129,131,1],[237,48,60,1],[245,99,74,1],[250,208,137,1],[255,156,91,1]],[[56,166,155,1],[104,191,101,1],[204,217,106,1],[242,88,53,1],[242,218,94,1]],[[60,197,234,1],[70,70,70,1],[233,234,60,1],[246,246,246,1]],[[97,99,130,1],[102,36,91,1],[105,165,164,1],[168,196,162,1],[229,234,164,1]],[[10,191,188,1],[19,116,125,1],[41,34,31,1],[252,53,76,1],[252,247,197,1]],[[7,0,4,1],[236,67,8,1],[252,129,10,1],[255,172,35,1],[255,251,214,1]],[[0,5,1,1],[8,138,19,1],[237,20,9,1],[240,249,241,1],[247,249,21,1]],[[64,197,132,1],[131,218,232,1],[170,46,154,1],[251,35,137,1],[251,132,137,1]],[[64,47,58,1],[217,119,119,1],[255,198,158,1],[255,219,196,1]],[[243,96,49,1],[249,236,95,1],[255,102,0,1],[255,153,0,1],[255,204,0,1]],[[33,90,109,1],[45,45,41,1],[60,162,162,1],[146,199,163,1],[223,236,230,1]],[[10,42,63,1],[101,147,160,1],[185,204,184,1],[219,21,34,1],[255,239,167,1]],[[0,160,176,1],[106,74,60,1],[204,51,63,1],[235,104,65,1],[237,201,81,1]],[[14,141,148,1],[67,77,83,1],[114,173,117,1],[233,213,88,1],[255,171,7,1]],[[94,159,163,1],[176,85,116,1],[220,209,180,1],[248,126,123,1],[250,184,127,1]],[[31,31,31,1],[122,91,62,1],[205,189,174,1],[250,75,0,1],[250,250,250,1]],[[176,230,41,1],[180,35,16,1],[247,207,10,1],[250,124,7,1],[252,231,13,1]],[[94,65,47,1],[120,192,168,1],[240,120,24,1],[240,168,48,1],[252,235,182,1]],[[31,26,28,1],[98,128,125,1],[134,158,138,1],[201,107,30,1],[209,205,178,1]],[[40,60,0,1],[100,153,125,1],[237,143,69,1],[241,169,48,1],[254,204,109,1]],[[37,2,15,1],[143,143,143,1],[158,30,76,1],[236,236,236,1],[255,17,104,1]],[[207,108,116,1],[244,93,120,1],[255,112,136,1],[255,130,153,1],[255,187,193,1]],[[0,0,0,1],[12,13,5,1],[168,171,132,1],[198,201,157,1],[231,235,176,1]],[[0,170,255,1],[170,0,255,1],[170,255,0,1],[255,0,170,1],[255,170,0,1]],[[78,150,137,1],[126,208,214,1],[135,214,155,1],[195,255,104,1],[244,252,232,1]],[[10,10,10,1],[227,246,255,1],[255,20,87,1],[255,216,125,1]],[[51,51,153,1],[102,153,204,1],[153,204,255,1],[255,0,51,1],[255,204,0,1]],[[23,22,92,1],[190,191,158,1],[216,210,153,1],[229,228,218,1],[245,224,56,1]],[[49,99,64,1],[96,158,77,1],[159,252,88,1],[195,252,88,1],[242,252,88,1]],[[92,88,99,1],[168,81,99,1],[180,222,193,1],[207,255,221,1],[255,31,76,1]],[[61,67,7,1],[161,253,17,1],[225,244,56,1],[244,251,196,1],[255,208,79,1]],[[0,205,172,1],[2,170,176,1],[22,147,165,1],[127,255,36,1],[195,255,104,1]],[[0,203,231,1],[0,218,60,1],[223,21,26,1],[244,243,40,1],[253,134,3,1]],[[34,104,136,1],[57,142,182,1],[255,162,0,1],[255,214,0,1],[255,245,0,1]],[[3,13,79,1],[206,236,239,1],[231,237,234,1],[251,12,6,1],[255,197,44,1]],[[253,255,0,1],[255,0,0,1],[255,90,0,1],[255,114,0,1],[255,167,0,1]],[[108,66,18,1],[179,0,176,1],[183,255,55,1],[255,124,69,1],[255,234,155,1]],[[0,4,49,1],[59,69,58,1],[90,224,151,1],[204,46,9,1],[255,253,202,1]],[[59,45,56,1],[188,189,172,1],[207,190,39,1],[240,36,117,1],[242,116,53,1]],[[101,145,155,1],[120,185,168,1],[168,212,148,1],[242,177,73,1],[244,229,97,1]],[[0,193,118,1],[136,193,0,1],[250,190,40,1],[255,0,60,1],[255,138,0,1]],[[110,37,63,1],[165,199,185,1],[199,94,106,1],[241,245,244,1],[251,236,236,1]],[[39,112,140,1],[111,191,162,1],[190,191,149,1],[227,208,116,1],[255,180,115,1]],[[62,72,76,1],[82,91,96,1],[105,158,81,1],[131,178,107,1],[242,232,97,1]],[[248,135,46,1],[252,88,12,1],[252,107,10,1],[253,202,73,1],[255,169,39,1]],[[83,119,122,1],[84,36,55,1],[192,41,66,1],[217,91,67,1],[236,208,120,1]],[[41,136,140,1],[54,19,0,1],[162,121,15,1],[188,53,33,1],[255,208,130,1]],[[10,186,181,1],[58,203,199,1],[106,219,216,1],[153,236,234,1],[201,252,251,1]],[[8,158,42,1],[9,42,100,1],[90,204,191,1],[229,4,4,1],[251,235,175,1]],[[187,187,136,1],[204,198,141,1],[238,170,136,1],[238,194,144,1],[238,221,153,1]],[[121,219,204,1],[134,78,65,1],[234,169,167,1],[242,199,196,1],[248,245,226,1]],[[96,136,213,1],[114,170,222,1],[157,200,233,1],[192,222,245,1],[217,239,244,1]],[[30,30,30,1],[177,255,0,1],[209,210,212,1],[242,240,240,1]],[[255,102,0,1],[255,153,0,1],[255,204,0,1],[255,255,204,1],[255,255,255,1]],[[35,15,43,1],[130,179,174,1],[188,227,197,1],[235,235,188,1],[242,29,65,1]],[[212,238,94,1],[225,237,185,1],[240,242,235,1],[244,250,210,1],[255,66,66,1]],[[20,32,71,1],[168,95,59,1],[247,92,92,1],[255,255,255,1]],[[63,184,240,1],[80,208,240,1],[196,251,93,1],[224,240,240,1],[236,255,224,1]],[[185,222,81,1],[209,227,137,1],[224,72,145,1],[225,183,237,1],[245,225,226,1]],[[185,222,81,1],[209,227,137,1],[224,72,145,1],[225,183,237,1],[245,225,226,1]],[[17,68,34,1],[51,170,170,1],[51,221,51,1],[221,238,68,1],[221,238,187,1]],[[46,13,35,1],[245,72,40,1],[247,128,60,1],[248,228,193,1],[255,237,191,1]],[[204,243,144,1],[224,224,90,1],[247,196,31,1],[252,147,10,1],[255,0,61,1]],[[18,18,18,1],[255,89,56,1],[255,255,255,1]],[[53,38,48,1],[85,72,101,1],[205,91,81,1],[233,223,204,1],[243,163,107,1]],[[236,250,1,1],[236,250,2,1],[247,220,2,1],[248,227,113,1],[250,173,9,1]],[[77,129,121,1],[161,129,121,1],[236,85,101,1],[249,220,159,1],[254,157,93,1]],[[4,0,4,1],[65,61,61,1],[75,0,15,1],[200,255,0,1],[250,2,60,1]],[[66,50,56,1],[179,112,45,1],[200,209,151,1],[235,33,56,1],[245,222,140,1]],[[143,153,36,1],[172,201,95,1],[241,57,109,1],[243,255,235,1],[253,96,129,1]],[[18,18,18,1],[23,122,135,1],[250,245,240,1],[255,180,143,1]],[[67,197,210,1],[182,108,97,1],[241,155,140,1],[254,247,237,1],[255,234,215,1]],[[78,205,196,1],[85,98,112,1],[196,77,88,1],[199,244,100,1],[255,107,107,1]],[[0,0,0,1],[137,161,160,1],[154,227,226,1],[255,71,103,1],[255,118,5,1]],[[248,200,221,1],[253,231,120,1],[255,61,61,1],[255,92,143,1],[255,103,65,1]],[[23,138,132,1],[145,145,145,1],[229,255,125,1],[235,143,172,1],[255,255,255,1]],[[73,112,138,1],[136,171,194,1],[202,255,66,1],[208,224,235,1],[235,247,248,1]],[[51,222,245,1],[122,245,51,1],[245,51,145,1],[245,161,52,1],[248,248,101,1]],[[57,13,45,1],[172,222,178,1],[225,234,181,1],[237,173,158,1],[254,75,116,1]],[[192,107,129,1],[233,22,67,1],[245,175,145,1],[247,201,182,1],[249,210,182,1]],[[131,196,192,1],[156,100,53,1],[190,215,62,1],[237,66,98,1],[240,233,226,1]],[[136,145,136,1],[191,218,223,1],[207,246,247,1],[233,26,82,1],[237,242,210,1]],[[64,44,56,1],[209,212,169,1],[227,164,129,1],[245,215,165,1],[255,111,121,1]],[[93,65,87,1],[131,134,137,1],[168,202,186,1],[202,215,178,1],[235,227,170,1]],[[0,168,198,1],[64,192,203,1],[143,190,0,1],[174,226,57,1],[249,242,231,1]],[[0,204,190,1],[9,166,163,1],[157,191,175,1],[237,235,201,1],[252,249,216,1]],[[0,205,172,1],[2,170,176,1],[22,147,165,1],[127,255,36,1],[195,255,104,1]],[[51,39,23,1],[107,172,191,1],[157,188,188,1],[240,240,175,1],[255,55,15,1]],[[51,51,53,1],[101,99,106,1],[139,135,149,1],[193,190,200,1],[233,232,238,1]],[[17,118,109,1],[65,9,54,1],[164,11,84,1],[228,111,10,1],[240,179,0,1]],[[73,10,61,1],[138,155,15,1],[189,21,80,1],[233,127,2,1],[248,202,0,1]],[[71,162,145,1],[144,79,135,1],[213,28,122,1],[219,213,139,1],[244,127,143,1]],[[55,191,230,1],[169,232,250,1],[186,255,21,1],[211,255,106,1],[247,239,236,1]],[[69,173,168,1],[84,121,128,1],[89,79,79,1],[157,224,173,1],[229,252,194,1]],[[248,241,224,1],[249,246,241,1],[250,244,227,1],[251,106,79,1],[255,193,150,1]],[[0,98,125,1],[1,64,87,1],[51,50,49,1],[66,153,15,1],[255,255,255,1]],[[52,17,57,1],[53,150,104,1],[60,50,81,1],[168,212,111,1],[255,237,144,1]],[[0,153,137,1],[163,169,72,1],[206,24,54,1],[237,185,46,1],[248,89,49,1]],[[26,31,30,1],[108,189,181,1],[147,204,198,1],[200,214,191,1],[227,223,186,1]],[[165,222,190,1],[183,234,201,1],[251,178,163,1],[252,37,55,1],[255,215,183,1]],[[26,20,14,1],[90,142,161,1],[204,65,65,1],[255,255,255,1]],[[51,51,51,1],[111,111,111,1],[204,204,204,1],[255,100,0,1],[255,255,255,1]],[[51,145,148,1],[167,2,103,1],[241,12,73,1],[246,216,107,1],[251,107,65,1]],[[31,3,51,1],[31,57,77,1],[39,130,92,1],[112,179,112,1],[171,204,120,1]],[[209,242,165,1],[239,250,180,1],[245,105,145,1],[255,159,128,1],[255,196,140,1]],[[60,54,79,1],[109,124,157,1],[124,144,179,1],[149,181,194,1],[185,224,220,1]],[[35,179,218,1],[153,214,241,1],[168,153,241,1],[208,89,218,1],[248,78,150,1]],[[85,66,54,1],[96,185,154,1],[211,206,61,1],[241,239,165,1],[247,120,37,1]],[[20,20,20,1],[177,198,204,1],[255,239,94,1],[255,255,255,1]],[[136,238,208,1],[202,224,129,1],[239,67,53,1],[242,205,79,1],[246,139,54,1]],[[53,38,29,1],[95,79,69,1],[151,123,105,1],[206,173,142,1],[253,115,26,1]],[[68,66,89,1],[159,189,166,1],[219,101,68,1],[240,145,67,1],[252,177,71,1]],[[191,208,0,1],[196,60,39,1],[233,60,31,1],[242,83,58,1],[242,240,235,1]],[[43,43,43,1],[53,54,52,1],[230,50,75,1],[242,227,198,1],[255,198,165,1]],[[23,20,38,1],[26,15,12,1],[207,207,207,1],[240,240,240,1],[255,77,148,1]],[[28,1,19,1],[107,1,3,1],[163,0,6,1],[194,26,1,1],[240,60,2,1]],[[10,10,10,1],[140,97,70,1],[214,179,156,1],[242,76,61,1],[255,255,255,1]],[[46,13,35,1],[245,72,40,1],[247,128,60,1],[248,228,193,1],[255,237,191,1]],[[0,62,95,1],[0,67,132,1],[22,147,165,1],[150,207,234,1],[247,249,114,1]],[[66,29,56,1],[87,0,69,1],[190,226,232,1],[205,255,24,1],[255,8,90,1]],[[47,59,97,1],[121,128,146,1],[187,235,185,1],[233,236,229,1],[255,103,89,1]],[[58,17,28,1],[87,73,81,1],[131,152,142,1],[188,222,165,1],[230,249,188,1]],[[147,193,196,1],[198,182,204,1],[242,202,174,1],[250,12,195,1],[255,123,15,1]],[[255,3,149,1],[255,9,3,1],[255,139,3,1],[255,216,3,1],[255,251,3,1]],[[4,0,4,1],[254,26,138,1],[254,53,26,1],[254,143,26,1],[254,240,26,1]],[[125,173,154,1],[196,199,169,1],[249,213,177,1],[254,126,142,1],[255,62,97,1]],[[69,38,50,1],[145,32,77,1],[226,247,206,1],[228,132,74,1],[232,191,86,1]],[[0,0,0,1],[38,173,228,1],[77,188,233,1],[209,231,81,1],[255,255,255,1]],[[44,87,133,1],[209,19,47,1],[235,241,247,1],[237,214,130,1]],[[92,172,196,1],[140,209,157,1],[206,232,121,1],[252,182,83,1],[255,82,84,1]],[[58,68,8,1],[74,88,7,1],[125,146,22,1],[157,222,13,1],[199,237,14,1]],[[22,147,167,1],[200,207,2,1],[204,12,57,1],[230,120,30,1],[248,252,193,1]],[[59,12,44,1],[210,255,31,1],[250,244,224,1],[255,106,0,1],[255,195,0,1]],[[44,13,26,1],[52,158,151,1],[200,206,19,1],[222,26,114,1],[248,245,193,1]],[[28,20,13,1],[203,232,107,1],[242,233,225,1],[255,255,255,1]],[[75,88,191,1],[161,206,247,1],[247,255,133,1],[255,54,134,1]],[[74,95,103,1],[92,55,75,1],[204,55,71,1],[209,92,87,1],[217,212,168,1]]];s.prototype.getPalette=function(t){return n(h[t])},s.prototype.getCount=function(){return h.length},e.exports=s}),
define("famous-ext/BoundEvents",["require","exports","module","famous/EventHandler"],function(t,i,e){function s(){this.eventHandler=new o}var o=t("famous/EventHandler");s.prototype.emit=function(t,i){return this.eventHandler.emit(t,i),this},s.prototype.on=function(t,i){return this.eventHandler.on(t,i),this},s.prototype.unbind=function(t,i){return this.eventHandler.unbind(type,i),this},s.prototype.pipeEvents=function(t){return this.eventHandler.pipe(t),this},s.prototype.unpipeEvents=function(t){return this.eventHandler.unpipe(t),this},e.exports=s}),
define("famous-ext/Events",["require","exports","module","famous/EventHandler"],function(t,i,e){function s(){this.eventHandler=new o,o.setOutputHandler(this,this.eventHandler,!0),o.setInputHandler(this,this.eventHandler,!0)}var o=t("famous/EventHandler");e.exports=s}),
define("famous-ext/EventView",["require","exports","module","./View","famous/EventHandler"],function(t,i,e){function s(){o.apply(this,arguments),this.eventHandler=new n,n.setInputHandler(this,this.eventHandler,!0),n.setOutputHandler(this,this.eventHandler,!0)}var o=t("./View"),n=t("famous/EventHandler");s.prototype=Object.create(o.prototype),e.exports=s}),
define("famous-ext/View",["require","exports","module","famous/Combiner"],function(t,i,e){function s(){o.apply(this,arguments)}var o=t("famous/Combiner");s.prototype=Object.create(o.prototype),s.prototype.setOpts=function(t){for(var i in t)t.hasOwnProperty(i)&&(this.opts[i]=t[i])},e.exports=s}),
define("famous-kinematics/EnergyHelper",["require","exports","module"],function(t,i,e){function s(t,i,e){this.x=0,this.v=0,this.agents=[],this.featureSize=e?e:.5,this.jitter=Math.min(1e-4,.1*this.featureSize),this.minStepTime=1,this.lastUpdateTime=(new Date).getTime(),this.atRest=!1,this.set(t,i)}s.drag=function(t){return function(i,e,s){return-t*e*e*s}},s.friction=function(t){return function(i,e,s){return-t*Math.abs(e)*s}},s.spring=function(t,i,e){i||(i=0),e||(e=0);var s=2*e*Math.sqrt(i);return function(e,o,n){var r=e-t,a=r+o*n,h=.5*i*r*r,u=.5*i*a*a,p=0>r/a?h:u-h,c=s*o*o*n;return-p-c}},s.springFENE=function(t,i,e,o){i||(i=0),e||(e=0),o||(o=0);var n=2*e*Math.sqrt(i),r=s.spring(t,i,e),a=!1;return function(e,s,h){var u=e-t,p=u+s*h;if(Math.abs(s)<1e-4&&Math.abs(p)<o&&(a=!1),a||Math.abs(u)>=o||Math.abs(p)>=o)return a=!0,r(e,s,h);var c=-.5*i*o*o*Math.log(o*o-u*u),f=-.5*i*o*o*Math.log(o*o-p*p),l=0>u/p?-c:f-c,d=n*s*s*h;return-l-d}},s.magnet=function(t,i){var e=.5;return i||(i=0),function(s,o,n){var r=s-t,a=r+o*n;if(Math.abs(r)<e&&Math.abs(a)<e)return-.5*o*o*n;var h=-i/Math.max(Math.abs(r),e),u=-i/Math.max(Math.abs(a),e),p=u-h;return-p}},s.prototype={_updateReset:function(){this.lastUpdateTime=(new Date).getTime(),this.atRest=!1},set:function(t,i){"number"==typeof t&&this.setPos(t),"number"==typeof i&&this.setVelo(i)},setPos:function(t){this.x=t,this._updateReset()},setVelo:function(t){this.v=t,this._updateReset()},addAgent:function(t){"function"!=typeof t&&console.error("Invalid agent"),this.agents.indexOf(t)<0&&(this.agents.push(t),this.atRest=!1)},removeAgent:function(t){var i=this.agents.indexOf(t);i>=0&&(this.agents.splice(i,1),this.atRest=!1)},setAgents:function(t){this.agents=t.slice(0),this.atRest=!1},getPos:function(){return this.update(),this.x},getVelo:function(){return this.update(),this.v},update:function(t){for(t||(t=(new Date).getTime());this.lastUpdateTime<t;){var i=t-this.lastUpdateTime;this.v&&(i=Math.min(i,this.featureSize/Math.abs(this.v))),i=Math.max(i,this.minStepTime),this._step(i)}},_step:function(t){function i(t,i,s){for(var o=e.agents,n=0,r=0;r<o.length;r++)n+=o[r](t,i,s);return n}if(this.lastUpdateTime+=t,!this.atRest){var e=this,s=0,o=0;if(Math.abs(this.v)>this.jitter)s=i(this.x,this.v,t),o=this.v>0?1:-1;else{var n=i(this.x,this.jitter,t),r=i(this.x,-this.jitter,t);s=Math.max(n,r),o=n>r?1:-1,0>=n&&0>=r&&(this.atRest=!0)}var a=this.v,h=.5*a*a,u=h+s;if(0>u)this.x+=this.v*t*(u/s),this.v=0;else{var p=o*Math.sqrt(2*Math.abs(u));this.x+=this.v*t,this.v=p}this.atRest&&(this.x=Math.round(this.x/this.featureSize)*this.featureSize,this.v=0)}}},e.exports=s}),
define("famous-math/Quaternion",["require","exports","module","famous/Matrix"],function(t,i,e){function s(t,i,e,s){return this.w=t||1,this.x=i||0,this.y=e||0,this.z=s||0,this}t("famous/Matrix"),s.prototype.makeFromAngleAndAxis=function(t,i){i.normalize();var e=.5*t,s=Math.sin(e);return this.x=s*i.x,this.y=s*i.y,this.z=s*i.z,this.w=Math.cos(e),this},s.prototype.clone=function(){return new s(this.w,this.x,this.y,this.z)},s.prototype.setWXYZ=function(t,i,e,s){return this.w=t,this.x=i,this.y=e,this.z=s,this},s.prototype.set=function(t){return this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z,this},s.prototype.clear=function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},s.prototype.normalize=function(){var t=Math.sqrt(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z);if(0==t)this.w=1,this.x=this.y=this.z=0;else{var i=1/t;this.w*=i,this.x*=i,this.y*=i,this.z*=i}return this},s.prototype.getMatrix=function(){return this.normalize(),[1-2*this.y*this.y-2*this.z*this.z,2*this.x*this.y-2*this.z*this.w,2*this.x*this.z+2*this.y*this.w,0,2*this.x*this.y+2*this.z*this.w,1-2*this.x*this.x-2*this.z*this.z,2*this.y*this.z-2*this.x*this.w,0,2*this.x*this.z-2*this.y*this.w,2*this.y*this.z+2*this.x*this.w,1-2*this.x*this.x-2*this.y*this.y,0,0,0,0,1]},s.prototype.multiply=function(t,i){return i=i||this.register,i.w=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z,i.x=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,i.y=this.w*t.y-this.x*t.z+this.y*t.w+this.z*t.x,i.z=this.w*t.z+this.x*t.y-this.y*t.x+this.z*t.w,i},s.prototype.isEqual=function(t){return t.w==this.w&&t.x==this.x&&t.y==this.y&&t.z==this.z?!0:!1},s.prototype.dot=function(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z},s.prototype.add=function(t,i){return i=i||this.register,i.w=this.w+t.w,i.x=this.x+t.x,i.y=this.y+t.y,i.z=this.z+t.z,i},s.prototype.sub=function(t,i){return i=i||this.register,i.w=this.w-t.w,i.x=this.x-t.x,i.y=this.y-t.y,i.z=this.z-t.z,i},s.prototype.normSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},s.prototype.norm=function(){return Math.sqrt(this.normSquared())},s.prototype.conj=function(t){return t=t||this.register,t.w=this.w,t.x=-this.x,t.y=-this.y,t.z=-this.z,t},s.prototype.inverse=function(t){return t=t||this.register,this.conj(t),t.scalarDivide(this.normSquared(),t),t},s.prototype.scalarDivide=function(t,i){return i=i||this.register,t=1/t,i.w=this.w*t,i.x=this.x*t,i.y=this.y*t,i.z=this.z*t,i},s.prototype.scalarMult=function(t,i){return i=i||this.register,i.w=this.w*t,i.x=this.x*t,i.y=this.y*t,i.z=this.z*t,i},s.prototype.isZero=function(){return 0==this.x&&0==this.y&&0==this.z&&1==this.w?!0:!1},s.prototype.negate=function(){return this.w=-this.w,this.x=-this.x,this.y=-this.y,this.z=-this.z,this},s.prototype.zeroRotation=function(){return this.x=0,this.y=0,this.z=0,this.w=1,this},s.prototype.slerp=function(t,i,e){e=e||this.register;var s,o,n,r,a;return this.to.set(t),this.from.set(this),o=this.dot(t),0>o&&(o=-o,this.to.negate()),1-o>this.epsilon?(s=Math.acos(o),n=Math.sin(s),r=Math.sin((1-i)*s)/n,a=Math.sin(i*s)/n):(r=1-i,a=i),this.from.scalarMult(r,this.from),this.to.scalarMult(a,this.to),this.from.add(this.to,e),e},s.prototype.epsilon=1e-5,s.prototype.from=new s(0,0,0,0),s.prototype.to=new s(0,0,0,0),s.prototype.register=new s(0,0,0,0),s.prototype.zero=new s(0,0,0,0),s.prototype.one=new s(1,1,1,1),e.exports=s}),
define("famous-math/Vector",["require","exports","module"],function(t,i,e){function s(t,i,e){return 1==arguments.length?(t instanceof Array&&this.setXYZ(t[0],t[1],t[2]),"Vector"==t.constructor.name&&this.set(t)):(this.x=t||0,this.y=i||0,this.z=e||0),this}s.prototype.add=function(t,i){return i=i||this.register,i.setXYZ(this.x+t.x,this.y+t.y,this.z+t.z)},s.prototype.sub=function(t,i){return i=i||this.register,i.setXYZ(this.x-t.x,this.y-t.y,this.z-t.z)},s.prototype.mult=function(t,i){return i=i||this.register,i.setXYZ(t*this.x,t*this.y,t*this.z)},s.prototype.div=function(t,i){return this.mult(1/t,i)},s.prototype.cross=function(t,i){return i=i||this.register,i.setXYZ(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},s.prototype.rotate=function(t,i){var e=t.x,s=t.y,o=t.z;return this.rotateX(e,i).rotateY(s,i).rotateZ(o,i)},s.prototype.rotateX=function(t,i){i=i||this.register;var e=this.x,s=this.y,o=this.z,n=Math.cos(t),r=Math.sin(t);return i.setXYZ(e,-o*r+s*n,o*n-s*r)},s.prototype.rotateY=function(t,i){i=i||this.register;var e=this.x,s=this.y,o=this.z,n=Math.cos(t),r=Math.sin(t);return i.setXYZ(-o*r+e*n,s,o*n+e*r)},s.prototype.rotateZ=function(t,i){i=i||this.register;var e=this.x,s=this.y,o=this.z,n=Math.cos(t),r=Math.sin(t);return i.setXYZ(-s*r+e*n,s*n+e*r,o)},s.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},s.prototype.normSquared=function(){return this.dot(this)},s.prototype.norm=function(){return Math.sqrt(this.normSquared())},s.prototype.normalize=function(t,i){t=t||1,i=i||this.register;var e=1e-7,s=this.norm();return Math.abs(s)>e?this.mult(t/s,i):i.setXYZ(t,0,0)},s.prototype.clone=function(){return new s(this.x,this.y,this.z)},s.prototype.isZero=function(){return!this.x&&!this.y&&!this.z},s.prototype.set=function(t){return t instanceof Array?(this.x=t[0],this.y=t[1],this.z=t[2]||0):(this.x=t.x,this.y=t.y,this.z=t.z),this!=this.register&&this.register.clear(),this},s.prototype.setXYZ=function(t,i,e){return this.register.clear(),this.x=t,this.y=i,this.z=e,this},s.prototype.clear=function(){this.x=0,this.y=0,this.z=0},s.prototype.cap=function(t){if(1/0==t)return this;var i=this.norm();return i>t&&this.normalize().mult(t,this),this},s.prototype.project=function(t,i){return i=i||this.register,t.mult(this.dot(t),i)},s.prototype.reflect=function(t,i){return i=i||this.register,t.normalize(),this.sub(this.project(t).mult(2),i)},s.prototype.toArray=function(){return[this.x,this.y,this.z]},s.prototype.fromArray=function(t){this.x=t[0],this.y=t[1],this.z=t[2]},s.prototype.get=function(){return this.toArray()},s.prototype.register=new s(0,0,0),s.prototype.zero=new s(0,0,0),s.prototype.one=new s(1,1,1),e.exports=s}),
define("famous-misc/Camera",["require","exports","module","famous/TransitionHelper","famous/Matrix","famous/Util"],function(t,i,e){function s(t){this._renderMatrix=r.identity,this._scaleState=new n([1,1,1]),this._skewState=new n([0,0,0]),this._rotateState=new n([0,0,0]),this._translateState=new n([0,0,0]),this._dirty=!1,t&&this.lookAt(t)}function o(){var t=r.scale.apply(this,this._scaleState.get()),i=r.skew.apply(this,this._skewState.get()),e=r.rotate.apply(this,this._rotateState.get()),s=r.move(r.multiply(t,i,e),this._translateState.get());return r.inverse(s)}var n=t("famous/TransitionHelper"),r=t("famous/Matrix"),a=t("famous/Util");s.prototype.halt=function(){this._scaleState.halt(),this._skewState.halt(),this._rotateState.halt(),this._translateState.halt()},s.prototype.getScale=function(){return this._scaleState.get()},s.prototype.setScale=function(t,i,e){return this._dirty=!0,this._scaleState.set(t,i,e)},s.prototype.getSkew=function(){return this._skewState.get()},s.prototype.setSkew=function(t,i,e){return this._dirty=!0,this._skewState.set(t,i,e)},s.prototype.getRotation=function(){return this._rotateState.get()},s.prototype.setRotation=function(t,i,e){return this._dirty=!0,this._rotateState.set(t,i,e)},s.prototype.getSpin=s.prototype.getRotation,s.prototype.setSpin=s.prototype.setRotation,s.prototype.getPos=function(){return this._translateState.get()},s.prototype.setPos=function(t,i,e){return this._dirty=!0,this._translateState.set(t,i,e)},s.prototype.lookAt=function(t,i,e){var s=void 0;e&&(s=a.after(4,e)),this.halt();var o=r.interpret(t);this.setScale(o.scale,i,s),this.setSkew(o.skew,i,s),this.setRotation(o.rotate,i,s),this.setPos(o.translate,i,s)},s.prototype.render=function(t){return this._dirty|=this._scaleState.isActive()||this._skewState.isActive()||this._rotateState.isActive()||this._translateState.isActive(),this._dirty&&(this._renderMatrix=o.call(this),this._dirty=!1),{transform:this._renderMatrix,group:!0,target:t}},e.exports=s}),
define("famous-misc/CubicBezier",["require","exports","module"],function(t,i,e){function s(t){var i=[[1,0,0,0],[0,0,1,0],[-3,3,-2,-1],[2,-2,1,1]];t=t||[0,1,0,0],this.coef=[0,0,0,0];for(var e=0;4>e;e++)for(var s=0;4>s;s++)this.coef[e]+=i[e][s]*t[s]}s.prototype.create=function(){var t=this;return function(i){i=i||0;var e=t.coef;return e[0]+e[1]*i+e[2]*i*i+e[3]*i*i*i}},e.exports=s}),
define("famous-misc/Draggable",["require","exports","module","famous/Matrix","famous/EventHandler","famous-misc/TouchSync","famous/TransitionHelper"],function(t,i,e){function s(t){this.opts={projection:"xy",transform:void 0,maxX:1/0,maxY:1/0,snapX:0,snapY:0,sensitivity:1,duration:0,curve:"linear",callback:void 0},this.isActive=!0,this.eventHandler=new u,this.posState=new c([0,0]),this.touchSync=new p(function(){return this.getPos()}.bind(this)),this.setOpts(t),a.call(this)}function o(){this.emit("dragstart",{p:this.getPos()})}function n(t){this.setPos(t.p),this.emit("dragmove",{p:this.getPos()})}function r(){this.emit("dragend",{p:this.getPos()}),this.opts.callback&&(this.opts.callback=this.opts.callback.bind(this)),this.posState.set([0,0],{duration:this.opts.duration,curve:this.opts.curve},this.opts.callback)}function a(){this.touchSync.on("start",o.bind(this)),this.touchSync.on("update",n.bind(this)),this.touchSync.on("end",r.bind(this))}var h=t("famous/Matrix"),u=t("famous/EventHandler"),p=t("famous-misc/TouchSync"),c=t("famous/TransitionHelper");s.prototype.emit=function(t,i){this.eventHandler.emit(t,i),this.touchSync.emit(t,i)},s.prototype.on=function(t,i){this.eventHandler.on(t,i),this.touchSync.on(t,i)},s.prototype.calcTransform=function(t){var i=this.opts.projection,e=this.opts.maxX,s=this.opts.maxY,o=this.opts.snapX,n=this.opts.snapY,r=this.opts.sensitivity,a=t[0]*r,u=t[1]*r,p=0,c=0;if(i.constructor==String){var f=-1!=i.indexOf("x"),l=-1!=i.indexOf("y");p=f?a:0,c=l?u:0}if(i.constructor==Function){var d=i(a,u);p=d[0],c=d[1]}0!=o&&(p-=p%o),0!=n&&(c-=c%n),p=Math.max(Math.min(p,e),-e),c=Math.max(Math.min(c,s),-s);var m=h.translate(p,c);return this.opts.transform&&(m=h.multiply(this.opts.transform(a,u),m)),m},s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.getOpts=function(){return this.opts},s.prototype.getPos=function(){return this.posState.get()},s.prototype.setPos=function(t){this.posState.set(t)},s.prototype.deactivate=function(){this.isActive=!1},s.prototype.activate=function(){this.isActive=!0},s.prototype.render=function(t){if(this.isActive){var i=this.calcTransform(this.getPos());return{transform:i,target:t}}return t},e.exports=s}),
define("famous-misc/Drawer",["require","exports","module","famous/RenderNode","famous-kinematics/EnergyHelper","famous/Matrix","famous/Util","./TouchSync","famous/EventHandler"],function(t,i,e){function s(t,i,e,s){t||(t="l"),this.dir=t,this.size=i,this.eventHandler=new c(!0),this.requireCloseEvent=!1,this.touchPanelFT=e,this.touchPanelPos=s,"l"==this.dir||"t"==this.dir?this.closedPos=-this.size:("r"==this.dir||"b"==this.dir)&&(this.closedPos=this.size),this.closedPos<0?(this.closeCond=o(this.closedPos+100),this.openCond=n(-100),this.openVelo=.5,this.closeVelo=-.5):(this.closeCond=n(this.closedPos-100),this.openCond=o(100),this.openVelo=-.5,this.closeVelo=.5),this.isOpened=!1,this.node=new a,this.state=new h(this.closedPos),this.openFirmness=.001,this.openDamp=.5,this.closeFirmness=.001,this.closeDamp=.5,this.agentsReleased=!1,this.agents=[];var r="l"==this.dir||"r"==this.dir?0:1;this.touchSync=new p(function(){return this.state.getPos()}.bind(this),{dir:r?p.DIR_Y:p.DIR_X,rails:!0}),this.touchSync.on("start",function(t){this.eventHandler.emit("controlstart",t)}.bind(this)),this.touchSync.on("update",function(t){this.releaseAgents(),this.state.setPos(t.p),this.state.setVelo(0),this.eventHandler.emit("controlupdate",t)}.bind(this)),this.touchSync.on("end",function(t){t.p;var i=t.v;this.closedPos>0?i>0?this.close():this.open():i>0?this.open():this.close(),this.state.setVelo(i),this.resetAgents(),this.eventHandler.emit("controlend",t)}.bind(this))}function o(t){return function(i){return t>i}}function n(t){return function(i){return i>t}}function r(t,i){var e=!1;return function(){return!e&&t.apply(this,arguments)&&(e=!0),e?i.apply(this,arguments):0}}var a=t("famous/RenderNode"),h=t("famous-kinematics/EnergyHelper"),u=t("famous/Matrix");t("famous/Util");var p=t("./TouchSync"),c=t("famous/EventHandler");s.prototype.releaseAgents=function(){this.agentsReleased||(this.agentsReleased=!0,this.state.setAgents([]))},s.prototype.resetAgents=function(){this.agentsReleased=!1,this.state.setAgents(this.agents)},s.prototype.contentFrom=function(t){return this.node=new a(t),this.node},s.prototype.open=function(){var t=r(this.openCond,h.spring(0,this.openFirmness,this.openDamp));this.agents=[t],this.resetAgents(),this.state.setVelo(this.openVelo)},s.prototype.close=function(){var t=r(this.closeCond,h.spring(this.closedPos,this.closeFirmness,this.closeDamp));this.agents=[t],this.resetAgents(),this.state.setVelo(this.closeVelo)},s.prototype.emit=function(t,i){this.touchSync.emit(t,i)},s.prototype.on=function(t,i){this.eventHandler.on(t,i)},s.prototype.render=function(){var t,i=this.state.getPos();t="l"==this.dir||"r"==this.dir?u.translate(i,0):u.translate(0,i);var e=(this.size-i)/this.size;return 0>=e?(this.touchPanelFT.setTransform(u.translate(0,-(2*window.innerHeight),0)),this.isOpened&&this.eventHandler.emit("close"),this.isOpened=!1):this.touchPanelFT.setTransform(u.translate(this.touchPanelPos[0],this.touchPanelPos[1],this.touchPanelPos[2])),e>.5&&(this.isOpened=!0),this.touchPanelFT.setOpacity(e+.001),{transform:t,target:this.node.execute()}},e.exports=s}),
define("famous-misc/Fader",["require","exports","module","famous/TransitionHelper"],function(t,i,e){function s(t,i){this.opts={cull:!1,transition:!0,pulseInTransition:!0,pulseOutTransition:!0,visibilityThreshold:0},t&&this.setOpts(t),i||(i=0),this.transitionHelper=new o(i)}var o=t("famous/TransitionHelper");s.prototype.getOpts=function(){return this.opts},s.prototype.setOpts=function(t){void 0!==t.cull&&(this.opts.cull=t.cull),void 0!==t.transition&&(this.opts.transition=t.transition),void 0!==t.pulseInTransition&&(this.opts.pulseInTransition=t.pulseInTransition),void 0!==t.pulseOutTransition&&(this.opts.pulseOutTransition=t.pulseOutTransition),void 0!==t.visibilityThreshold&&(this.opts.visibilityThreshold=t.visibilityThreshold)},s.prototype.show=function(t){this.set(1,this.opts.transition,t)},s.prototype.hide=function(t){this.set(0,this.opts.transition,t)},s.prototype.pulse=function(t,i){void 0===t&&(t=1);var e=this.transitionHelper.get();this.transitionHelper.set(t,this.opts.pulseInTransition),this.transitionHelper.set(e,this.opts.pulseOutTransition,i)},s.prototype.set=function(t,i,e){this.transitionHelper.halt(),this.transitionHelper.set(t,i,e)},s.prototype.render=function(t){var i=this.transitionHelper.get();return this.opts.cull&&!i?void 0:{opacity:i,target:t}},s.prototype.isVisible=function(){var t=this.opts.visibilityThreshold;return t>=1?1==this.transitionHelper.get():this.transitionHelper.get()>t},e.exports=s}),
define("famous-misc/FastClick",["require","exports","module"],function(){var t=300,i={};document.addEventListener("touchstart",function(t){for(var e=Date.now(),s=0;s<t.changedTouches.length;s++){var o=t.changedTouches[s];i[o.identifier]=e}}),window.addEventListener("touchmove",function(t){for(var e=0;e<t.changedTouches.length;e++){var s=t.changedTouches[e];delete i[s.identifier]}}),document.addEventListener("touchend",function(e){for(var s=Date.now(),o=0;o<e.changedTouches.length;o++){var n=e.changedTouches[o],r=i[n.identifier];if(r&&t>s-r){e.preventDefault();var a=new CustomEvent("click",{bubbles:!0,details:n});e.target.dispatchEvent(a)}delete i[n.identifier]}})}),
define("famous-misc/Flip",["require","exports","module","famous/Matrix","famous/TransitionHelper","famous/RenderNode"],function(t,i,e){function s(t){this.opts={transition:!0,cull:!0},t&&this.setOpts(t),this._side=0,this.state=new n(0),this.frontNode=void 0,this.backNode=void 0}var o=t("famous/Matrix"),n=t("famous/TransitionHelper"),r=t("famous/RenderNode");s.prototype.setDefaultTransition=function(t){this.transition=t},s.prototype.flip=function(t,i){void 0===t&&(t=1==this._side?0:1),this._side=t,this.state.set(t,this.opts.transition,i)},s.prototype.getOpts=function(){return this.opts},s.prototype.setOpts=function(t){void 0!==t.transition&&(this.opts.transition=t.transition),void 0!==t.cull&&(this.opts.cull=t.cull)},s.prototype.frontFrom=function(t){return this.frontNode=new r(t),this.frontNode},s.prototype.backFrom=function(t){return this.backNode=new r(t),this.backNode},s.prototype.render=function(t){var i=this.state.get();return t?{transform:o.rotateY(Math.PI*i),target:t}:this.opts.cull&&!this.state.isActive()?i?this.backNode.execute():this.frontNode.execute():[{transform:o.rotateY(Math.PI*i),target:this.frontNode.execute()},{transform:o.rotateY(Math.PI*(i+1)),target:this.backNode.execute()}]},e.exports=s}),
define("famous-misc/FormatTime",["require","exports","module"],function(t,i,e){function s(t,i){var e=t.toString().match(/(\d+)/g),s=new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5],0),r=new Date,a=(r.getTime()-s.getTime())/1e3,h=parseInt(a/60),u=parseInt(h/60),p=parseInt(u/24),c=o(s),f=10;if(720>h){if(60>h){if(2>h){var l="just now",f=1;return[l,f]}if(30>h){var l=h+" minutes ago",f=2;return[l,f]}if(40>h){var l="about a half hour ago",f=2;return[l,f]}if(50>h){var l="about 45 minutes ago",f=3;return[l,f]}var l="about an hour ago",f=4;return[l,f]}if(1==i)var l=c[6]+":"+c[7]+c[8];else var l="earlier today at "+c[6]+":"+c[7]+c[8];var f=5;return[l,f]}if(1440>h){var l="yesterday at "+c[6]+":"+c[7]+c[8],f=6;return[l,f]}if(p>=1&&2>=p){var l="yesterday at "+c[6]+":"+c[7]+c[8],f=7;return[l,f]}if(6>p){var l=c[0]+" at "+c[6]+":"+c[7]+c[8],f=8;return[l,f]}if(30>p){if(1==i)var l=c[3]+"/"+c[1]+" at "+c[6]+":"+c[7]+c[8];else var l=c[4]+" "+c[1]+c[2]+" around "+c[6]+c[8];var f=9;return[l,f]}var l=n(c,r),f=10;return[l,f]}function o(t){var i=t.getDate(),e=t.getDay(),s=t.getMonth()+1,o=t.getFullYear(),n=t.getHours(),h=t.getMinutes().toString();h.length<2&&(h="0"+h);var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];if(12>n)var p="am";else var p="pm";return 0==n&&(n=12),n>12&&(n-=12),[u[e],i,r()[i],s,a()[s],o,n,h,p]}function n(t,i){if(i||new Date,i.getFullYear()==t[5])var e=t[4]+" "+t[1]+t[2];else var e=t[4]+" "+t[1]+t[2]+" "+t[5];return e}function r(){return{1:"st",2:"nd",3:"rd",4:"th",5:"th",6:"th",7:"th",8:"th",9:"th",10:"th",11:"th",12:"th",13:"th",14:"th",15:"th",16:"th",17:"th",18:"th",19:"th",20:"th",21:"st",22:"nd",23:"rd",24:"th",25:"th",26:"th",27:"th",28:"th",29:"th",30:"th",31:"st"}}function a(){return{1:"Jan",2:"Feb",3:"Mar",4:"April",5:"May",6:"June",7:"July",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"}}e.exports=s}),
define("famous-misc/Idle",["require","exports","module","famous/TransitionHelper"],function(t,i,e){function s(t,i){this.idleFn=t,this.timeout=i,this.enabled=i>0,this.reset()}t("famous/TransitionHelper"),s.prototype.timeoutIn=function(t){this.lastTouchTime=(new Date).getTime()-this.timeout+t},s.prototype.enable=function(){this.enabled=!0},s.prototype.disable=function(){this.enabled=!1},s.prototype.setIdleFunction=function(t){this.idleFn=t},s.prototype.update=function(){if(!this.idling&&this.enabled&&this.idleFn){var t=(new Date).getTime();t-this.lastTouchTime>this.timeout&&(this.idling=!0,this.idleFn.call(this))}},s.prototype.isIdling=function(){return this.idling},s.prototype.reset=function(){this.lastTouchTime=(new Date).getTime(),this.idling=!1},s.prototype.emit=function(){this.reset()},e.exports=s}),
define("famous-misc/ImageFader",["require","exports","module","famous/RenderNode","./Fader","famous/Matrix"],function(t,i,e){function s(){this.nodes=[],this.faders=[],this.mode=-1}var o=t("famous/RenderNode"),n=t("./Fader"),r=t("famous/Matrix");s.prototype.getMode=function(){return this.mode},s.prototype.setMode=function(t,i,e){this.mode=t,this.faders[t].set(1,i,function(){for(var i=0;i<this.faders.length;i++)i!=t&&this.faders[i].set(0);e&&e()}.bind(this))},s.prototype.forMode=function(t){return this.nodes[t]||(this.nodes[t]=new o,this.faders[t]=new n),this.nodes[t]},s.behindMatrix=r.translate(0,0,-.01),s.prototype.render=function(){for(var t=[],i=0;i<this.nodes.length;i++){var e=this.faders[i].render(this.nodes[i].execute());i!=this.mode&&(e={transform:s.behindMatrix,target:e}),t[i]=e}return t},e.exports=s}),
define("famous-misc/Layout",["require","exports","module","famous/Matrix","famous/RenderNode"],function(t,i,e){function s(t){this.dir=t||"y",this.nodes=[],this.size=[0,0,0],this.positionsCache=[]}function o(t){if(t){if(t.size&&"object"==typeof t.size)return t.size;if(t.target&&"object"==typeof t.target)return o(t.target);if(t.getSize&&"function"==typeof t.getSize)return t.getSize();for(var i=[0,0,0],e=0;e<t.length;e++){var s=o(t[e]);s[0]>i[0]&&(i[0]=s[0]),s[1]>i[1]&&(i[1]=s[1]),s[2]>i[2]&&(i[2]=s[2])}return i}return[0,0,0]}var n=t("famous/Matrix"),r=t("famous/RenderNode");s.prototype.insertAt=function(t){var i=new r;return this.nodes.splice(t,0,i),i},s.prototype.insertFrom=function(t){return this.insertAt(this.nodes.length).from(t)},s.prototype.remove=function(t){return this.nodes.splice(t,1)},s.prototype.getSize=function(){return this.size.slice(0)},s.prototype.getPositionOfNodeAt=function(t){return this.positionsCache[t]},s.prototype.render=function(){for(var t=[0,0,0],i=[],e=0;e<this.nodes.length;e++){var s=this.nodes[e].execute(),r="x"==this.dir?n.translate(t[0],0,0):n.translate(0,t[1],0);this.positionsCache[e]=[t[0],t[1]],i.push({transform:r,target:s});var a=o(s);"x"==this.dir?(t[0]+=a[0],t[1]=Math.max(t[1],a[1])):(t[1]+=a[1],t[0]=Math.max(t[0],a[0])),a[2]&&(t[2]=Math.max(t[2],a[2]))}return this.size=t,{target:i,size:t.slice(0)}},e.exports=s}),
define("famous-misc/LightBox",["require","exports","module","famous/Matrix","famous/Transform","famous/RenderNode","famous/Util"],function(t,i,e){function s(t){this.opts={inTransform:o.scale(.001,.001,.001),inOpacity:0,inOrigin:[.5,.5],outTransform:o.scale(.001,.001,.001),outOpacity:0,outOrigin:[.5,.5],inTransition:!0,outTransition:!0,overlap:!1},t&&this.setOpts(t),this._showing=!1,this.nodes=[]}var o=t("famous/Matrix"),n=t("famous/Transform"),r=t("famous/RenderNode"),a=t("famous/Util");s.prototype.getOpts=function(){return this.opts},s.prototype.setOpts=function(t){void 0!==t.inTransform&&(this.opts.inTransform=t.inTransform),void 0!==t.inOpacity&&(this.opts.inOpacity=t.inOpacity),void 0!==t.inOrigin&&(this.opts.inOrigin=t.inOrigin),void 0!==t.outTransform&&(this.opts.outTransform=t.outTransform),void 0!==t.outOpacity&&(this.opts.outOpacity=t.outOpacity),void 0!==t.outOrigin&&(this.opts.outOrigin=t.outOrigin),void 0!==t.inTransition&&(this.opts.inTransition=t.inTransition),void 0!==t.outTransition&&(this.opts.outTransition=t.outTransition),void 0!==t.overlap&&(this.opts.overlap=t.overlap)},s.prototype.show=function(t,i){if(this._showing){if(!this.opts.overlap)return this.hide(this.show.bind(this,t,i)),void 0;this.hide()}this._showing=!0;var e=new n(this.opts.inTransform,this.opts.inOpacity,this.opts.inOrigin),s=new r(e);s.from(t),this.nodes.push(s);var h=i?a.after(3,i):void 0;e.setTransform(o.identity,this.opts.inTransition,h),e.setOpacity(1,this.opts.inTransition,h),e.setOrigin([.5,.5],this.opts.inTransition,h)},s.prototype.hide=function(t){if(this._showing){this._showing=!1;var i=this.nodes[this.nodes.length-1],e=i.get(),s=a.after(3,function(){this.nodes.splice(this.nodes.indexOf(i),1),t&&t.call(this)}.bind(this));e.setTransform(this.opts.outTransform,this.opts.outTransition,s),e.setOpacity(this.opts.outOpacity,this.opts.outTransition,s),e.setOrigin(this.opts.outOrigin,this.opts.outTransition,s)}},s.prototype.render=function(){for(var t=[],i=0;i<this.nodes.length;i++)t.push(this.nodes[i].execute());return t},e.exports=s}),
define("famous-misc/MouseSync",["require","exports","module","famous/EventHandler"],function(t,i,e){function s(t,i){this.eventInput=new h,this.eventOutput=new h,h.setInputHandler(this,this.eventInput),h.setOutputHandler(this,this.eventOutput),this.targetGet=t,this.opts={dir:void 0,rails:!1,stallTime:50,scale:1},i&&this.setOpts(i),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0,a.call(this)}function o(t){this._prevCoord=[t.clientX,t.clientY],this._prevTime=Date.now(),this._prevVel=void 0!==this.opts.dir?0:[0,0],this.eventOutput.emit("start")}function n(t){if(this._prevCoord){var i=this._prevCoord,e=this._prevTime,o=[t.clientX,t.clientY],n=Date.now(),r=o[0]-i[0],a=o[1]-i[1];this.opts.rails&&(Math.abs(r)>Math.abs(a)?a=0:r=0);var h,u,p=Math.max(n-e,8),c=r/p,f=a/p,l=this.targetGet(),d=this.opts.scale;this.opts.dir==s.DIR_X?(h=l+d*r,u=d*c):this.opts.dir==s.DIR_Y?(h=l+d*a,u=d*f):(h=[l[0]+d*r,l[1]+d*a],u=[d*c,d*f]),this.eventOutput.emit("update",{p:h,v:u}),this._prevCoord=o,this._prevTime=n,this._prevVel=u}}function r(){if(this._prevCoord){var t=this._prevTime,i=Date.now();i-t>this.opts.stallTime&&(this._prevVel=0);var e=this.targetGet();this.eventOutput.emit("end",{p:e,v:this._prevVel}),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0}}function a(){this.eventInput.on("mousedown",o.bind(this)),this.eventInput.on("mousemove",n.bind(this)),this.eventInput.on("mouseup",r.bind(this)),this.eventInput.on("mouseout",r.bind(this))}var h=t("famous/EventHandler");s.DIR_X=0,s.DIR_Y=1,s.prototype.setOpts=function(t){void 0!==t.dir&&(this.opts.dir=t.dir),void 0!==t.rails&&(this.opts.rails=t.rails),void 0!==t.scale&&(this.opts.scale=t.scale),void 0!==t.stallTime&&(this.opts.stallTime=t.stallTime)},s.prototype.getOpts=function(){return this.opts},e.exports=s}),
define("famous-misc/PiecewiseCubicBezier",["require","exports","module","famous-misc/CubicBezier"],function(t,i,e){function s(t){t=t||{},this.split=t.split||.5;var i=t.overshoot||0,e=t.vLeft||[0,1+i,0,0],s=t.vRight||[1+i,1,0,0];this.bezLeft=new o(e).create(),this.bezRight=new o(s).create()}var o=t("famous-misc/CubicBezier");s.prototype.create=function(){var t=this;return function(i){i=i||0;var e,s=t.split;return s>i?(e=i/s,t.bezLeft(e)):(e=(i-s)/(1-s),t.bezRight(e))}},e.exports=s}),
define("famous-misc/PinchSync",["require","exports","module","famous/EventHandler"],function(t,i,e){function s(t,i){this.input=new n,this.output=new n,n.setInputHandler(this,this.input),n.setOutputHandler(this,this.output),this.targetGet=t,this.opts={scale:1},i&&this.setOpts(i),this.input.on("touchstart",this.handleStart.bind(this)),this.input.on("touchmove",this.handleMove.bind(this)),this.input.on("touchend",this.handleEnd.bind(this)),this.input.on("touchcancel",this.handleEnd.bind(this)),this.touchAId=void 0,this.posA=void 0,this.timestampA=void 0,this.touchBId=void 0,this.posB=void 0,this.timestampB=void 0,this._dist=void 0}function o(t,i){var e=i[0]-t[0],s=i[1]-t[1];return Math.sqrt(e*e+s*s)}var n=t("famous/EventHandler");s.prototype.handleStart=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];this.touchAId?this.touchBId||(this.touchBId=e.identifier,this.posB=[e.pageX,e.pageY],this.timestampB=Date.now(),this._dist=o(this.posA,this.posB),this._velo=0,this.output.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],distance:this._dist})):(this.touchAId=e.identifier,this.posA=[e.pageX,e.pageY],this.timestampA=Date.now())}},s.prototype.handleMove=function(t){if(this.touchAId&&this.touchBId){for(var i,e=this.timestampA,s=this.timestampB,n=0;n<t.changedTouches.length;n++){var r=t.changedTouches[n];r.identifier==this.touchAId?(this.posA=[r.pageX,r.pageY],this.timestampA=Date.now(),i=this.timestampA-e):r.identifier==this.touchBId&&(this.posB=[r.pageX,r.pageY],this.timestampB=Date.now(),i=this.timestampB-s)}if(i){var a=o(this.posA,this.posB),h=a-this._dist,u=h/i,p=this.targetGet(),c=this.opts.scale;this.output.emit("update",{p:p+c*h,v:c*u,touches:[this.touchAId,this.touchBId],distance:a}),this._dist=a,this._velo=u}}},s.prototype.handleEnd=function(t){if(this.touchAId||this.touchBId)for(var i=this.targetGet(),e=this.opts.scale,s=0;s<t.changedTouches.length;s++){var o=t.changedTouches[s];(o.identifier==this.touchAId||o.identifier==this.touchBId)&&(this.touchAId&&this.touchBId&&this.output.emit("end",{p:i,v:e*this._velo,touches:[this.touchAId,this.touchBId],distance:this._dist}),this.touchAId=void 0,this.touchBId=void 0)}},s.prototype.setOpts=function(t){void 0!==t.scale&&(this.opts.scale=t.scale)},s.prototype.getOpts=function(){return this.opts},e.exports=s}),
define("famous-misc/RenderArbiter",["require","exports","module","famous/RenderNode","./Fader"],function(t,i,e){function s(t){this.nodes={},this.faders={},this.mode=-1,this.cull=t}var o=t("famous/RenderNode"),n=t("./Fader");s.prototype.getMode=function(){return this.mode},s.prototype.setMode=function(t,i,e){for(var s in this.faders)s!=t?this.faders[s].set(0,i):this.faders[s].set(1,i,e);this.mode=t},s.prototype.forMode=function(t){return this.nodes[t]||(this.nodes[t]=new o,this.faders[t]=new n({cull:this.cull})),this.nodes[t]},s.prototype.render=function(){var t=[];for(var i in this.nodes)this.faders[i].isVisible()&&t.push(this.faders[i].render(this.nodes[i].execute()));return t},e.exports=s}),
define("famous-misc/RotateSync",["require","exports","module","famous/EventHandler"],function(t,i,e){function s(t,i){this.input=new n,this.output=new n,n.setInputHandler(this,this.input),n.setOutputHandler(this,this.output),this.targetGet=t,this.opts={scale:1},i&&this.setOpts(i),this.input.on("touchstart",this.handleStart.bind(this)),this.input.on("touchmove",this.handleMove.bind(this)),this.input.on("touchend",this.handleEnd.bind(this)),this.input.on("touchcancel",this.handleEnd.bind(this)),this.touchAId=void 0,this.posA=void 0,this.timestampA=void 0,this.touchBId=void 0,this.posB=void 0,this.timestampB=void 0,this._angle=void 0}function o(t,i){var e=i[0]-t[0],s=i[1]-t[1];return Math.atan2(s,e)}var n=t("famous/EventHandler");s.prototype.handleStart=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];this.touchAId?this.touchBId||(this.touchBId=e.identifier,this.posB=[e.pageX,e.pageY],this.timestampB=Date.now(),this._angle=o(this.posA,this.posB),this._vel=0,this.output.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],angle:this._angle})):(this.touchAId=e.identifier,this.posA=[e.pageX,e.pageY],this.timestampA=Date.now())}},s.prototype.handleMove=function(t){if(this.touchAId&&this.touchBId){for(var i,e=this.timestampA,s=this.timestampB,n=0;n<t.changedTouches.length;n++){var r=t.changedTouches[n];r.identifier==this.touchAId?(this.posA=[r.pageX,r.pageY],this.timestampA=Date.now(),i=this.timestampA-e):r.identifier==this.touchBId&&(this.posB=[r.pageX,r.pageY],this.timestampB=Date.now(),i=this.timestampB-s)}if(i){var a=o(this.posA,this.posB),h=a-this._angle,u=h/i,p=this.targetGet(),c=this.opts.scale;this.output.emit("update",{p:p+c*h,v:c*u,touches:[this.touchAId,this.touchBId],angle:a}),this._angle=a,this._vel=u}}},s.prototype.handleEnd=function(t){for(var i=this.targetGet(),e=this.opts.scale,s=0;s<t.changedTouches.length;s++){var o=t.changedTouches[s];(o.identifier==this.touchAId||o.identifier==this.touchBId)&&(this.touchAId&&this.touchBId&&this.output.emit("end",{p:i,v:e*this._vel,touches:[this.touchAId,this.touchBId],angle:this._angle}),this.touchAId=void 0,this.touchBId=void 0)}},s.prototype.setOpts=function(t){void 0!==t.scale&&(this.opts.scale=t.scale)},s.prototype.getOpts=function(){return this.opts},e.exports=s}),
define("famous-misc/ScaleSync",["require","exports","module","famous/EventHandler"],function(t,i,e){function s(t,i){this.input=new r,this.output=new r,r.setInputHandler(this,this.input),r.setOutputHandler(this,this.output),this.targetGet=t,this.opts={scale:1},i&&this.setOpts(i),this.input.on("touchstart",this.handleStart.bind(this)),this.input.on("touchmove",this.handleMove.bind(this)),this.input.on("touchend",this.handleEnd.bind(this)),this.input.on("touchcancel",this.handleEnd.bind(this)),this.input.on("pipe",n.bind(this)),this.touchAId=void 0,this.posA=void 0,this.timestampA=void 0,this.touchBId=void 0,this.posB=void 0,this.timestampB=void 0,this._startDist=void 0,this._prevScale=void 0}function o(t,i){var e=i[0]-t[0],s=i[1]-t[1];return Math.sqrt(e*e+s*s)}function n(){this.touchAId=void 0,this.touchBId=void 0}var r=t("famous/EventHandler");s.prototype.handleStart=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];this.touchAId?this.touchBId||(this.touchBId=e.identifier,this.posB=[e.pageX,e.pageY],this.timestampB=Date.now(),this._prevScale=1,this._startDist=o(this.posA,this.posB),this._velo=0,this.output.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],distance:this._startDist})):(this.touchAId=e.identifier,this.posA=[e.pageX,e.pageY],this.timestampA=Date.now())}},s.prototype.handleMove=function(t){if(this.touchAId&&this.touchBId){for(var i,e=this.timestampA,s=this.timestampB,n=0;n<t.changedTouches.length;n++){var r=t.changedTouches[n];r.identifier==this.touchAId?(this.posA=[r.pageX,r.pageY],this.timestampA=Date.now(),i=this.timestampA-e):r.identifier==this.touchBId&&(this.posB=[r.pageX,r.pageY],this.timestampB=Date.now(),i=this.timestampB-s)}if(i){var a=o(this.posA,this.posB),h=a/this._startDist,u=h-this._prevScale,p=u/i,c=this.targetGet(),f=this.opts.scale;this.output.emit("update",{p:c+f*u,v:f*p,touches:[this.touchAId,this.touchBId],distance:a}),this._prevScale=h,this._velo=p}}},s.prototype.handleEnd=function(t){if(this.touchAId||this.touchBId)for(var i=this.targetGet(),e=this.opts.scale,s=0;s<t.changedTouches.length;s++){var o=t.changedTouches[s];(o.identifier==this.touchAId||o.identifier==this.touchBId)&&(this.touchAId&&this.touchBId&&this.output.emit("end",{p:i,v:e*this._velo,touches:[this.touchAId,this.touchBId],distance:this._startDist}),this.touchAId=void 0,this.touchBId=void 0)}},s.prototype.setOpts=function(t){void 0!==t.scale&&(this.opts.scale=t.scale)},s.prototype.getOpts=function(){return this.opts},e.exports=s}),
define("famous-misc/Scrollview",["require","exports","module","famous-kinematics/EnergyHelper","famous/Matrix","famous/EventHandler","famous-misc/TouchSync"],function(t,i,e){function s(t){this.opts={dir:"y",rails:!0,defaultItemSize:[100,100],clipSize:void 0,margin:void 0,drag:.001,friction:5e-5,edgeGrip:.5,edgeFirmness:.001,edgeDamp:.4,paginated:!1,pageFirmness:2e-4,pageDamp:.8,pageStopSpeed:1/0,pageSwitchSpeed:1,speedLimit:10},this.energyHelper=new v(0),this.touchSync=new x(function(){return-this.getPos()}.bind(this),{dir:"x"==this.opts.dir?x.DIR_X:x.DIR_Y}),this.eventInput=new y,this.eventOutput=new y,this.touchSync.pipe(this.eventInput),this.touchSync.pipe(this.eventOutput),this._outputFunction=void 0,this.setOutputFunction(),this.touchCount=0,this.springAttached=!1,this.currSpring=void 0,this.onEdge=!1,this.edgeSpringPos=void 0,this._touchVelo=void 0,this.drag=void 0,this.friction=void 0,this.edgeSpring=void 0,this.endSpring=void 0,this._masterOffset=0,this._lastFrameNode=void 0,t&&this.setOpts(t),a.call(this)}function o(t){this.touchCount=t.count,u.call(this),this.setVel(0),this._touchVel=0,this.touchSync.setOpts({scale:1})}function n(t){this.setPos(-t.p),this._touchVel=-t.v}function r(t){if(this.touchCount=t.count,!this.touchCount){this.detachSpring(),h.call(this);var i=-t.v;i<-this.opts.speedLimit&&(i=-this.opts.speedLimit),i>this.opts.speedLimit&&(i=this.opts.speedLimit),this.setVel(i),this._touchVel=void 0}}function a(){this.eventInput.on("start",o.bind(this)),this.eventInput.on("update",n.bind(this)),this.eventInput.on("end",r.bind(this))}function h(){this.springAttached?this.attachSpring(this.currSpring):this.energyHelper.setAgents([this.drag,this.friction])}function u(){this.energyHelper.setAgents([])}function p(t){return t["x"==this.opts.dir?0:1]}function c(){for(var t=!1;!t&&this.getPos()<0;){var i=this.node.prev?this.node.prev():void 0;if(i){var e=i.getSize?i.getSize():this.opts.defaultItemSize,s=p.call(this,e);this.setPos(this.getPos()+s),this._masterOffset-=s,this.node=i}else t=!0}for(var o=this.node.getSize?this.node.getSize():this.opts.defaultItemSize;!t&&this.getPos()>=p.call(this,o);){var n=this.node.next?this.node.next():void 0;if(n){var s=p.call(this,o);this.setPos(this.getPos()-s),this._masterOffset+=s,this.node=n,o=this.node.getSize?this.node.getSize():this.opts.defaultItemSize}else t=!0}Math.abs(this._masterOffset)>this.opts.clipSize+this.opts.margin&&(this._masterOffset=0)}function f(){this.onEdge&&0==this.touchCount&&this.attachSpring(),this.touchSync.setOpts({scale:this.onEdge?this.opts.edgeGrip:1})}function l(){if(0==this.touchCount&&!this.springAttached&&!this.onEdge&&this.opts.paginated&&Math.abs(this.getVel())<this.opts.pageStopSpeed){var t=this.node.getSize?this.node.getSize():this.opts.defaultItemSize,i=Math.abs(this.getVel())>this.opts.pageSwitchSpeed,e=this.getVel()>0,s=this.getPos()>.5*p.call(this,t);(i&&e||!i&&s)&&this.nextPage(),this.attachSpring(this.pageSpring)}}function d(t){this.edgeSpringPos!=t&&(this.edgeSpring=v.spring(t,this.opts.edgeFirmness,this.opts.edgeDamp),this.edgeSpringPos=t)}function m(t,i,e){var s=t.getSize?t.getSize():this.opts.defaultItemSize,o=this._outputFunction(i);return e.push({transform:o,target:t.render()}),s["x"==this.opts.dir?0:1]}var v=t("famous-kinematics/EnergyHelper"),g=t("famous/Matrix"),y=t("famous/EventHandler"),x=t("famous-misc/TouchSync");s.prototype.attachSpring=function(t){t||(t=this.edgeSpring),this.springAttached&&this.detachSpring(),u.call(this),this.springAttached=!0,this.currSpring=t,this.energyHelper.addAgent(this.currSpring)},s.prototype.detachSpring=function(){this.springAttached&&(this.energyHelper.removeAgent(this.currSpring),this.currSpring=void 0,this.springAttached=!1)},s.prototype.emit=function(t,i){return"touchstart"==t||"touchmove"==t||"touchend"==t?this.touchSync.emit(t,i):this.eventInput.emit(t,i)},s.prototype.on=function(t,i){return this.eventOutput.on(t,i)},s.prototype.unbind=function(t,i){return this.eventOutput.unbind(t,i)},s.prototype.pipe=function(t){return this.eventOutput.pipe(t)},s.prototype.unpipe=function(t){return this.eventOutput.unpipe(t)},s.prototype.getPos=function(t){var i=this.energyHelper.getPos();if(t){var e=this.offsets[t];return void 0!==e?i-e:void 0}return i},s.prototype.setPos=function(t){this.energyHelper.setPos(t)},s.prototype.getVel=function(){return this.touchCount?this._touchVel:this.energyHelper.getVelo()},s.prototype.setVel=function(t){this.energyHelper.setVelo(t)},s.prototype.getOpts=function(){return this.opts},s.prototype.setOpts=function(t){void 0!==t.dir&&(this.opts.dir=t.dir),void 0!==t.rails&&(this.opts.rails=t.rails),void 0!==t.defaultItemSize&&(this.opts.defaultItemSize=t.defaultItemSize),void 0!==t.clipSize&&(this.opts.clipSize=t.clipSize),void 0!==t.margin&&(this.opts.margin=t.margin),void 0!==t.drag&&(this.opts.drag=t.drag),void 0!==t.friction&&(this.opts.friction=t.friction),void 0!==t.edgeGrip&&(this.opts.edgeGrip=t.edgeGrip),void 0!==t.edgeFirmness&&(this.opts.edgeFirmness=t.edgeFirmness),void 0!==t.edgeDamp&&(this.opts.edgeDamp=t.edgeDamp),void 0!==t.paginated&&(this.opts.paginated=t.paginated),void 0!==t.pageStopSpeed&&(this.opts.pageStopSpeed=t.pageStopSpeed),void 0!==t.pageSwitchSpeed&&(this.opts.pageSwitchSpeed=t.pageSwitchSpeed),void 0!==t.pageFirmness&&(this.opts.pageFirmness=t.pageFirmness),void 0!==t.pageDamp&&(this.opts.pageDamp=t.pageDamp),void 0!==t.speedLimit&&(this.opts.speedLimit=t.speedLimit),void 0===this.opts.clipSize&&(this.opts.clipSize="x"==this.opts.dir?window.innerWidth:window.innerHeight),void 0===this.opts.margin&&(this.opts.margin=.5*this.opts.clipSize),this.drag=v.drag(this.opts.drag),this.friction=v.friction(this.opts.friction),this.edgeSpring=v.spring(0,this.opts.edgeFirmness,this.opts.edgeDamp),this.pageSpring=v.spring(0,this.opts.pageFirmness,this.opts.pageDamp),this.touchSync.setOpts({rails:this.opts.rails,dir:"x"==this.opts.dir?x.DIR_X:x.DIR_Y})},s.prototype.setOutputFunction=function(t){t||(t=function(t){return"x"==this.opts.dir?g.translate(t,0):g.translate(0,t)}.bind(this)),this._outputFunction=t},s.prototype.prevPage=function(){var t=this.node.prev?this.node.prev():void 0;if(t){var i=p.call(this,this.node.getSize());this.setPos(this.getPos()+i),this.node=t;for(var e in this.offsets)this.offsets[e]+=i}return t},s.prototype.nextPage=function(){var t=this.node.next?this.node.next():void 0;if(t){var i=p.call(this,this.node.getSize());this.setPos(this.getPos()-i),this.node=t;for(var e in this.offsets)this.offsets[e]-=i}return t},s.prototype.getCurrNode=function(){return this.node},s.prototype.sequenceFrom=function(t){this.node=t,this._lastFrameNode=t},s.prototype.render=function(t){var i={};if(t){var e=this.getPos(),s=this._outputFunction(-e);return{transform:s,target:t}}if(this.node){!this.onEdge&&(0==this.touchCount&&!this.springAttached||this.touchCount>0)&&c.call(this);var e=this.getPos(),s=this._outputFunction(-(e+this._masterOffset)),o=[],n=!1,r=0,a=this.node;for(i[a]=0;a&&r-e<this.opts.clipSize+this.opts.margin;)r+=m.call(this,a,r+this._masterOffset,o),a=a.next?a.next():void 0,!a&&r-e<=this.opts.clipSize&&(this.onEdge||d.call(this,r-this.opts.clipSize),n=!0),i[a]=r;if(a=this.node&&this.node.prev?this.node.prev():void 0){var h=a.getSize?a.getSize():this.opts.defaultItemSize;r=-p.call(this,h),i[a]=r}else 0>=e&&(this.onEdge||d.call(this,0),n=!0);for(;a&&r-e>-(this.opts.clipSize+this.opts.margin);)r-=m.call(this,a,r+this._masterOffset,o),a=a.prev?a.prev():void 0,i[a]=r;return this.offsets=i,this.onEdge=n,f.call(this),l.call(this),this.opts.paginated&&this._lastFrameNode!==this.node&&(this.eventOutput.emit("pageChange"),this._lastFrameNode=this.node),{transform:s,target:o,group:!0}}},e.exports=s}),
define("famous-misc/Sequence",["require","exports","module"],function(t,i,e){function s(){this.startTime=0,this.setupPos=0,this.schedule=[],this.seqLoc=-1}s.prototype._execute=function(t){for(this.seqLoc<0&&(this.seqLoc=0);this.seqLoc<this.schedule.length&&this.schedule[this.seqLoc].pos<=t;)this.schedule[this.seqLoc].action.call(this),this.seqLoc++},s.prototype.update=function(){if(!(this.seqLoc<0||this.seqLoc>=this.schedule.length)){var t=(new Date).getTime()-this.startTime;this._execute(t)}},s.prototype.at=function(t,i){this.schedule.push({pos:t,action:i}),this.setupPos=t},s.prototype.after=function(t,i){this.at(this.setupPos+t,i)},s.prototype.play=function(t){this.schedule.sort(function(t,i){return t.pos-i.pos}),this.startTime=(new Date).getTime();for(var i=0;i<this.schedule.length&&this.schedule[i].pos<t;)i++;this.seqLoc=i},s.prototype.fastForward=function(t){"undefined"==typeof t&&(t=1/0),this._execute(t)},s.prototype.stop=function(){this.seqLoc=-1},e.exports=s}),
define("famous-misc/SequenceView",["require","exports","module"],function(t,i,e){function s(t,i,e){this.array=t,this.index=i,this.loop=e,this._prev=void 0,this._prevIndex=void 0,this._next=void 0,this._nextIndex=void 0}s.prototype.prev=function(){var t=this.index-1;if(0==this.index){if(!this.loop)return void 0;t=this.array.length-1}return this._prev&&this._prevIndex==t||(this._prev=new s(this.array,t,this.loop),this._prevIndex=t),this._prev},s.prototype.next=function(){var t=this.index+1;if(t>=this.array.length){if(!this.loop)return void 0;t=0}return this._next&&this._next==t||(this._next=new s(this.array,t,this.loop),this._nextIndex=t),this._next},s.prototype.toString=function(){return this.index},s.prototype.get=function(){return this.array[this.index]},s.prototype.getSize=function(){var t=this.get();return t.getSize.apply(t,arguments)},s.prototype.render=function(){var t=this.get();return t.render.apply(t,arguments)},e.exports=s}),
define("famous-misc/Shaper",["require","exports","module","famous/RenderNode","famous/Matrix","famous/Transform","famous/Util"],function(t,i,e){function s(t){this.nodes=[],this.transforms=[],this.defaultTransition={duration:1e3,curve:"easeInOut"};for(var i in t)this.side(i).from(t[i])}var o=t("famous/RenderNode"),n=t("famous/Matrix"),r=t("famous/Transform"),a=t("famous/Util");s.prototype.side=function(t){return this.nodes[t]||(this.transforms[t]=new r,this.transforms[t].setDefaultTransition(this.defaultTransition),this.nodes[t]=new o(this.transforms[t])),this.nodes[t]},s.prototype.halt=function(t){this.transforms[t].halt()},s.prototype.haltSet=function(t){for(var i=0;i<t.length;i++)this.halt(i)},s.prototype.haltAll=function(){this.haltSet(this.all())},s.prototype.set=function(t,i,e,s){return this.transforms[t]?(this.transforms[t].setTransform(i,e,s),void 0):(s&&s(),void 0)},s.prototype.setShape=function(t,i,e,s){for(var o="function"==typeof i?i:function(t){return i[t]},n=s?a.after(t.length,s):void 0,r=0;r<t.length;r++)this.set(t[r],o(r),e,n)},s.prototype.setShapeAll=function(t,i,e){this.setShape(this.all(),t,i,e)},s.prototype.modify=function(t,i,e,s){var o=n.multiply(this.transforms[t].getFinalTransform(),i);this.set(t,o,e,s)},s.prototype.modifySet=function(t,i,e,s){for(var o=s?a.after(t.length,s):void 0,n=0;n<t.length;n++)this.modify(t[n],i,e,o)},s.prototype.modifyAll=function(t,i,e){this.modify(this.all(),t,i,e)},s.prototype.setOpacity=function(t,i,e,s){this.transforms[t].setOpacity(i,e,s)},s.prototype.setOpacitySet=function(t,i,e,s){for(var o=s?a.after(t.length,s):void 0,n=0;n<t.length;n++)this.setOpacity(t[n],i,e,o)},s.prototype.setOpacityAll=function(t,i,e){this.setOpacitySet(this.all(),t,i,e)},s.prototype.all=function(){var t=[];for(var i in this.nodes)t.push(i);return t},s.prototype.getTransform=function(t){return this.transforms[t].getTransform()},s.prototype.getOpacity=function(t){return this.transforms[t].getOpacity()},s.prototype.isMoving=function(t){return this.transforms[t].isMoving()},s.prototype.render=function(){for(var t=[],i=0;i<this.nodes.length;i++)t[i]=this.nodes[i].execute();return t},e.exports=s}),
define("famous-misc/StructuredShaper",["require","exports","module","famous-misc/Shaper","famous/RenderNode","famous/Matrix","famous/Transform","famous/Util"],function(t,i,e){function s(){n.apply(this,arguments),this.transformChildren=[],this.assignedSides=[],this.topNodeIds=[]}function o(t){var i=[];void 0!==this.assignedSides[t]&&i.push(this.nodes[this.assignedSides[t]].execute());var e=this.transformChildren[t];if(e)for(var s=0;s<e.length;s++)i.push(o.call(this,e[s]));return this.transforms[t]?this.transforms[t].render(i):void 0}var n=t("famous-misc/Shaper"),r=t("famous/RenderNode");t("famous/Matrix");var a=t("famous/Transform");t("famous/Util"),s.prototype=Object.create(n.prototype),s.prototype.assign=function(t,i){this.assignedSides[i]=t},s.prototype.allocate=function(t,i,e){var s=new a(t,i,e),o=this.transforms.push(s)-1;return this.topNodeIds.indexOf(o)<0&&this.topNodeIds.push(o),o},s.prototype.child=function(t,i){this.transformChildren[i]||(this.transformChildren[i]=[]),this.transformChildren[i].push(t);var e=this.topNodeIds.indexOf(t);e>=0&&this.topNodeIds.splice(e,1)},s.prototype.side=function(t){return this.nodes[t]||(this.nodes[t]=new r),this.assignedSides.indexOf(t)<0&&!this.transforms[t]&&(this.transforms[t]=new a,this.topNodeIds.push(t),this.assignedSides[t]=t),this.nodes[t]},s.prototype.all=function(){return this.topNodeIds},s.prototype.render=function(){for(var t=[],i=0;i<this.topNodeIds.length;i++)t.push(o.call(this,this.topNodeIds[i]));return t},e.exports=s}),
define("famous-misc/Swappable",["require","exports","module","famous/RenderNode","famous/Matrix","famous/Transform"],function(t,i,e){function s(t){this.opts={initTransform:h.identity,initOpacity:0,finalTransform:h.identity,finalOpacity:0,inTransition:{duration:500,curve:"easeInOut"},outTransition:{duration:500,curve:"easeInOut"},async:!1},this.nodes={},this.transforms=[],this.currIndex=-1,this.prevIndex=-1,this.setOpts(t)}function o(t,i,e,s,o,n,r){if(t in this.nodes){var a=this.nodes[t].get();a.isMoving()||(i&&a.setTransform(i),void 0!==e&&a.setOpacity(e)),a.setTransform(s,n),a.setOpacity(o,n,r)}}function n(t,i){o.call(this,t,this.opts.initTransform,this.opts.initOpacity,h.identity,1,this.opts.inTransition,i)}function r(t,i){o.call(this,t,void 0,void 0,this.opts.finalTransform,this.opts.finalOpacity,this.opts.outTransition,i)}var a=t("famous/RenderNode"),h=t("famous/Matrix"),u=t("famous/Transform");s.prototype.item=function(t){var i=new a(new u(this.opts.initTransform,this.opts.initOpacity),!0);return this.nodes[t]=i,i},s.prototype.select=function(t,i){t!=this.currIndex&&(this.opts.async?r.call(this,this.currIndex,function(){n.call(this,this.currIndex,i)}.bind(this)):(r.call(this,this.currIndex),n.call(this,t,i)),this.currIndex=t)},s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.getOpts=function(){return this.opts},s.prototype.render=function(){var t=[];for(var i in this.nodes)t.push(this.nodes[i].render());return t},e.exports=s}),
define("famous-misc/Timer",["require","exports","module","famous/Engine"],function(t,i,e){function s(t){return u.on(p,t),t}function o(t,i){var e=c(),o=function(){var s=c();s-e>=i&&(t.apply(this,arguments),u.unbind(p,o))};return s(o)}function n(t,i){var e=c(),o=function(){var s=c();s-e>=i&&(t.apply(this,arguments),e=c())};return s(o)}function r(t,i){if(void 0!==i){var e=function(){i--,0>=i&&(t.apply(this,arguments),h(e))};return s(e)}}function a(t,i){i=i||1;var e=i,o=function(){i--,0>=i&&(t.apply(this,arguments),i=e)};return s(o)}function h(t){u.unbind(p,t)}var u=t("famous/Engine"),p="prerender",c=window.performance?function(){return performance.now()}:function(){return Date.now()};e.exports={setTimeout:o,setInterval:n,after:r,every:a,clear:h}}),
define("famous-misc/TouchSync",["require","exports","module","famous/EventHandler","famous-misc/TouchTracker"],function(t,i,e){function s(t,i){this.touchTracker=new u,this.eventOutput=new h,h.setInputHandler(this,this.touchTracker),h.setOutputHandler(this,this.eventOutput),this.targetGet=t,this.opts={dir:void 0,rails:!1,scale:1},i&&this.setOpts(i),a.call(this)}function o(t){this.eventOutput.emit("start",{count:t.count,touch:t.touch.identifier})}function n(t){var i=t.history,e=i[i.length-2].timestamp,o=i[i.length-1].timestamp,n=i[i.length-2].touch,r=i[i.length-1].touch,a=r.pageX-n.pageX,h=r.pageY-n.pageY;this.opts.rails&&(Math.abs(a)>Math.abs(h)?h=0:a=0);var u=Math.max(o-e,8),p=a/u,c=h/u;if(i.length>2)var f=i[i.length-3].touch,l=(r.pageX-2*n.pageX+f.pageX)/(u*u),d=(r.pageY-2*n.pageY+f.pageY)/(u*u);else var l=0,d=0;var m,v,g,y=this.targetGet(),x=this.opts.scale;this.opts.dir==s.DIR_X?(m=y+x*a,v=x*p,g=x*c):this.opts.dir==s.DIR_Y?(m=y+x*h,v=x*c,g=x*d):(m=[y[0]+x*a,y[1]+x*h],v=[x*p,x*c],g=[x*l,x*d]),this.eventOutput.emit("update",{p:m,v:v,a:g,touch:t.touch.identifier})}function r(t){var i=void 0!==this.opts.dir?0:[0,0],e=t.history,o=t.count,n=this.targetGet();if(e.length>1){var r=e[e.length-2].timestamp,a=e[e.length-1].timestamp,h=e[e.length-2].touch,u=e[e.length-1].touch,p=u.pageX-h.pageX,c=u.pageY-h.pageY;this.opts.rails&&(Math.abs(p)>Math.abs(c)?c=0:p=0);var i,f=Math.max(a-r,1),l=p/f,d=c/f,m=this.opts.scale;i=this.opts.dir==s.DIR_X?m*l:this.opts.dir==s.DIR_Y?m*d:[m*l,m*d]}this.eventOutput.emit("end",{p:n,v:i,count:o,touch:t.touch.identifier})}function a(){this.touchTracker.on("trackstart",o.bind(this)),this.touchTracker.on("trackmove",n.bind(this)),this.touchTracker.on("trackend",r.bind(this))}var h=t("famous/EventHandler"),u=t("famous-misc/TouchTracker");s.DIR_X=0,s.DIR_Y=1,s.prototype.setOpts=function(t){void 0!==t.dir&&(this.opts.dir=t.dir),void 0!==t.rails&&(this.opts.rails=t.rails),void 0!==t.scale&&(this.opts.scale=t.scale)},s.prototype.getOpts=function(){return this.opts},e.exports=s}),
define("famous-misc/TouchTracker",["require","exports","module","famous/EventHandler"],function(t,i,e){function s(t){this.selective=t,this.touchHistory={},this.eventHandler=new u(!0)}function o(t,i,e,s){var o={};for(var n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);return{touch:o,origin:i,timestamp:+Date.now(),count:s,history:e}}function n(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],s=o(e,t.origin,void 0,t.touches.length);this.eventHandler.emit("trackstart",s),this.selective||this.touchHistory[e.identifier]||this.track(s)}}function r(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],s=this.touchHistory[e.identifier];if(s){var n=o(e,t.origin,s,t.touches.length);this.touchHistory[e.identifier].push(n),this.eventHandler.emit("trackmove",n)}}}function a(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],s=this.touchHistory[e.identifier];if(s){var n=o(e,t.origin,s,t.touches.length);this.eventHandler.emit("trackend",n),delete this.touchHistory[e.identifier]}}}function h(){for(var t in this.touchHistory){var i=this.touchHistory[t];this.eventHandler.emit("trackend",{touch:i[i.length-1].touch,timestamp:+Date.now(),count:0,history:i}),delete this.touchHistory[t]}}var u=t("famous/EventHandler");s.prototype.track=function(t){this.touchHistory[t.touch.identifier]=[t]},s.prototype.emit=function(t,i){return"touchstart"==t?n.call(this,i):"touchmove"==t?r.call(this,i):"touchend"==t?a.call(this,i):"touchcancel"==t?a.call(this,i):"unpipe"==t?h.call(this):void 0},s.prototype.on=function(t,i){return this.eventHandler.on(t,i)},s.prototype.unbind=function(t,i){return this.eventHandler.unbind(t,i)},s.prototype.pipe=function(t){return this.eventHandler.pipe(t)},s.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},e.exports=s}),
define("famous-misc/TransitionInEffect",["require","exports","module"],function(t,i,e){function s(t){this.opts={transition:!0,initTransform:void 0,initOpacity:0,initOrigin:void 0},t&&this.setOpts(t)}s.prototype.getOpts=function(){return this.opts},s.prototype.setOpts=function(t){void 0!==t.transition&&(this.opts.transition=t.transition),void 0!==t.initTransform&&(this.opts.initTransform=t.initTransform),void 0!==t.initOpacity&&(this.opts.initOpacity=t.initOpacity),void 0!==t.initOrigin&&(this.opts.initOrigin=t.initOrigin)},s.prototype.applyOn=function(t){for(var i=t.getTransforms(),e=0;e<i.length;e++){var s=i[e];if(this.opts.initTransform){var o=s.getTransform();s.setTransform(this.opts.initTransform),s.setTransform(o,this.opts.transition)}if(void 0!==this.opts.initOpacity){var n=s.getOpacity();s.setOpacity(this.opts.initOpacity),s.setOpacity(n,this.opts.transition)}if(this.opts.initOrigin){var r=s.getOrigin();s.setOrigin(this.opts.initOrigin),s.setOrigin(r,this.opts.transition)}}},e.exports=s}),
define("famous-physics/PhysicsEngine",["require","exports","module","famous-physics/bodies/Particle","famous-physics/bodies/Circle","famous-physics/bodies/Rectangle","famous-physics/integrator/SymplecticEuler"],function(t,i,e){function s(t){this.opts={speed:1,steps:1,maxSteps:3,constraintSteps:2,constraintTolerance:1e-4,vCap:1/0,aCap:1/0},t&&this.setOpts(t),this._particles=[],this._agents=[],this._forces=[],this._constraints=[],this._playing=!0,this._buffer=0,this._timestep=1e3/60/this.opts.steps,this._prevTime=void 0,this._currTime=void 0,this._integrator=new x({vCap:this.opts.vCap,aCap:this.opts.aCap}),this._currAgentId=0,this.BODIES=s.BODIES}function o(){return Date.now()}function n(t,i,e){void 0===i&&(i=this.getParticles()),i instanceof Array||(i=[i]),this._agents.push({agent:t,targets:i,source:e});var s=this._currAgentId,o=r.call(this,t);return o.push(s),this._currAgentId++}function r(t){return t.applyForce?this._forces:t.applyConstraint?this._constraints:void 0}function a(t){var i=this._forces[t],e=this._agents[i],s=e.agent,o=e.targets,n=e.source;s.applyForce(o,n)}function h(){for(var t=this._forces.length-1;t>-1;t--)a.call(this,t)}function u(t,i){var e=this._constraints[t],s=this._agents[e],o=s.agent,n=s.targets,r=s.source;return o.applyConstraint(n,r,i)}function p(t){var i=1/0,e=0;for(this.opts.constraintTolerance;e<this.opts.constraintSteps;){i=0;for(var s=this._constraints.length-1;s>-1;s--)i+=u.call(this,s,t);e++}}function c(t){t.updateAcceleration()}function f(){this.forEachParticle(c)}function l(t){for(var i=this._particles,e=0;e<i.length;e++){var s=i[e];s.immunity||this._integrator.integrateVelocity(s,t)}}function d(t){for(var i=this._particles,e=0;e<i.length;e++){var s=i[e];s.immunity||this._integrator.integratePosition(s,t)}}function m(t){h.call(this),f.call(this),l.call(this,t),p.call(this,t),d.call(this,t)}var v=t("famous-physics/bodies/Particle"),g=t("famous-physics/bodies/Circle"),y=t("famous-physics/bodies/Rectangle"),x=t("famous-physics/integrator/SymplecticEuler");s.BODIES={CIRCLE:g,RECTANGLE:y},s.prototype.setOpts=function(t){for(var i in t)this.opts[i]&&(this.opts[i]=t[i])},s.prototype.createParticle=function(t){var i=new v(t);return this._particles.push(i),i},s.prototype.createBody=function(t){var i=t.shape;if(void 0===i)return this.createParticle(t);var i=new i(t);return this._particles.push(i),i},s.prototype.remove=function(t){for(var i=0;i<this._forces.length;i++)this.detachFrom(this._forces[i],t);for(var i=0;i<this._constraints.length;i++)this.detachFrom(this._constraints[i],t)},s.prototype.attach=function(t,i,e){if(t instanceof Array){for(var s=[],o=0;o<t.length;o++)s[o]=n.call(this,t[o],i,e);return s}return n.call(this,t,i,e)},s.prototype.attachTo=function(t,i){this.getAgent(t).targets.push(i)},s.prototype.detachFrom=function(t,i){var e=this.getAgent(t);if(e.source===i)this.detach(t);else{var s=e.targets,o=s.indexOf(i);o>0&&s.splice(o,1)}},s.prototype.detach=function(t){var i=this.getAgent(t).agent,e=r.call(this,i),s=e.indexOf(t);e.splice(s,1)},s.prototype.detachAll=function(){for(var t=0;t<this._agents.length;t++)this.detach(t)},s.prototype.getAgent=function(t){return this._agents[t]},s.prototype.getParticles=function(){return this._particles},s.prototype.getParticlesExcept=function(t){var i=[];return this.forEachParticle(function(e){-1===t.indexOf(e)&&i.push(e)}),i},s.prototype.getPos=function(t){return void 0===t&&(t=this._particles[0]),t.getPos()},s.prototype.getVel=function(t){return void 0===t&&(t=this._particles[0]),t.getVel()},s.prototype.getTransform=function(t){return void 0===t&&(t=this._particles[0]),t.getTransform()},s.prototype.setPos=function(t,i){void 0===i&&(i=this._particles[0]),i.setPos(t)},s.prototype.setVel=function(t,i){void 0===i&&(i=this._particles[0]),i.setVel(t)},s.prototype.forEachParticle=function(t){for(var i=this.getParticles(),e=0,s=i.length;s>e;e++)t(i[e],e)},s.prototype.step=function(){if(this._playing){var t=this.opts.speed;this._prevTime||(this._prevTime=o()),this._currTime=o();var i=this._currTime-this._prevTime;0!=i&&(m.call(this,t*this._timestep),this._prevTime=o())}},s.prototype.render=function(){this.step();var t=[];return this.forEachParticle(function(i){t.push(i.render())}),t},s.prototype.play=function(){this._prevTime=o(),this._playing=!0},s.prototype.pause=function(){this._playing=!1},s.prototype.toggle=function(){this._playing?this.pause():this.play()},s.prototype.reverseTime=function(){this.opts.speed*=-1},s.prototype.reverseVelocities=function(){this.forEachParticle(function(t){t.v.mult(-1,t.v)})},e.exports=s}),
define("famous-physics/bodies/Circle",["require","exports","module","./Particle"],function(t,i,e){function s(t){t=t||{},this.r=t.r||1,o.call(this,t),this.size=[2*this.r,2*this.r]}var o=t("./Particle");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),
define("famous-physics/bodies/Particle",["require","exports","module","famous/RenderNode","famous-physics/math/vector","famous/Matrix"],function(t,i,e){function s(t){t=t||{},this.p=t.p?new n(t.p):new n(0,0,0),this.v=t.v?new n(t.v):new n(0,0,0),this.a=t.a?new n(t.a):new n(0,0,0),this.f=t.f?new n(t.f):new n(0,0,0),this.rotation=new n(0,0,0),this.scale=new n(1,1,1),this.m=void 0!==t.m?t.m:1,this.restitution=void 0!==t.restitution?t.restitution:.5,this.dissipation=void 0!==t.dissipation?t.dissipation:0,this.immunity=void 0!==t.immunity?t.immunity:!1,this.axis=void 0!==t.axis?t.axis:void 0,this.mInv=1/this.m,this.size=[0,0,0],this.node=void 0,this.spec={target:void 0,transform:void 0}}var o=t("famous/RenderNode"),n=t("famous-physics/math/vector"),r=t("famous/Matrix");s.AXIS={X:0,Y:1,Z:2},s.prototype.setPos=function(t){this.p.set(t)},s.prototype.getPos=function(){return this.p.get()},s.prototype.setVel=function(t,i){(!this.immunity||i)&&this.v.set(t)},s.prototype.getVel=function(){return this.v.get()},s.prototype.setMass=function(t){this.m=t,this.mInv=1/t},s.prototype.getMass=function(){return this.m},s.prototype.setImmunity=function(t){this.immunity=t},s.prototype.getImmunity=function(){return this.immunity},s.prototype.toggleImmunity=function(){this.setImmunity(!this.getImmunity())},s.prototype.clear=function(t,i){t=t||new n,i=i||new n,this.setPos(t),this.setVel(i),this.f.clear(),this.a.clear()},s.prototype.applyForce=function(t){this.immunity||this.f.add(t,this.f)},s.prototype.applyImpulse=function(t){this.immunity||this.v.add(t.mult(this.mInv),this.v)},s.prototype.getEnergy=function(){return.5*this.m*this.v.dot(this.v)},s.prototype.updateAcceleration=function(){this.a.set(this.f.mult(this.mInv)),this.f.clear()},s.prototype.getTransform=function(){var t=this.p,i=this.rotation;return void 0!==this.axis&&(s.AXIS.X==this.axis&&(t.y=0,t.z=0),s.AXIS.Y==this.axis&&(t.x=0,t.z=0),s.AXIS.Z==this.axis&&(t.x=0,t.y=0)),i.isZero()?r.translate(t.x,t.y,t.z):r.move(r.rotate(i.x,i.y,i.z),this.getPos())},s.prototype.from=function(t){return this.node=new o(t),this.node},s.prototype.render=function(t){if(t)this.spec.target=t,this.spec.transform=this.getTransform();else{if(!this.node)return;this.spec.target=this.node.execute(),this.spec.transform=this.getTransform()}return this.spec},e.exports=s}),
define("famous-physics/bodies/Rectangle",["require","exports","module","./Particle"],function(t,i,e){function s(t){this.opts=t||{},this.opts.size=t.size||[0,0],o.call(this,t)}var o=t("./Particle");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),
define("famous-physics/constraints/Collision",["require","exports","module","../math/vector"],function(t,i,e){function s(t){this.opts={restitution:.5},t&&this.setOpts(t),this.n=new o,this.vRel=new o,this.I=new o,this.disp=new o}var o=t("../math/vector");s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(t,i){for(var e=i.p,s=i.r,o=i.v,n=this.n,r=this.I,a=this.vRel,h=this.disp,u=this.opts.restitution,p=0;p<t.length;p++){var c=t[p];if(i!=c){var f=c.p,l=c.r,d=i.mInv;h.set(e.sub(f));var m=h.norm(),v=s+l-m;if(v>0){var g=c.v,y=c.mInv;n.set(h.normalize()),a.set(o.sub(g)),r.set(n.mult((1+u)*a.dot(n)/(d+y))),o.sub(r.mult(d),o),e.add(n.mult(v/2),e),g.add(r.mult(y),g),f.add(n.mult(-v/2),f)}}}},e.exports=s}),
define("famous-physics/constraints/CollisionJacobian",["require","exports","module","famous-physics/math/vector"],function(t,i,e){function s(t){this.opts={k:.5,restitution:void 0},t&&this.setOpts(t),this.n=new o,this.pDiff=new o,this.vDiff=new o,this.impulse1=new o,this.impulse2=new o,this.slop=0}var o=t("famous-physics/math/vector");s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(t,i,e){for(var s=this.opts.k,o=this.n,n=this.pDiff,r=this.vDiff,a=this.impulse1,h=this.impulse2,u=i.v,p=i.p,c=i.mInv,f=i.r,l=i.restitution,d=0;d<t.length;d++){var m=t[d];if(m!=i){var v=m.v,g=m.p,y=m.mInv,x=m.r,S=m.restitution,w=void 0!==this.opts.restitution?this.opts.restitution:Math.sqrt(l*S);n.set(g.sub(p)),r.set(v.sub(u)),n.normalize(1,o);var b=n.norm(),T=b-(f+x),M=1/(c+y),z=0;if(0>T){var C=T<=this.slop?((1+w)*o.dot(r)+s/e*(T-this.slop))/(z+e/M):(1+w)*o.dot(r)/(z+e/M);o.mult(e*C).put(a),a.mult(-1).put(h),i.applyImpulse(a),m.applyImpulse(h),p.add(o.mult(T/2),p),g.add(o.mult(-T/2),g)}}}},e.exports=s}),
define("famous-physics/constraints/Curve",["require","exports","module","../math/vector"],function(t,i,e){function s(t){this.opts={f:function(t,i){return 100*Math.sin(t/100)-i},df:void 0,g:function(t,i,e){return e},dg:void 0,dampingRatio:0,period:0},t&&this.setOpts(t),this.J=new o,this.impulse=new o}var o=t("../math/vector");s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(t,i,e){for(var s=this.impulse,o=this.J,n=this.opts.f,r=this.opts.f,a=this.opts.df,h=this.opts.dg,u=0,p=0;p<t.length;p++){var c=t[p],f=c.v,l=c.p,d=c.m;if(0==this.opts.period)var m=0,v=1;else var g=4*d*Math.PI*this.opts.dampingRatio/this.opts.period,y=4*d*Math.PI*Math.PI/(this.opts.period*this.opts.period),m=1/(g+e*y),v=e*y/(g+e*y);if(void 0===a){var x=1e-7,S=n(l.x,l.y,l.z),w=(n(l.x+x,l.y,l.z)-S)/x,b=(n(l.x,l.y+x,l.z)-S)/x,T=(n(l.x,l.y,l.z+x)-S)/x,M=r(l.x,l.y,l.z),z=(r(l.x+x,l.y,l.z)-M)/x,C=(r(l.x,l.y+x,l.z)-M)/x,_=(r(l.x,l.y,l.z+x)-M)/x;o.setXYZ(w+z,b+C,T+_)}else{var P=a(l.x,l.y,l.z),O=h(l.x,l.y,l.z);o.setXYZ(P[0]+O[0],P[1]+O[1],P[2]+O[2])}var I=v/e*(n(l.x,l.y,l.z)+r(l.x,l.y,l.z)),E=-(o.dot(f)+I)/(m+e*o.normSquared()/d);s.set(o.mult(e*E)),c.applyImpulse(s),u+=Math.abs(E)}return u},s.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},e.exports=s}),
define("famous-physics/constraints/Distance",["require","exports","module","../math/vector"],function(t,i,e){function s(t){this.opts={length:0,anchor:void 0,dampingRatio:0,period:0},t&&this.setOpts(t),this.impulse=new o,this.n=new o,this.diffP=new o,this.diffV=new o}var o=t("../math/vector");s.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor.p instanceof o&&(this.opts.anchor=t.anchor.p),t.anchor instanceof Array&&(this.opts.anchor=new o(t.anchor)),delete t.anchor);for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(t,i,e){var s=this.n,o=this.diffP,n=this.diffV,r=this.impulse;if(i)var a=i.p,h=i.mInv,u=i.v;else var a=this.opts.anchor,h=0;for(var p=this.opts.length,c=0,f=0;f<t.length;f++){var l=t[f],d=l.v,m=l.p,v=l.mInv;o.set(m.sub(a)),s.set(o.normalize());var g=o.norm()-p;i?n.set(d.sub(u)):n.set(d);var y=1/(v+h);if(0==this.opts.period)var x=0,S=1;else var w=4*y*Math.PI*this.opts.dampingRatio/this.opts.period,b=4*y*Math.PI*Math.PI/(this.opts.period*this.opts.period),x=1/(w+e*b),S=e*b/(w+e*b);var T=S/e*g,M=-(s.dot(n)+T)/(x+e/y);r.set(s.mult(e*M)),l.applyImpulse(r),i&&i.applyImpulse(r.mult(-1)),c+=Math.abs(M)}return c},s.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},e.exports=s}),
define("famous-physics/constraints/Distance1D",["require","exports","module","../math/vector"],function(t,i,e){function s(t){this.opts={length:0,anchor:void 0,dampingRatio:0,period:0},t&&this.setOpts(t),this.impulse=new o}var o=t("../math/vector");s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(t,i,e){var s,o,n=this.impulse;if(i)var r=i.p.x,a=i.mInv,h=i.v.x;else var r=this.opts.anchor,a=0;for(var u=this.opts.length,p=this.opts.period,c=this.opts.dampingRatio,f=0,l=0;l<t.length;l++){var d=t[l],m=d.v.x,v=d.p.x,g=d.mInv;s=v-r;var y=s-u;o=i?m-h:m;var x=1/(g+a);if(0==p)var S=0,w=1;else var b=4*x*Math.PI*c/p,T=4*x*Math.PI*Math.PI/(p*p),S=1/(b+e*T),w=e*T/(b+e*T);var M=w/e*y,z=-(o+M)/(S+e/x);n.setXYZ(e*z,0,0),d.applyImpulse(n),i&&i.applyImpulse(n.mult(-1)),f+=Math.abs(z)}return f},s.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},e.exports=s}),
define("famous-physics/constraints/Joint",["require","exports","module","../math/matrix","../math/GaussSeidel","../math/vector"],function(t,i,e){function s(t){this.opts={length:0},t&&this.setOpts(t);var i=10,e=1e-5;this.solver=new n(i,e)}var o=t("../math/matrix"),n=t("../math/GaussSeidel"),r=t("../math/vector");s.prototype.getPosition=function(t,i,e){var s=2,n=1,a=[],h=[],u=[],p=[],c=[],f=t;a[0]=f.getVel(),h[0]=f.p,u[0]=f.mInv,p[0]=f.f,c[0]=f.m,a[1]=i.v,h[1]=i.p,u[1]=i.mInv,p[1]=i.f,c[1]=i.m;for(var l=[],d=0;n>d;d++){l[d]=[];for(var m=0;s>m;m++){var v;m==d?v=h[d].sub(h[d+1]):m==d+1&&(v=h[d+1].sub(h[d])),l[d][3*m+0]=v.x,l[d][3*m+1]=v.y,l[d][3*m+2]=v.z}}var g=new o(n,3*s);g.set(l);for(var y=[],d=0;n>d;d++){y[d]=[];for(var m=0;s>m;m++){var v;m==d?v=a[d].sub(a[d+1]):m==d+1&&(v=a[d+1].sub(a[d])),y[d][3*m+0]=v.x,y[d][3*m+1]=v.y,y[d][3*m+2]=v.z}}for(var x=[],S=[],w=0;s>w;w++)x[3*w+0]=u[w],x[3*w+1]=u[w],x[3*w+2]=u[w],S[3*w+0]=a[w].x,S[3*w+1]=a[w].y,S[3*w+2]=a[w].z;var b=new o(3*s,3*s).diag(x),T=new o(n,n);g.rightMult(b).rightMult(g.transpose(),T);for(var M=g.vMult(S),z=1,C=[],w=0;n>w;w++){var _=this.length,P=h[w+1].sub(h[w]).normSquared();C[w]=.5*(P-_*_)}for(var O=[],I=0;n>I;I++)O[I]=-M[I]-z/e*C[I];for(var E=this.solver.solve(T.values,O),F=g.transpose().vMult(E),A=[],w=0;s>w;w++)A[w]=new r(F[3*w+0],F[3*w+1],F[3*w+2]);for(var w=0;s>w;w++){var S=a[w],k=c[w],H=A[w];(0!=w||0!=f.id)&&(1==w&&0==f.id?S.add(H.sub(A[0]).div(k),S):S.add(H.div(k),S))}},s.prototype.getError=function(){},e.exports=s}),
define("famous-physics/constraints/Rod",["require","exports","module","../math/vector"],function(t,i,e){function s(t){this.opts={length:0,anchor:void 0,stiffness:1},t&&this.setOpts(t),this.disp=new o,this.push=new o}var o=t("../math/vector");s.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor.p instanceof o&&(this.opts.anchor=t.anchor.p),t.anchor instanceof Array&&(this.opts.anchor=new o(t.anchor)),delete t.anchor);for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(t,i,e){var s=this.opts,o=this.disp,n=this.push,r=s.length,a=s.stiffness,h=s.anchor||i.p,u=t[0],p=u.p;o.set(p.sub(h));var c=o.norm(),f=(r-c)/c;Math.abs(f)>0&&(o.mult(.5*f*a,n),u.immunity||(p.add(n,p),u.v.add(n.div(e),u.v)),i&&!i.immunity&&(i.p.sub(n,i.p),i.v.sub(n.div(e),i.v)))},e.exports=s}),
define("famous-physics/constraints/Rope",["require","exports","module","../math/vector"],function(t,i,e){function s(t){this.opts={length:0,anchor:void 0,dampingRatio:0,period:0},t&&this.setOpts(t),this.impulse=new o,this.n=new o,this.diffP=new o,this.diffV=new o}var o=t("../math/vector");s.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor.p instanceof o&&(this.opts.anchor=t.anchor.p),t.anchor instanceof Array&&(this.opts.anchor=new o(t.anchor)),delete t.anchor);for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(t,i,e){var s=this.n,o=this.diffP,n=this.diffV,r=this.impulse;if(i)var a=i.p,h=i.mInv,u=i.v;else var a=this.opts.anchor,h=0;for(var p=this.opts.length,c=0,f=0;f<t.length;f++){var l=t[f],d=l.v,m=l.p,v=l.mInv;o.set(m.sub(a));var g=o.norm()-p;if(0>g)return;s.set(o.normalize()),i?n.set(d.sub(u)):n.set(d);var y=1/(v+h);if(0==this.opts.period)var x=0,S=1;else var w=4*y*Math.PI*this.opts.dampingRatio/this.opts.period,b=4*y*Math.PI*Math.PI/(this.opts.period*this.opts.period),x=1/(w+e*b),S=e*b/(w+e*b);var T=S/e*g,M=-(s.dot(n)+T)/(x+e/y);r.set(s.mult(e*M)),l.applyImpulse(r),i&&i.applyImpulse(r.mult(-1)),c+=Math.abs(M)}return c},s.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},e.exports=s}),
define("famous-physics/constraints/StiffSpring",["require","exports","module","../math/vector"],function(t,i,e){function s(t){this.opts={length:0,anchor:void 0,dampingRatio:1,period:1e3},t&&this.setOpts(t),this.pDiff=new o,this.vDiff=new o,this.n=new o,this.impulse1=new o,this.impulse2=new o}var o=t("../math/vector");s.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor.p instanceof o&&(this.opts.anchor=t.anchor.p),t.anchor instanceof Array&&(this.opts.anchor=new o(t.anchor)),delete t.anchor);for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(t,i,e){for(var s=this.opts,o=this.pDiff,n=this.vDiff,r=this.impulse1,a=this.impulse2,h=s.length,u=s.anchor||i.p,p=s.period,c=s.dampingRatio,f=0;f<t.length;f++){var l=t[f],d=l.p,m=l.v,v=l.m,g=l.mInv;o.set(d.sub(u));var y=o.norm()-h;if(0==y)return;if(i){var x=i.mInv,S=i.v;n.set(m.sub(S));var w=1/(g+x)}else{n.set(m);var w=v}if(0==this.opts.period)var b=0,T=1;else var M=4*w*Math.PI*Math.PI/(p*p),z=4*w*Math.PI*c/p,T=e*M/(z+e*M),b=1/(z+e*M);var C=T/e*y;o.normalize(-C).sub(n).mult(e/(b+e/w)).put(r),l.applyImpulse(r),i&&(r.mult(-1).put(a),i.applyImpulse(a))}},s.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},e.exports=s}),
define("famous-physics/constraints/Surface",["require","exports","module","../math/vector"],function(t,i,e){function s(t){this.opts={f:void 0,df:void 0,dampingRatio:0,period:0},t&&this.setOpts(t),this.J=new o,this.impulse=new o,this.eps=1e-7}var o=t("../math/vector");s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(t,i,e){for(var s=this.impulse,o=this.J,n=this.opts.f,r=this.opts.df,a=0,h=0;h<t.length;h++){var u=t[h],p=u.v,c=u.p,f=u.m;if(0==this.opts.period)var l=0,d=1;else var m=4*f*Math.PI*this.opts.dampingRatio/this.opts.period,v=4*f*Math.PI*Math.PI/(this.opts.period*this.opts.period),l=1/(m+e*v),d=e*v/(m+e*v);if(void 0===r){var g=this.eps,y=n(c.x,c.y,c.z),x=(n(c.x+g,c.y,c.z)-y)/g,S=(n(c.x,c.y+g,c.z)-y)/g,w=(n(c.x,c.y,c.z+g)-y)/g;o.setXYZ(x,S,w)}else o.setXYZ.apply(o,r(c.x,c.y,c.z));var b=d/e*n(c.x,c.y,c.z),T=-(o.dot(p)+b)/(l+e*o.normSquared()/f);s.set(o.mult(e*T)),u.applyImpulse(s),a+=Math.abs(T)}return a},s.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},e.exports=s}),
define("famous-physics/constraints/Wall",["require","exports","module","../math/vector"],function(t,i,e){function s(t){this.opts={restitution:.7,k:0,n:new o,d:0,onContact:s.ON_CONTACT.REFLECT},t&&this.setOpts(t),this.diff=new o,this.impulse=new o,this.slop=-1}var o=t("../math/vector");s.ON_CONTACT={REFLECT:0,WRAP:1,ABSORB:2},s.prototype.setOpts=function(t){void 0!==t.n&&(this.opts.n=new o(t.n),delete t.n);for(var i in t)this.opts[i]=t[i]},s.prototype.getNormalVelocity=function(t){var i=this.opts.n;return t.dot(i)},s.prototype.getDistance=function(t){var i=this.opts.n,e=this.opts.d;return t.dot(i)+e},s.prototype.onEnter=function(t,i,e){var o=t.p,n=t.v,r=t.m,a=this.opts.n,h=this.opts.onContact,u=this.opts.restitution,p=this.impulse,c=this.opts.k,f=0;if(h==s.ON_CONTACT.REFLECT){var l=i<this.slop?-((1+u)*a.dot(n)+c/e*(i-this.slop))/(r*e+f):-((1+u)*a.dot(n))/(r*e+f);p.set(a.mult(e*l)),t.applyImpulse(p),o.add(a.mult(-i),o)}h==s.ON_CONTACT.WRAP,h==s.ON_CONTACT.ABSORB,this.opts.callback&&this.opts.callback(t)},s.prototype.onExit=function(t,i){var e=this.opts.onContact,o=t.p,n=this.opts.n;e==s.ON_CONTACT.REFLECT?o.add(n.mult(-i),o):e==s.ON_CONTACT.WRAP||e==s.ON_CONTACT.ABSORB,this.opts.callback&&this.opts.callback(t)},s.prototype.applyConstraint=function(t,i,e){for(var s=this.opts.n,o=0;o<t.length;o++){var n=t[o],r=n.p,a=n.v,h=n.r||0,u=this.getDistance(r.add(s.mult(-h))),p=this.getNormalVelocity(a);0>u&&(0>p?this.onEnter(n,u,e):this.onExit(n,u,e))}},e.exports=s}),
define("famous-physics/constraints/Walls",["require","exports","module","famous-physics/math/vector","famous-physics/constraints/Wall"],function(t,i,e){function s(t){this.opts={sides:[s.SIDES.LEFT,s.SIDES.RIGHT,s.SIDES.TOP,s.SIDES.BOTTOM],size:[window.innerWidth,window.innerHeight,0],restitution:1},this.walls=[],t&&this.setOpts(t),this.addWalls(this.opts.sides)}var o=t("famous-physics/math/vector"),n=t("famous-physics/constraints/Wall");s.SIDES={LEFT:0,RIGHT:1,TOP:2,BOTTOM:3,FRONT:4,BACK:5},s.prototype.setOpts=function(t){void 0!==t.size&&(this.setSize(t.size),delete t.size);for(var i in t)this.opts[i]=t[i]},s.prototype.setSize=function(t){this.forEachWall(function(i,e){(0==e||1==e)&&i.setOpts({d:t[0]/2}),(2==e||3==e)&&i.setOpts({d:t[1]/2}),(4==e||5==e)&&i.setOpts({d:t[2]/2})}),this.opts.size=t},s.prototype.addWalls=function(t){for(var i in t)this.addWall(t[i])},s.prototype.addWall=function(t){var i=this.opts.size,e={0:{n:new o(1,0,0),d:i[0]/2},1:{n:new o(-1,0,0),d:i[0]/2},2:{n:new o(0,1,0),d:i[1]/2},3:{n:new o(0,-1,0),d:i[1]/2},4:{n:new o(0,0,1),d:i[2]/2},5:{n:new o(0,0,-1),d:i[2]/2}},s=e[t];s.restitution=this.opts.restitution,this.walls.push(new n(s))},s.prototype.applyConstraint=function(t,i,e){this.forEachWall(function(s){s.applyConstraint(t,i,e)})},s.prototype.forEachWall=function(t){for(var i=0;i<this.walls.length;i++)t(this.walls[i],this.opts.sides[i])},s.prototype.rotateZ=function(t){this.forEachWall(function(i){var e=i.opts.n;e.rotateZ(t,e)})},e.exports=s}),
define("famous-physics/forces/Drag",["require","exports","module","famous-physics/math/vector"],function(t,i,e){function s(t){this.opts={strength:1},t&&this.setOpts(t),this.force=new o}var o=t("famous-physics/math/vector");s.prototype.applyForce=function(t){for(var i in t){var e=t[i],s=this.force;s.set(e.v.mult(-this.opts.strength)),e.applyForce(s)}},s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},e.exports=s}),
define("famous-physics/forces/Repulsion",["require","exports","module","famous-physics/math/vector"],function(t,i,e){function s(t){this.opts={strength:1,anchor:void 0,radii:{min:0,max:1/0},cutoff:0,cap:1/0,decayFunction:s.DECAY_FUNCTIONS.GRAVITY},t&&this.setOpts(t),this.setOpts(t),this.force=new o,this.disp=new o}var o=t("famous-physics/math/vector");s.DECAY_FUNCTIONS={LINEAR:function(t,i){return Math.max(1-1/i*t,0)},MORSE:function(t,i){var e=0==i?100:i,s=t+e*(1-Math.log(2));return Math.max(1-Math.pow(1-Math.exp(s/e-1),2),0)},INVERSE:function(t,i){return 1/(1-i+t)},GRAVITY:function(t,i){return 1/(1-i+t*t)}},s.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor.p instanceof o&&(this.opts.anchor=t.anchor.p),t.anchor instanceof Array&&(this.opts.anchor=new o(t.anchor)),delete t.anchor);for(var i in t)this.opts[i]=t[i]},s.prototype.applyForce=function(t,i){var e=this.opts,s=this.force,o=this.disp,n=e.strength,r=e.anchor||i.p,a=e.cap,h=e.cutoff,u=e.radii.max,p=e.radii.min,c=e.decayFunction;if(0!=n)for(var f in t){var l=t[f];if(l!=i){var d=l.m,m=l.p;o.set(m.sub(r));var v=o.norm();u>v&&v>p&&(o.normalize(n*d*c(v,h),s).cap(a),l.applyForce(s))}}},s.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},e.exports=s}),
define("famous-physics/forces/Spring",["require","exports","module","famous-physics/math/vector"],function(t,i,e){function s(t){this.opts={strength:1,stiffness:0,period:0,dampingRatio:0,length:0,lMin:0,lMax:1/0,anchor:void 0,forceFunction:s.FORCE_FUNCTIONS.HOOK,callback:void 0,callbackTolerance:1e-7},t&&this.setOpts(t),this.force=new h,this.init(),this._canFireCallback=void 0}function o(t){this.forceFunction=t}function n(t){void 0!==t.dampingRatio&&t.period&&(t.stiffness=Math.pow(2*Math.PI/t.period,2))}function r(t){void 0!==t.dampingRatio&&t.period&&(t.damping=4*Math.PI*t.dampingRatio/t.period)}function a(t,i){return.5*t*i*i}var h=t("famous-physics/math/vector");s.FORCE_FUNCTIONS={FENE:function(t){var i=this.opts.lMax,e=.99*i,s=Math.max(Math.min(t,e),-e);return s/(1-s*s/(i*i))},HOOK:function(t){return t}},s.prototype.init=function(){var t=this.opts;o.call(this,t.forceFunction),n.call(this,t),r.call(this,t)},s.prototype.applyForce=function(t,i){for(var e=this.force,s=this.opts,o=s.stiffness,n=s.damping,r=s.dampingRatio,h=s.period,u=s.length,p=s.anchor||i.p,c=s.callback,f=0;f<t.length;f++){var l=t[f],d=p.sub(l.p),m=d.norm()-u;if(0==m)return;if(void 0!==r&&h){var v=l.m;o*=v,n*=v}if(e.set(d.normalize(o*this.forceFunction(m))),n&&(i?e.add(l.v.sub(i.v).mult(-n),e):e.add(l.v.mult(-n),e)),l.applyForce(e),i&&i.applyForce(e.mult(-1)),this.opts.callback){var g=l.getEnergy()+a(o,m);this.fireCallback(l,c,g)}}},s.prototype.fireCallback=function(t,i,e){e<this.opts.callbackTolerance?(this._canFireCallback&&i.call(this,t),this._canFireCallback=!1):this._canFireCallback=!0},s.prototype.getEnergy=function(t,i){var e=this.opts;t=t[0];var s=e.length,o=e.anchor||i.p,n=e.strength,r=o.sub(t.p),a=r.norm()-s;return.5*n*a*a},s.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor.p instanceof h&&(this.opts.anchor=t.anchor.p),t.anchor instanceof h&&(this.opts.anchor=t.anchor),t.anchor instanceof Array&&(this.opts.anchor=new h(t.anchor))),void 0!==t.strength&&(this.opts.strength=t.strength),void 0!==t.stiffness&&(this.opts.stiffness=t.stiffness),void 0!==t.period&&(this.opts.period=t.period),void 0!==t.dampingRatio&&(this.opts.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.opts.length=t.length),void 0!==t.lMin&&(this.opts.lMin=t.lMin),void 0!==t.lMax&&(this.opts.lMax=t.lMax),void 0!==t.forceFunction&&(this.opts.forceFunction=t.forceFunction),void 0!==t.callback&&(this.opts.callback=t.callback),void 0!==t.callbackTolerance&&(this.opts.callbackTolerance=t.callbackTolerance),this.init()},s.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init(),t.on("change",function(t){this.opts[i]=t.value,this.init()}.bind(this))},e.exports=s}),
define("famous-physics/forces/VectorField",["require","exports","module","../math/vector"],function(t,i,e){function s(t){this.opts={strength:1,field:s.FIELDS.GRAVITY},t&&this.setOpts(t),this.setFieldOptions(this.opts.field),this.timeDependent=3==this.opts.field.length,this.tOrig=void 0,this.register=new o(0,0,0),this.force=new o(0,0,0)}var o=t("../math/vector");s.FIELDS={GRAVITY:function(t,i){t.set(i.direction)},RADIAL_GRAVITY:function(t){t.mult(-1,t)},SPHERE_ATTRACTOR:function(t,i){t.mult((i.radius-t.norm())/t.norm(),t)},POINT_ATTRACTOR:function(t,i){t.set(i.p.sub(t))}},s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.evaluate=function(t,i){return this.register.set(t),this.opts.field(this.register,this.opts,i),this.register},s.prototype.applyForce=function(t){var i,e=this.force;this.timeDependent?(this.tOrig&&(this.tOrig=Date.now()),i=.001*(Date.now()-this.tOrig)):i=void 0;for(var s=0;s<t.length;s++){var o=t[s];e.set(this.evaluate(o.p,i).mult(o.m*this.opts.strength)),o.applyForce(e)}},s.prototype.setFieldOptions=function(t){var i=s.FIELDS;t==i.GRAVITY&&(this.opts.direction||(this.opts.direction=new o(0,1,0))),t==i.POINT_ATTRACTOR&&(this.opts.p||(this.opts.p=new o(0,0,0))),t==i.SPHERE_ATTRACTOR&&(this.opts.radius||(this.opts.radius=1))},s.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},e.exports=s}),
define("famous-physics/integrator/SymplecticEuler",["require","exports","module"],function(t,i,e){function s(t){this.opts={vCap:1/0,aCap:1/0},t&&this.setOpts(t)}s.prototype.integrate=function(t,i){var e=t.p,s=t.v,o=t.a;o.isZero()||(o.cap(this.aCap),s.add(o.mult(i),s),s.cap(this.vCap)),s.isZero()||e.add(s.mult(i),e)},s.prototype.integrateVelocity=function(t,i){var e=t.v,s=t.a;s.isZero()||(s.cap(this.opts.aCap),e.add(s.mult(i),e))},s.prototype.integratePosition=function(t,i){var e=t.p,s=t.v;s.isZero()||(s.cap(this.opts.vCap),e.add(s.mult(i),e))},s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},e.exports=s}),
define("famous-physics/integrator/Verlet",["require","exports","module","../math/vector"],function(t,i,e){function s(t){t=t||{},this.vCap=t.vCap||1/0,this.aCap=t.aCap||1/0,this.drag=t.drag||1,this.diff=new o,this.pOldCopy=new o,this.dragVector=new o}var o=t("../math/vector");s.prototype.integrate=function(t,i,e){var s=t.pOld,o=t.p,n=t.a;if(this.diff.set(o.sub(s)),e){var r=t.v;t.hasImmunity("velocity")||r.add(n.mult(.5*i),r),t.hasImmunity("position")||(s.set(o),o.add(r.mult(i),o))}else this.pOldCopy.set(s),t.hasImmunity("position")||(this.dragVector.set(this.diff.mult(this.drag)),s.set(o),o.add(n.mult(i*i),o),o.add(this.dragVector,o))},s.prototype.integrateVelocity=function(t,i,e){var s=t.p,o=t.a;if(e){var n=t.v;n.add(o.mult(.5*i),n),s.add(n.mult(i),s)}else s.add(o.mult(i*i),s)},s.prototype.integratePosition=function(t){var i=t.p,e=t.pOld,s=this.pOldCopy;s.set(e),e.set(i),i.add(i.sub(s).mult(this.drag),i)},e.exports=s}),
define("famous-physics/math/GaussSeidel",["require","exports","module"],function(t,i,e){function s(t,i){this.numIterations=t||10,this.tolerance=i||1e-7,this.prevX=[],this.x=[]}function o(){for(var t=0,i=this.x.length,e=0;i>e;e++)t+=Math.pow(this.prevX[e]-this.x[e],2)/(this.x[e]*this.x[e]);return Math.sqrt(t)}s.prototype.solve=function(t,i){for(var e,s=this.numIterations,n=i.length,r=this.x,a=this.prevX,h=0;n>h;h++)this.x[h]=0;for(var u=0,p=1/0;s>u&&p>this.tolerance;){for(var h=0;n>h;h++){a[h]=r[h],e=0;for(var c=0;n>c;c++)c!=h&&(e+=t[h][c]*r[c]);r[h]=(i[h]-e)/t[h][h]}p=o(),u++}return r},e.exports=s}),
define("famous-physics/math/matrix",["require","exports","module"],function(require,exports,module){function Matrix(t,i,e,s){this.nRows=t,this.nCols=i,this.values=e||[[]],s&&this.loop(s)}Matrix.prototype={loop:function(t){for(var i=this.values,e=0;e<this.nRows;e++){i[e]=[];for(var s=0;s<this.nCols;s++)i[e][s]=t(e,s)}return this},set:function(t){return this.values=t,this},create:function(t){return this.loop(t)},identity:function(){return this.loop(function(t,i){return t==i?1:0})},print:function(){for(var row=0;row<this.nRows;row++){for(var str="console.log(",col=0;col<this.nCols;col++)str+="this.values["+row+"]["+col+"].toFixed(1)",col<this.nCols-1&&(str+=",");str+=")",eval(str)}},rightMult:function(t,i){t.nRows!=this.nCols&&console.warn("cant multiply");for(var e=this.values,s=t.values,o=this.nRows,n=t.nCols,r=[],a=0;o>a;a++){r[a]=[];for(var h=0;n>h;h++){for(var u=0,p=0;p<this.nCols;p++)u+=e[a][p]*s[p][h];r[a][h]=u}}return i?i.set(r):new Matrix(o,n).set(r)},vMult:function(t){for(var i=t.length,e=[],s=0;s<this.nRows;s++){for(var o=0,n=0;i>n;n++)o+=this.values[s][n]*t[n];e[s]=o}return e},diag:function(t){var i=function(i,e){return i==e?t[i]:0};return this.loop(i)},transpose:function(t){var i=function(t,i){return this.values[i][t]}.bind(this);return t?t.loop(i):new Matrix(this.nCols,this.nRows,[[]],i)}},module.exports=Matrix}),
define("famous-physics/math/quaternion",["require","exports","module","famous/Matrix"],function(t,i,e){function s(t,i,e,s){return this.w=t||1,this.x=i||0,this.y=e||0,this.z=s||0,this}t("famous/Matrix"),s.prototype.makeFromAngleAndAxis=function(t,i){var e=.5*t,s=Math.sin(e);return this.x=s*i.x,this.y=s*i.y,this.z=s*i.z,this.w=Math.cos(e),this},s.prototype.setWXYZ=function(t,i,e,s){this.w=t,this.x=i,this.y=e,this.z=s},s.prototype.set=function(t){this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z},s.prototype.clear=function(){this.w=1,this.x=0,this.y=0,this.z=0},s.prototype.normalize=function(){var t=Math.sqrt(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z);if(0==t)this.w=1,this.x=this.y=this.z=0;else{var i=1/t;this.w*=i,this.x*=i,this.y*=i,this.z*=i}return this},s.prototype.getMatrix=function(){return this.normalize(),[1-2*this.y*this.y-2*this.z*this.z,2*this.x*this.y-2*this.z*this.w,2*this.x*this.z+2*this.y*this.w,0,2*this.x*this.y+2*this.z*this.w,1-2*this.x*this.x-2*this.z*this.z,2*this.y*this.z-2*this.x*this.w,0,2*this.x*this.z-2*this.y*this.w,2*this.y*this.z+2*this.x*this.w,1-2*this.x*this.x-2*this.y*this.y,0,0,0,0,1]},s.prototype.multiply=function(t,i){return i=i||this.register,i.w=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z,i.x=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,i.y=this.w*t.y-this.x*t.z+this.y*t.w+this.z*t.x,i.z=this.w*t.z+this.x*t.y-this.y*t.x+this.z*t.w,i},s.prototype.register=new s(0,0,0,0),s.prototype.zero=new s(0,0,0,0),s.prototype.one=new s(1,1,1,1),e.exports=s}),
define("famous-physics/math/Random",["require","exports","module"],function(t,i,e){function s(t,i){return t+Math.random()*(i-t)}function o(t,i){return Math.floor(t+Math.random()*(i-t+1))}e.exports={integer:function(t,i,e){if(t=void 0!==t?t:0,i=void 0!==i?i:1,void 0!==e){for(var s=[],n=0;e>n;n++)s.push(o(t,i));return s}return o(t,i)},range:function(t,i,e){if(t=void 0!==t?t:0,i=void 0!==i?i:1,void 0!==e){for(var o=[],n=0;e>n;n++)o.push(s(t,i));return o}return s(t,i)},sign:function(t){return t=void 0!==t?t:.5,Math.random()<t?1:-1},bool:function(t){return t=void 0!==t?t:.5,Math.random()<t}}}),
define("famous-physics/math/vector",["require","exports","module"],function(t,i,e){function s(t,i,e){return 1==arguments.length?(t instanceof Array&&this.setXYZ.apply(this,t),t instanceof s&&this.set(t)):(this.x=t||0,this.y=i||0,this.z=e||0),this}s.prototype.add=function(t,i){return i=i||this.register,i.setXYZ(this.x+t.x,this.y+t.y,this.z+t.z)},s.prototype.sub=function(t,i){return i=i||this.register,i.setXYZ(this.x-t.x,this.y-t.y,this.z-t.z)},s.prototype.mult=function(t,i){return i=i||this.register,i.setXYZ(t*this.x,t*this.y,t*this.z)},s.prototype.div=function(t,i){return this.mult(1/t,i)},s.prototype.cross=function(t,i){return i=i||this.register,i.setXYZ(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},s.prototype.equals=function(t){return t.x==this.x&&t.y==this.y&&t.z==this.z},s.prototype.rotate=function(t,i){var e=t.x,s=t.y,o=t.z;return this.rotateX(e,i).rotateY(s,i).rotateZ(o,i)},s.prototype.rotateX=function(t,i){i=i||this.register;var e=this.x,s=this.y,o=this.z,n=Math.cos(t),r=Math.sin(t);return i.setXYZ(e,-o*r+s*n,o*n-s*r)},s.prototype.rotateY=function(t,i){i=i||this.register;var e=this.x,s=this.y,o=this.z,n=Math.cos(t),r=Math.sin(t);return i.setXYZ(-o*r+e*n,s,o*n+e*r)},s.prototype.rotateZ=function(t,i){i=i||this.register;var e=this.x,s=this.y,o=this.z,n=Math.cos(t),r=Math.sin(t);return i.setXYZ(-s*r+e*n,s*n+e*r,o)},s.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},s.prototype.normSquared=function(){return this.dot(this)},s.prototype.norm=function(){return Math.sqrt(this.normSquared())},s.prototype.normalize=function(t,i){t=t||1,i=i||this.register;var e=1e-7,s=this.norm();return Math.abs(s)>e?this.mult(t/s,i):i.setXYZ(t,0,0)},s.prototype.clone=function(){return new s(this.x,this.y,this.z)},s.prototype.isZero=function(){return!this.x&&!this.y&&!this.z},s.prototype.set=function(t){return t instanceof Array?(this.x=t[0],this.y=t[1],this.z=t[2]||0):(this.x=t.x,this.y=t.y,this.z=t.z),this!=this.register&&this.register.clear(),this},s.prototype.put=function(t){t.set(this.register)},s.prototype.setXYZ=function(t,i,e){return this.register.clear(),this.x=t,this.y=i,this.z=e,this},s.prototype.clear=function(){this.x=0,this.y=0,this.z=0},s.prototype.cap=function(t){if(1/0==t)return this;var i=this.norm();return i>t&&this.normalize().mult(t,this),this},s.prototype.project=function(t,i){return i=i||this.register,t.mult(this.dot(t),i)},s.prototype.reflect=function(t,i){return i=i||this.register,t.normalize(),this.sub(this.project(t).mult(2),i)},s.prototype.toArray=function(){return[this.x,this.y,this.z]},s.prototype.get=function(){return this.toArray()},s.prototype.register=new s(0,0,0),s.prototype.zero=new s(0,0,0),s.prototype.one=new s(1,1,1),e.exports=s}),
define("famous-physics/math/vectorArray",["require","exports","module"],function(t,i,e){function s(t,i,e){return this.v=t instanceof Array?t.splice(0):t instanceof s?t.v:[t||0,i||0,e||0],this}s.prototype.add=function(t,i){i=i||this.register;var e=this.v,s=t.v;return i.setXYZ(e[0]+s[0],e[1]+s[1],e[2]+s[2])},s.prototype.sub=function(t,i){i=i||this.register;var e=this.v,s=t.v;return i.setXYZ(e[0]-s[0],e[1]-s[1],e[2]-s[2])},s.prototype.mult=function(t,i){i=i||this.register;var e=this.v;return i.setXYZ(t*e[0],t*e[1],t*e[2])},s.prototype.div=function(t,i){return this.mult(1/t,i)},s.prototype.cross=function(t,i){var e=this.v,s=t.v;return i=i||this.register,i.setXYZ(e[1]*s[2]-e[2]*s[1],e[2]*s[0]-e[0]*s[2],e[0]*s[1]-e[1]*s[0])},s.prototype.rotate=function(t,i,e,s){return this.rotateX(t,s).rotateY(i,s).rotateZ(e,s)},s.prototype.rotateX=function(t,i){i=i||this.register;var e=this.v,s=e[0],o=e[1],n=e[2],r=Math.cos(t),a=Math.sin(t);return i.setXYZ(s,-n*a+o*r,n*r-o*a)},s.prototype.rotateY=function(t,i){i=i||this.register;var e=this.v,s=e[0],o=e[1],n=e[2],r=Math.cos(t),a=Math.sin(t);return i.setXYZ(-n*a+s*r,o,n*r+s*a)},s.prototype.rotateZ=function(t,i){i=i||this.register;var e=this.v,s=e[0],o=e[1],n=e[2],r=Math.cos(t),a=Math.sin(t);return i.setXYZ(-o*a+s*r,o*r+s*a,n)},s.prototype.dot=function(t){var i=this.v,e=t.v;return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]},s.prototype.normSquared=function(){return this.dot(this)},s.prototype.norm=function(){return Math.sqrt(this.normSquared())},s.prototype.normalize=function(t,i){t=t||1,i=i||this.register;var e=1e-7,s=this.norm();return Math.abs(s)>e?this.mult(t/s,i):i.setXYZ(t,0,0)},s.prototype.clone=function(){return new s(this.v)},s.prototype.isZero=function(){var t=this.v;return!t[0]&&!t[1]&&!t[2]},s.prototype.get=function(){return this.v},s.prototype.set=function(t){var i=t.v,e=this.v;return e[0]=i[0],e[1]=i[1],e[2]=i[2],this!=this.register&&this.register.clear(),this},s.prototype.setXYZ=function(t,i,e){return this.register.clear(),this.v=[t,i,e],this},s.prototype.clear=function(){this.v=[0,0,0]},s.prototype.cap=function(t){if(1/0==t)return this;var i=this.norm();return i>t&&this.normalize().mult(t,this),this},s.prototype.project=function(t,i){return i=i||this.register,t.mult(this.dot(t),i)},s.prototype.reflect=function(t,i){return i=i||this.register,t.normalize(),this.sub(this.project(t).mult(2),i)},s.prototype.register=new s(0,0,0),e.exports=s}),
define("famous-physics/utils/PhysicsTracker",["require","exports","module","famous-sync/GenericSync","famous/EventHandler","famous-misc/Timer"],function(t,i,e){function s(t,i){this.particle=t,this.opts={scale:1},i&&this.setOpts(i),this.genericSync=new h(function(){return this.particle.getPos()}.bind(this)),this.eventOutput=new u,u.setInputHandler(this,this.genericSync),u.setOutputHandler(this,this.eventOutput),this.originalImmunity=t.immunity,this.timer=p,this.moving=!1,o.call(this)}function o(){this.genericSync.on("start",n.bind(this)),this.genericSync.on("update",r.bind(this)),this.genericSync.on("end",a.bind(this))}function n(t){var i=this.particle;t.particle=i,this.originalImmunity=i.immunity,i.immunity=!0,i.v.clear(),this.eventOutput.emit("start",t)}function r(t){this.moving=!0;var i=this.particle;i.setPos(t.p),i.setVel(t.v,!0),this.eventOutput.emit("update",t);var e=function(t){var e=this.particle.p;this.moving||t[0]!==e.x||(i.v.clear(),this.moving=!1)};this.timer.after(e.bind(this,t.p),2)}function a(t){this.moving=!1;var i=this.particle;t.particle=i;var e=this.opts.scale;i.setVel([t.v[0]*e,t.v[1]*e],!0),i.immunity=this.originalImmunity,this.eventOutput.emit("end",t)}var h=t("famous-sync/GenericSync"),u=t("famous/EventHandler"),p=t("famous-misc/Timer");s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},e.exports=s}),
define("famous-physics/utils/PhysicsTransition",["require","exports","module","famous-physics/PhysicsEngine","famous-physics/forces/Spring","famous-physics/math/vector"],function(t,i,e){function s(t){this.opts={period:300,dampingRatio:.5,anchor:new r(0,0,0),callback:void 0,callbackTolerance:1e-7},t&&this.setOpts(t),this.spring=new n(this.opts),this.PE=new o,this.particle=this.PE.createParticle({p:this.opts.anchor}),this.PE.attach(this.spring,this.particle),this.disp=new r,this.totalDisp=new r,this._anchor=this.opts.anchor.clone(),this._prevAnchor=this.opts.anchor.clone()}var o=t("famous-physics/PhysicsEngine"),n=t("famous-physics/forces/Spring"),r=t("famous-physics/math/vector");s.forceFunctions=n.forceFunctions,s.prototype.step=function(){this.PE.step()},s.prototype.reset=function(t){void 0===t&&(t=this._prevAnchor.toArray()),this.setPosition(t),this.setParticlePosition(t),this.particle.v.clear()},s.prototype.set=function(t){void 0!==t.v&&this.setVelocity(t.v),void 0!==t.p&&this.setPosition(t.p)},s.prototype.setPosition=function(t){this._prevAnchor.set(this._anchor),this._anchor.setXYZ.apply(this._anchor,t),this.totalDisp.set(this._anchor.sub(this._prevAnchor)),this.spring.setOpts({anchor:t})},s.prototype.setParticlePosition=function(t){this.PE.setPos(t)},s.prototype.setVelocity=function(t){this.PE.setVel(t)},s.prototype.getVelocity=function(){return this.step(),this.PE.getVel()},s.prototype.getPosition=function(){return this.step(),this.PE.getPos()},s.prototype.getTransform=function(){return this.step(),this.PE.getTransform()},s.prototype.get=function(){var t=this.disp,i=this.totalDisp;if(this.step(),t.set(this.particle.p.sub(this._prevAnchor)),t.isZero())return 0;var e=i.norm();if(0==e)return 0;var s=t.norm(),o=t.dot(i)>0?1:-1;return o*s/e},s.prototype.render=function(t){return{target:t,transform:this.getTransform()}},s.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor.p instanceof r&&(this.opts.anchor=t.anchor.p),t.anchor instanceof r&&(this.opts.anchor=t.anchor),t.anchor instanceof Array&&(this.opts.anchor=new r(t.anchor))),void 0!==t.period&&(this.opts.period=t.period),void 0!==t.dampingRatio&&(this.opts.dampingRatio=t.dampingRatio),void 0!==t.callback&&(this.opts.callback=t.callback),void 0!==t.callbackTolerance&&(this.opts.callbackTolerance=t.callbackTolerance)},e.exports=s}),
define("famous-sync/GenericSync",["require","exports","module","famous/EventHandler","./TouchSync","./MouseSync","./ScrollSync"],function(t,i,e){function s(t,i){this.targetGet=t,this.eventInput=new n,n.setInputHandler(this,this.eventInput),this.eventOutput=new n,n.setOutputHandler(this,this.eventOutput),this._handlers=void 0,this.options={syncClasses:u},this._handlerOptions=this.options,i&&this.setOptions(i),this._handlers||o.call(this)}function o(){if(this._handlers)for(var t=0;t<this._handlers.length;t++)this.eventInput.unpipe(this._handlers[t]),this._handlers[t].unpipe(this.eventOutput);this._handlers=[];for(var t=0;t<this.options.syncClasses.length;t++){var i=this.options.syncClasses[t];this._handlers[t]=new i(this.targetGet,this._handlerOptions),this.eventInput.pipe(this._handlers[t]),this._handlers[t].pipe(this.eventOutput)}}var n=t("famous/EventHandler"),r=t("./TouchSync"),a=t("./MouseSync"),h=t("./ScrollSync"),u=[r,a,h];s.register=function(t){u.indexOf(t)<0&&u.push(t)},s.DIRECTION_X=0,s.DIRECTION_Y=1,s.DIRECTION_Z=2,s.prototype.setOptions=function(t){if(this._handlerOptions=t,t.syncClasses&&(this.options.syncClasses=t.syncClasses,o.call(this)),this._handlers)for(var i=0;i<this._handlers.length;i++)this._handlers[i].setOptions(this._handlerOptions)},e.exports=s}),
define("famous-sync/MouseSync",["require","exports","module","famous/EventHandler"],function(t,i,e){function s(t,i){this.targetGet=t,this.options={direction:void 0,rails:!1,scale:1,stallTime:50},i?this.setOptions(i):this.setOptions(this.options),this.input=new h,this.output=new h,this._boundMove=void 0,this._boundEnd=void 0,this._mouseDown=!1,h.setInputHandler(this,this.input),h.setOutputHandler(this,this.output),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0,this.input.on("mousedown",o.bind(this)),this.input.on("mousemove",n.bind(this)),this.input.on("mouseup",r.bind(this)),this.input.on("mouseleave",a.bind(this))}function o(t){this._mouseDown=!0,t.preventDefault(),this._prevCoord=[t.clientX,t.clientY],this._prevTime=Date.now(),this._prevVel=void 0!==this.options.direction?0:[0,0],this.output.emit("start")}function n(t){if(this._prevCoord){var i=this._prevCoord,e=this._prevTime,o=[t.clientX,t.clientY],n=Date.now(),r=o[0]-i[0],a=o[1]-i[1];this.options.rails&&(Math.abs(r)>Math.abs(a)?a=0:r=0);var h,u,p=Math.max(n-e,8),c=r/p,f=a/p,l=this.targetGet(),d=this.options.scale;this.options.direction==s.DIRECTION_X?(h=l+d*r,u=d*c):this.options.direction==s.DIRECTION_Y?(h=l+d*a,u=d*f):(h=[l[0]+d*r,l[1]+d*a],u=[d*c,d*f]),this.output.emit("update",{p:h,v:u}),this._prevCoord=o,this._prevTime=n,this._prevVel=u}}function r(){if(this._mouseDown=!1,this._prevCoord){var t=this._prevTime,i=Date.now();i-t>this.options.stallTime&&(this._prevVel=void 0==this.options.direction?[0,0]:0);var e=this.targetGet();this.output.emit("end",{p:e,v:this._prevVel}),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0}}function a(){this._mouseDown&&(this._boundMove=this._boundMove||function(t){n.call(this,t)}.bind(this),this._boundEnd=this._boundEnd||function(t){r.call(this,t),document.removeEventListener("mousemove",this._boundMove),document.removeEventListener("mouseup",this._boundEnd)}.bind(this),document.addEventListener("mousemove",this._boundMove),document.addEventListener("mouseup",this._boundEnd))}var h=t("famous/EventHandler");s.DIRECTION_X=0,s.DIRECTION_Y=1,s.prototype.getOptions=function(){return this.options},s.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime)},e.exports=s}),
define("famous-sync/PinchSync",["require","exports","module","./TwoFingerSync"],function(t,i,e){function s(t,i){o.call(this,t,i),this._dist=void 0}var o=t("./TwoFingerSync");s.prototype=Object.create(o.prototype),e.exports=s}),
define("famous-sync/RotateSync",["require","exports","module","./TwoFingerSync"],function(t,i,e){function s(t,i){o.call(this,t,i),this._angle=void 0}var o=t("./TwoFingerSync");s.prototype=Object.create(o.prototype),e.exports=s}),
define("famous-sync/ScaleSync",["require","exports","module","./TwoFingerSync"],function(t,i,e){function s(t,i){n.call(this,t,i),this._startDist=void 0,this._prevScale=void 0,this.input.on("pipe",o.bind(this))}function o(){this.touchAId=void 0,this.touchBId=void 0}var n=t("./TwoFingerSync");s.prototype=Object.create(n.prototype),e.exports=s}),
define("famous-sync/ScrollSync",["require","exports","module","famous/EventHandler","famous/Engine"],function(t,i,e){function s(t,i){this.targetGet=t,this.options={direction:void 0,rails:!1,scale:1,stallTime:50},i?this.setOptions(i):this.setOptions(this.options),this.input=new r,this.output=new r,r.setInputHandler(this,this.input),r.setOutputHandler(this,this.output),this._prevTime=void 0,this._prevVel=void 0,this._lastFrame=void 0,this.input.on("mousewheel",n.bind(this)),a.on("prerender",o.bind(this)),this.inProgress=!1}function o(){var t=Date.now();if(this.inProgress&&t-this._prevTime>this.options.stallTime){var i=this.targetGet();this.inProgress=!1,this.output.emit("end",{p:i,v:this._prevVel})}}function n(t){t.preventDefault(),this.inProgress||(this.inProgress=!0,this.output.emit("start"));var i=this._prevTime,e=t.wheelDeltaX,o=t.wheelDeltaY,n=Date.now();this.options.rails&&(Math.abs(e)>Math.abs(o)?o=0:e=0);var r,a,h=Math.max(n-i,8),u=e/h,p=o/h,c=this.targetGet(),f=this.options.scale;this.options.direction==s.DIRECTION_X?(r=c+f*e,a=f*u):this.options.direction==s.DIRECTION_Y?(r=c+f*o,a=f*p):(r=[c[0]+f*e,c[1]+f*o],a=[f*u,f*p]),this.output.emit("update",{p:r,v:a}),this._prevTime=n,this._prevVel=a}var r=t("famous/EventHandler"),a=t("famous/Engine");s.DIRECTION_X=0,s.DIRECTION_Y=1,s.prototype.getOptions=function(){return this.options},s.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime)},e.exports=s}),
define("famous-sync/TouchSync",["require","exports","module","famous-misc/TouchTracker","famous/EventHandler"],function(t,i,e){function s(t,i){this.targetGet=t,this.output=new h,this.touchTracker=new a,this.options={direction:void 0,rails:!1,scale:1},i?this.setOptions(i):this.setOptions(this.options),h.setOutputHandler(this,this.output),h.setInputHandler(this,this.touchTracker),this.touchTracker.on("trackstart",o.bind(this)),this.touchTracker.on("trackmove",n.bind(this)),this.touchTracker.on("trackend",r.bind(this))}function o(t){this.output.emit("start",{count:t.count,touch:t.touch.identifier})}function n(t){var i=t.history,e=i[i.length-2].timestamp,o=i[i.length-1].timestamp,n=i[i.length-2].touch,r=i[i.length-1].touch,a=r.pageX-n.pageX,h=r.pageY-n.pageY;this.options.rails&&(Math.abs(a)>Math.abs(h)?h=0:a=0);var u=Math.max(o-e,8),p=a/u,c=h/u;if(i.length>2)var f=i[i.length-3].touch,l=(r.pageX-2*n.pageX+f.pageX)/(u*u),d=(r.pageY-2*n.pageY+f.pageY)/(u*u);else var l=0,d=0;var m,v,g,y=this.targetGet(),x=this.options.scale;this.options.direction==s.DIRECTION_X?(m=y+x*a,v=x*p,g=x*c):this.options.direction==s.DIRECTION_Y?(m=y+x*h,v=x*c,g=x*d):(m=[y[0]+x*a,y[1]+x*h],v=[x*p,x*c],g=[x*l,x*d]),this.output.emit("update",{p:m,v:v,a:g,touch:t.touch.identifier})}function r(t){var i=void 0!==this.options.direction?0:[0,0],e=t.history,o=t.count,n=this.targetGet();if(e.length>1){var r=e[e.length-2].timestamp,a=e[e.length-1].timestamp,h=e[e.length-2].touch,u=e[e.length-1].touch,p=u.pageX-h.pageX,c=u.pageY-h.pageY;this.options.rails&&(Math.abs(p)>Math.abs(c)?c=0:p=0);var i,f=Math.max(a-r,1),l=p/f,d=c/f,m=this.options.scale;i=this.options.direction==s.DIRECTION_X?m*l:this.options.direction==s.DIRECTION_Y?m*d:[m*l,m*d]}this.output.emit("end",{p:n,v:i,count:o,touch:t.touch.identifier})}var a=t("famous-misc/TouchTracker"),h=t("famous/EventHandler");s.DIRECTION_X=0,s.DIRECTION_Y=1,s.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale)},s.prototype.getOptions=function(){return this.options},e.exports=s}),
define("famous-sync/TwoFingerSync",["require","exports","module","famous/EventHandler"],function(t,i,e){function s(t,i){this.targetGet=t,this.options={scale:1},i?this.setOptions(i):this.setOptions(this.options),this.input=new o,this.output=new o,o.setInputHandler(this,this.input),o.setOutputHandler(this,this.output),this.touchAId=void 0,this.posA=void 0,this.timestampA=void 0,this.touchBId=void 0,this.posB=void 0,this.timestampB=void 0,this.input.on("touchstart",this.handleStart.bind(this)),this.input.on("touchmove",this.handleMove.bind(this)),this.input.on("touchend",this.handleEnd.bind(this)),this.input.on("touchcancel",this.handleEnd.bind(this))}var o=t("famous/EventHandler");s.prototype.getOptions=function(){return this.options},s.prototype.setOptions=function(t){void 0!==t.scale&&(this.options.scale=t.scale)},s.prototype.handleStart=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];this.touchAId?this.touchBId||(this.touchBId=e.identifier,this.posB=[e.pageX,e.pageY],this.timestampB=Date.now(),_startUpdate()):(this.touchAId=e.identifier,this.posA=[e.pageX,e.pageY],this.timestampA=Date.now())}},s.prototype.handleMove=function(t){if(this.touchAId&&this.touchBId){for(var i,e=this.timestampA,s=this.timestampB,o=0;o<t.changedTouches.length;o++){var n=t.changedTouches[o];n.identifier==this.touchAId?(this.posA=[n.pageX,n.pageY],this.timestampA=Date.now(),i=this.timestampA-e):n.identifier==this.touchBId&&(this.posB=[n.pageX,n.pageY],this.timestampB=Date.now(),i=this.timestampB-s)}i&&_moveUpdate(i)}},s.prototype.handleEnd=function(t){for(var i=this.targetGet(),e=this.options.scale,s=0;s<t.changedTouches.length;s++){var o=t.changedTouches[s];(o.identifier==this.touchAId||o.identifier==this.touchBId)&&(this.touchAId&&this.touchBId&&this.output.emit("end",{p:i,v:e*this._vel,touches:[this.touchAId,this.touchBId],angle:this._angle}),this.touchAId=void 0,this.touchBId=void 0)}},e.exports=s}),
define("famous-utils/Time",["require","exports","module","famous/Engine"],function(t,i,e){function s(t,i){var e=Date.now(),s=function(){var s=Date.now();s-e>=i&&(t(),e=Date.now())};return h.on("prerender",s),s}function o(t){h.unbind("prerender",t)}function n(t,i,e){var s=Date.now(),o=function(){var n=Date.now(),r=(n-s)/t;return n-s>=t?(i(1),h.unbind("prerender",o),e&&e(),void 0):(i(r),void 0)};h.on("prerender",o)}function r(t,i){var e=Date.now(),s=function(){var o=Date.now();return o-e>=i?(h.unbind("prerender",s),t(),void 0):void 0};return h.on("prerender",s),s}function a(t){h.unbind("prerender",t)}var h=t("famous/Engine");e.exports={setInterval:s,removeInterval:o,executeOver:n,setTimeout:r,removeTimeout:a}}),
define("famous-utils/Utils",["require","exports","module","./Time"],function(t,i,e){var s=t("./Time"),o={rad2deg:function(t){return 57.2957795*t},deg2rad:function(t){return.0174532925*t},distance:function(t,i,e,s){var o=e-t,n=s-i;return Math.sqrt(o*o+n*n)},distance3D:function(t,i,e,s,o,n){var r=s-t,a=o-i,h=n-e;return Math.sqrt(r*r+a*a+h*h)},map:function(t,i,e,s,o,n){var r=(t-i)/(e-i)*(o-s)+s;return n&&(o>s?r>o?r=o:s>r&&(r=s):o>r?r=o:r>s&&(r=s)),r},perspective:function(t,i,e,s,o){var n=1/Math.tan(i/2),r=1/(s-o);return t[0]=n/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+s)*r,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*s*r,t[15]=0,t},clamp:function(t,i,e){return i>t?i:t>e?e:t},color:function(t,i,e,s){return"rgba("+Math.floor(t)+","+Math.floor(i)+","+Math.floor(e)+","+s+")"},backgroundTransparent:function(){return{"background-color":"transparent"}},backgroundColor:function(t,i,e,s){return{"background-color":"rgba("+Math.floor(t)+","+Math.floor(i)+","+Math.floor(e)+","+s+")"}},borderRadius:function(t){return{"border-radius":t+"px"}},borderTopWidth:function(t){return{"border-top-width":t+"px"}},borderBottomWidth:function(t){return{"border-bottom-width":t+"px"}},borderLeftWidth:function(t){return{"border-left-width":t+"px"}},borderRightWidth:function(t){return{"border-right-width":t+"px"}},borderWidth:function(t){return{"border-width":t+"px"}},borderColor:function(t,i,e,s){return 0==s?{"border-color":"transparent"}:{"border-color":"rgba("+Math.floor(t)+","+Math.floor(i)+","+Math.floor(e)+","+s+")"}},borderTopColor:function(t,i,e,s){return 0==s?{"border-top-color":"transparent"}:{"border-top-color":"rgba("+Math.floor(t)+","+Math.floor(i)+","+Math.floor(e)+","+s+")"}},borderBottomColor:function(t,i,e,s){return 0==s?{"border-bottom-color":"transparent"}:{"border-bottom-color":"rgba("+Math.floor(t)+","+Math.floor(i)+","+Math.floor(e)+","+s+")"}},borderRightColor:function(t,i,e,s){return 0==s?{"border-right-color":"transparent"}:{"border-right-color":"rgba("+Math.floor(t)+","+Math.floor(i)+","+Math.floor(e)+","+s+")"}},borderLeftColor:function(t,i,e,s){return 0==s?{"border-left-color":"transparent"}:{"border-left-color":"rgba("+Math.floor(t)+","+Math.floor(i)+","+Math.floor(e)+","+s+")"}},borderStyle:function(t){return{"border-style":t}},borderTopStyle:function(t){return{"border-top-style":t}},borderBottomStyle:function(t){return{"border-bottom-style":t}},borderRightStyle:function(t){return{"border-right-style":t}},borderLeftStyle:function(t){return{"border-left-style":t}},colorHSL:function(t,i,e,s){return"hsla("+Math.floor(t)+","+Math.floor(i)+"%,"+Math.floor(e)+"%,"+s+")"},backgroundTransparent:function(){return{"background-color":"transparent"}},backgroundColorHSL:function(t,i,e,s){return{"background-color":"hsla("+Math.floor(t)+","+Math.floor(i)+"%,"+Math.floor(e)+"%,"+s+")"}},clipCircle:function(t,i,e){return{"-webkit-clip-path":"circle("+t+"px,"+i+"px,"+e+"px)"}},getWidth:function(){return window.innerWidth},getHeight:function(){return window.innerHeight},getCenter:function(){return[.5*o.getWidth(),.5*o.getHeight()]},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?!0:!1},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},extend:function(t,i){for(var e in i)t[e]=i[e]},getSurfacePosition:function(t){var i;if(t._currTarget)i=t._currTarget.style.webkitTransform;else{if(!t.backBuffer)throw"no matrix found";i=t.backBuffer.style.webkitTransform}i=i.replace("matrix3d(",""),i=i.replace(")","");var e=i.split(",");if("undefined"!=typeof e[12])var s=parseInt(e[12].replace(" ","")),o=parseInt(e[13].replace(" ",""));else var s=o=0;return[s,o]},debounce:function(t,i){var e,o,n,r,a;return function(){o=this,a=arguments,n=new Date;var h=function(){var u=new Date-n;i>u?e=s.setTimeout(h,i-u):(e=null,r=t.apply(o,a))};return e||(e=s.setTimeout(h,i)),r}}};e.exports=o}),
define("lib/almond",function(){}),"undefined"==typeof document||"classList"in document.createElement("a")||function(t){var i="classList",e="prototype",s=(t.HTMLElement||t.Element)[e],o=Object,n=String[e].trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array[e].indexOf||function(t){for(var i=0,e=this.length;e>i;i++)if(i in this&&this[i]===t)return i;return-1},a=function(t,i){this.name=t,this.code=DOMException[t],this.message=i},h=function(t,i){if(""===i)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(i))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(t,i)},u=function(t){for(var i=n.call(t.className),e=i?i.split(/\s+/):[],s=0,o=e.length;o>s;s++)this.push(e[s]);this._updateClassName=function(){t.className=this.toString()}},p=u[e]=[],c=function(){return new u(this)};if(a[e]=Error[e],p.item=function(t){return this[t]||null},p.contains=function(t){return t+="",-1!==h(this,t)},p.add=function(t){t+="",-1===h(this,t)&&(this.push(t),this._updateClassName())},p.remove=function(t){t+="";var i=h(this,t);-1!==i&&(this.splice(i,1),this._updateClassName())},p.toggle=function(t){t+="",-1===h(this,t)?this.add(t):this.remove(t)},p.toString=function(){return this.join(" ")},o.defineProperty){var f={get:c,enumerable:!0,configurable:!0};try{o.defineProperty(s,i,f)}catch(l){-2146823252===l.number&&(f.enumerable=!1,o.defineProperty(s,i,f))}}else o[e].__defineGetter__&&s.__defineGetter__(i,c)}(self),
define("lib/classList",function(){}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var i=Array.prototype.slice.call(arguments,1),e=this,s=function(){},o=function(){return e.apply(this instanceof s&&t?this:t,i.concat(Array.prototype.slice.call(arguments)))};return s.prototype=this.prototype,o.prototype=new s,o}),
define("lib/functionPrototypeBind",function(){}),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(function(){t(+new Date)},1e3/60)}),
define("lib/requestAnimationFrame",function(){}),
define("main",["require","exports","module","famous/CanvasSurface","famous/Combiner","famous/ContainerSurface","famous/Context","famous/ElementAllocator","famous/Engine","famous/EventArbiter","famous/EventHandler","famous/ImageSurface","famous/Matrix","famous/RenderNode","famous/Scene","famous/SceneCompiler","famous/SpecParser","famous/Surface","famous/SurfaceManager","famous/Transform","famous/TransitionHelper","famous/Util","famous/WebGLSurface","famous/externs","famous-animation/Animation","famous-animation/AnimationEngine","famous-animation/GenericAnimation","famous-animation/Timer","famous-color/Color","famous-color/ColorPalette","famous-color/ColorPalettes","famous-ext/BoundEvents","famous-ext/EventView","famous-ext/Events","famous-ext/View","famous-math/Quaternion","famous-math/Vector","famous-misc/Camera","famous-misc/CubicBezier","famous-misc/Draggable","famous-misc/Drawer","famous-misc/Fader","famous-misc/FastClick","famous-misc/Flip","famous-misc/FormatTime","famous-misc/Idle","famous-misc/ImageFader","famous-misc/Layout","famous-misc/LightBox","famous-misc/MouseSync","famous-misc/PiecewiseCubicBezier","famous-misc/PinchSync","famous-misc/RenderArbiter","famous-misc/RotateSync","famous-misc/ScaleSync","famous-misc/Scrollview","famous-misc/Sequence","famous-misc/SequenceView","famous-misc/Shaper","famous-misc/StructuredShaper","famous-misc/Swappable","famous-misc/Timer","famous-misc/TouchSync","famous-misc/TouchTracker","famous-misc/TransitionInEffect","famous-physics/bodies/Circle","famous-physics/bodies/Particle","famous-physics/bodies/Rectangle","famous-physics/constraints/Collision","famous-physics/constraints/CollisionJacobian","famous-physics/constraints/Curve","famous-physics/constraints/Distance","famous-physics/constraints/Distance1D","famous-physics/constraints/Rod","famous-physics/constraints/Rope","famous-physics/constraints/StiffSpring","famous-physics/constraints/Surface","famous-physics/constraints/Wall","famous-physics/constraints/Walls","famous-physics/constraints/Joint","famous-physics/forces/Drag","famous-physics/forces/Repulsion","famous-physics/forces/Spring","famous-physics/forces/VectorField","famous-physics/integrator/SymplecticEuler","famous-physics/integrator/Verlet","famous-physics/math/GaussSeidel","famous-physics/math/Random","famous-physics/math/vector","famous-physics/math/matrix","famous-physics/math/quaternion","famous-physics/math/vectorArray","famous-physics/utils/PhysicsTracker","famous-physics/utils/PhysicsTransition","famous-physics/PhysicsEngine","famous-sync/GenericSync","famous-sync/MouseSync","famous-sync/PinchSync","famous-sync/RotateSync","famous-sync/ScaleSync","famous-sync/ScrollSync","famous-sync/TouchSync","famous-sync/TwoFingerSync"],function(t,i,e){var s=function(i){i.call(this,t)};s.Famous={},s.Famous.CanvasSurface=t("famous/CanvasSurface"),s.Famous.Combiner=t("famous/Combiner"),s.Famous.ContainerSurface=t("famous/ContainerSurface"),s.Famous.Context=t("famous/Context"),s.Famous.ElementAllocator=t("famous/ElementAllocator"),s.Famous.Engine=t("famous/Engine"),s.Famous.EventArbiter=t("famous/EventArbiter"),s.Famous.EventHandler=t("famous/EventHandler"),s.Famous.ImageSurface=t("famous/ImageSurface"),s.Famous.Matrix=t("famous/Matrix"),s.Famous.RenderNode=t("famous/RenderNode"),s.Famous.Scene=t("famous/Scene"),s.Famous.SceneCompiler=t("famous/SceneCompiler"),s.Famous.SpecParser=t("famous/SpecParser"),s.Famous.Surface=t("famous/Surface"),s.Famous.SurfaceManager=t("famous/SurfaceManager"),s.Famous.Transform=t("famous/Transform"),s.Famous.TransitionHelper=t("famous/TransitionHelper"),s.Famous.Util=t("famous/Util"),s.Famous.WebGLSurface=t("famous/WebGLSurface"),s.Famous.Externs=t("famous/externs"),s.FamousAnimation={},s.FamousAnimation.Animation=t("famous-animation/Animation"),s.FamousAnimation.AnimationEngine=t("famous-animation/AnimationEngine"),s.FamousAnimation.GenericAnimation=t("famous-animation/GenericAnimation"),s.FamousAnimation.Timer=t("famous-animation/Timer"),s.FamousColor={},s.FamousColor.Color=t("famous-color/Color"),s.FamousColor.ColorPalette=t("famous-color/ColorPalette"),s.FamousColor.ColorPalettes=t("famous-color/ColorPalettes"),s.FamousExt={},s.FamousExt.BoundEvents=t("famous-ext/BoundEvents"),s.FamousExt.EventView=t("famous-ext/EventView"),s.FamousExt.Events=t("famous-ext/Events"),s.FamousExt.View=t("famous-ext/View"),s.FamousMath={},s.FamousMath.Quaternion=t("famous-math/Quaternion"),s.FamousMath.Vector=t("famous-math/Vector"),s.FamousMisc={},s.FamousMisc.Camera=t("famous-misc/Camera"),s.FamousMisc.CubicBezier=t("famous-misc/CubicBezier"),s.FamousMisc.Draggable=t("famous-misc/Draggable"),s.FamousMisc.Drawer=t("famous-misc/Drawer"),s.FamousMisc.Fader=t("famous-misc/Fader"),s.FamousMisc.FastClick=t("famous-misc/FastClick"),s.FamousMisc.Flip=t("famous-misc/Flip"),s.FamousMisc.FormatTime=t("famous-misc/FormatTime"),s.FamousMisc.Idle=t("famous-misc/Idle"),s.FamousMisc.ImageFader=t("famous-misc/ImageFader"),s.FamousMisc.Layout=t("famous-misc/Layout"),s.FamousMisc.LightBox=t("famous-misc/LightBox"),s.FamousMisc.MouseSync=t("famous-misc/MouseSync"),s.FamousMisc.PiecewiseCubicBezier=t("famous-misc/PiecewiseCubicBezier"),s.FamousMisc.PinchSync=t("famous-misc/PinchSync"),s.FamousMisc.RenderArbiter=t("famous-misc/RenderArbiter"),s.FamousMisc.RotateSync=t("famous-misc/RotateSync"),s.FamousMisc.ScaleSync=t("famous-misc/ScaleSync"),s.FamousMisc.Scrollview=t("famous-misc/Scrollview"),s.FamousMisc.Sequence=t("famous-misc/Sequence"),s.FamousMisc.SequenceView=t("famous-misc/SequenceView"),s.FamousMisc.Shaper=t("famous-misc/Shaper"),s.FamousMisc.StructuredShaper=t("famous-misc/StructuredShaper"),s.FamousMisc.Swappable=t("famous-misc/Swappable"),s.FamousMisc.Timer=t("famous-misc/Timer"),s.FamousMisc.TouchSync=t("famous-misc/TouchSync"),s.FamousMisc.TouchTracker=t("famous-misc/TouchTracker"),s.FamousMisc.TransitionInEffect=t("famous-misc/TransitionInEffect"),s.FamousPhysics={},s.FamousPhysics.Bodies_Circle=t("famous-physics/bodies/Circle"),s.FamousPhysics.Bodies_Particle=t("famous-physics/bodies/Particle"),s.FamousPhysics.Bodies_Rectangle=t("famous-physics/bodies/Rectangle"),s.FamousPhysics.Constraints_Collision=t("famous-physics/constraints/Collision"),s.FamousPhysics.Constraints_CollisionJacobian=t("famous-physics/constraints/CollisionJacobian"),s.FamousPhysics.Constraints_Curve=t("famous-physics/constraints/Curve"),s.FamousPhysics.Constraints_Distance=t("famous-physics/constraints/Distance"),s.FamousPhysics.Constraints_Distance1D=t("famous-physics/constraints/Distance1D"),s.FamousPhysics.Constraints_Rod=t("famous-physics/constraints/Rod"),s.FamousPhysics.Constraints_Rope=t("famous-physics/constraints/Rope"),s.FamousPhysics.Constraints_StiffSpring=t("famous-physics/constraints/StiffSpring"),s.FamousPhysics.Constraints_Surface=t("famous-physics/constraints/Surface"),s.FamousPhysics.Constraints_Wall=t("famous-physics/constraints/Wall"),s.FamousPhysics.Constraints_Walls=t("famous-physics/constraints/Walls"),s.FamousPhysics.Constraints_joint=t("famous-physics/constraints/Joint"),s.FamousPhysics.Forces_Drag=t("famous-physics/forces/Drag"),s.FamousPhysics.Forces_Repulsion=t("famous-physics/forces/Repulsion"),s.FamousPhysics.Forces_Spring=t("famous-physics/forces/Spring"),s.FamousPhysics.Forces_VectorField=t("famous-physics/forces/VectorField"),s.FamousPhysics.Integrator_SymplecticEuler=t("famous-physics/integrator/SymplecticEuler"),s.FamousPhysics.Integrator_Verlet=t("famous-physics/integrator/Verlet"),s.FamousPhysics.Math_GaussSeidel=t("famous-physics/math/GaussSeidel"),s.FamousPhysics.Math_Random=t("famous-physics/math/Random"),s.FamousPhysics.Math_Vector=t("famous-physics/math/vector"),s.FamousPhysics.Math_matrix=t("famous-physics/math/matrix"),s.FamousPhysics.Math_quaternion=t("famous-physics/math/quaternion"),s.FamousPhysics.Math_vectorArray=t("famous-physics/math/vectorArray"),s.FamousPhysics.Utils_PhysicsTracker=t("famous-physics/utils/PhysicsTracker"),s.FamousPhysics.Utils_PhysicsTransition=t("famous-physics/utils/PhysicsTransition"),s.FamousPhysics.PhysicsEngine=t("famous-physics/PhysicsEngine"),s.FamousSync={},s.FamousSync.GenericSync=t("famous-sync/GenericSync"),s.FamousSync.MouseSync=t("famous-sync/MouseSync"),s.FamousSync.PinchSync=t("famous-sync/PinchSync"),s.FamousSync.RotateSync=t("famous-sync/RotateSync"),s.FamousSync.ScaleSync=t("famous-sync/ScaleSync"),s.FamousSync.ScrollSync=t("famous-sync/ScrollSync"),s.FamousSync.TouchSync=t("famous-sync/TouchSync"),s.FamousSync.TwoFingerSync=t("famous-sync/TwoFingerSync"),e.exports=s}),require(["lib/classList","lib/functionPrototypeBind","lib/requestAnimationFrame","main"]),require("main")});
